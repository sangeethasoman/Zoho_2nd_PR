{% extends 'base.html' %}
{% load static %}
{% block content %}

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
    select:focus {
        outline: none !important;
        box-shadow: none !important;
    }

    #customer_sel option:hover {
        background-color: rgb(210, 132, 30);
    }

    .element-below-fixed {
        padding-top: 100px;
    }

    /* width */
    ::-webkit-scrollbar {
        width: 10px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #888;
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    .hide {
        display: none;
    }

    .modal-backdrop {
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 999;
        /* Adjust the alpha value to control the opacity */
    }
 
</style>

<!-- New item -->
<style>
  .open-button {
    background-color: #ccc;
    color: black;
    padding: 5px 5px;
    border: none;
    cursor: pointer;
    opacity: 0.8;
    position: relative;
  }

  /* The popup form - hidden by default */
  .form-popup {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background-color: #f1f1f1;
    border: 3px solid black;
    z-index: 9999;
    padding: 20px;
    max-width: 300px;
  }

  /* Full-width input fields */
  .form-popup input[type="text"] {
    width: 100%;
    padding: 10px;
    margin: 5px 0 20px 0;
    border: none;
    background: #f1f1f1;
  }

  /* Set a style for the submit button */
  .form-popup .btn {
    background-color: #04aa6d;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
  }

  /* Set a style for the close button */
  .form-popup .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
  }

  /* Change the color of the close button on hover */
  .form-popup .close:hover {
    color: black;
  }

  .openbutton {
    background-color: #ccc;
    color: black;
    padding: 5px 5px;
    border: none;
    cursor: pointer;
    opacity: 0.8;
    position: relative;
    width: 180px;
    z-index:9;
  }

  /* The popup form - hidden by default */
  .form-popup1 {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background-color: #f1f1f1;
    border: 3px solid black;
    z-index: 9999;
    padding: 20px;
    max-width: 300px;
  }

  /* Full-width input fields */
  .form-popup1 input[type="text"] {
    width: 100%;
    padding: 10px;
    margin: 5px 0 20px 0;
    border: none;
    background: #f1f1f1;
  }

  /* Set a style for the submit button */
  .form-popup1 .btn.add-button {
    background-color: #04aa6d;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
  }

  /* Set a style for the close button */
  .form-popup1 .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
  }

  .form-popup1 .close:hover {
    color: black;
  }

  /* Style for the highlighted account type options */
  option.highlight-account-type {
    background-color: #f3f3f3; /* Example background color */
    color: #666; /* Example text color */
    font-weight: bold; /* Example font weight */
    /* Add any other styles you want to customize the look of the highlighted account type options */
  }
  
  /* Additional style for hovering over the highlighted account type options (optional) */
  option.highlight-account-type:hover {
    background-color: #f5f5f5; /* Example hover background color */
    /* Add any other styles you want for the hover state */
  }
  .highlight-account-type {
    text-align: left;
    padding-left: 10px;
  }
 

</style>

<script>



    function calc() {debugger
        $('#item_table tbody tr').each(function () {
debugger

            var html = $(this).html();
            if (html != '') {
                var pos = document.getElementById("pos").value;
                var sos = document.getElementById("sos").value;
               
                console.log('rows');
                var qty = $(this).find('.qty').val();
                var rate = $(this).find('.rate').val();
                var tax = $(this).find('.tax').val();
                var dic = $(this).find('.discount').val();
                console.log(qty);
                console.log(rate);
                console.log(tax);
                 
               var amount = rate*qty;
               var tax_amount = 0;
               if(dic){
                amount_disc =  amount - dic;
                $(this).find('.amount').val(amount_disc);
                tax_amount =(amount_disc*(tax/100));
                $(this).find('.taxamount').val(tax_amount)
               }
               else{
                $(this).find('.amount').val(amount);
                tax_amount =(amount*(tax/100));
                $(this).find('.taxamount').val(tax_amount)
               }
               calc_total();
            }
        });
    }

    function calc_total() { debugger
        total = 0;
        $('.amount').each(function () {
            total += parseFloat($(this).val());

        });
        taxamount = 0;
        $('.taxamount').each(function () {
            taxamount += parseFloat($(this).val());

        });

        if(isGST()){ 
            gst = taxamount / 2; 
            $('#cgst').val(parseFloat(gst.toFixed(2)));
            $('#sgst').val(parseFloat(gst.toFixed(2))); 
            document.getElementById("tr_cgst").style.display = "table-row";
            document.getElementById("tr_sgst").style.display = "table-row";
            document.getElementById('tr_igst').style.display = "none";

        }
        else
        { 
            $('#igst').val(taxamount.toFixed(2)); 
            document.getElementById('tr_igst').style.display = "table-row";
            document.getElementById("tr_cgst").style.display = "none";
            document.getElementById("tr_sgst").style.display = "none";
        }
 
        $('#subtotal').val(total.toFixed(2));
        $('#total_taxamount').val(taxamount.toFixed(2));

        $('#total').val((taxamount + total).toFixed(2));
        // $('#baldue').val((taxamount + total).toFixed(2));
 
    }

     
    // Calculate total
    $(document).ready(function () {
        $('#shipping, #adjustment').on('change', function () {
            var shipping_charge = parseFloat($('#shipping').val() || 0);
            var add_round_off = parseFloat($('#adjustment').val() || 0);
            var subtotal = parseFloat($('#subtotal').val() || 0);
            var total_tax = parseFloat($('#total_taxamount').val() || 0);
            var total = subtotal + total_tax + shipping_charge + add_round_off;
            // total = Math.round(total);

            // $('#shipping_charge').val(shipping_charge.toFixed(2));
            // $('#discount_amnt').val(discount_amnt.toFixed(2));
            $('#total').val(total.toFixed(2));
        });
    });

</script>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>


<section>
    <!-- <div class="fixed-top  " style="top: 7rem; margin-left: 20rem;"> -->


    <div class="row  ml-2">
        <div class="col-md-3 "><a class="text-white" style="font-size: 1.5rem;"><i class="fas fa-file-invoice"></i> New
                Bill</a></div>
        <input type="hidden" id="state" value="{{ company.state }}">
    </div>

    <!-- <div style="height: 600px; overflow-y: scroll;"> -->
        <form method="POST" action="" class="p-5" enctype="multipart/form-data" novalidate id="forms">
            {% csrf_token %}
            <div class="row mb-4  pt-5">
                <div class="col-sm-2"><label for="customer_name">Vendor Name*</label></div>
                <div class="col-sm-10 d-flex align-items-center">
                    <select class="form-control text-dark" id="vendor_sel" name="vendor_name"
                        style="width: 50%;  background: white;">
                        <option>Select Vendor</option>
                        <option id="crt_vendor" selected></option>
                        {% for v in vendors %}
                        <option value="{{v.first_name}} {{v.last_name}}">
                            {{v.first_name}} {{v.last_name}}
                        </option>
                        {% endfor %}
                    </select> 
                    <a href="" class="p-2" data-toggle="modal" data-target="#create_vendor">
                        <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
                            data-toggle="tooltip" title="Create Vendor"></i>
                    </a>
                </div>
            </div>
            <div class="row mb-4  d-none " id="vendor_email_row">
                <div class="col-sm-2"><label for="vendor_email">Email</label></div>
                <div class="col-sm-10"><input type="email" id="vendor_email" name="vendor_email"
                        class="form-control bg-white text-dark" style="width: 50%;">

                </div>
            </div>
            
          <div class="row mt-2 d-none" id="gst_trt_row">
            <div class="col-sm-2">
              <label for="gst_trt_inp">GST Treatment</label>
            </div>
            <div class="col-sm-10">
              <input type="text" class="form-control text-dark bg-light" id="v_gsttype" name="v_gsttype" style="width: 50%;">
            </div>
          </div>
          <div class="row mt-2 mb-2 d-none pt-2" id="gstin_row">
            <div class="col-sm-2">
              <label for="gstin_inp">GST Number</label>
            </div>
            <div class="col-sm-10">
              <input type="text" class="form-control text-dark bg-light"  id="gstin_inp" name="gstin_inp"  style="width: 50%;">
            </div>
          </div>
            <div class="row mb-4 d-none pt-2" id="sos_row">
                <div class="col-sm-2"><label for="vendor_sos">Source Of Supply</label></div>
                <div class="col-sm-10"><!-- <input type="text" id="sos" name="sos" class="form-control bg-white text-dark"
                        style="width: 50%;"> -->
                 
                        <select id="sos" name="sos" class="form-control bg-white text-dark"
                        style="width: 50%;">
                          <option value="value" selected></option>
                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                        <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                        <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                        <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                        <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                        <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                       <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                        <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                        <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                        <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                        <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                            </select>
                </div>
            </div>
            <div class="row mb-4  d-none " id="bill_atten_tion_row">
              <div class="col-sm-2"><label for="bill_atten_tion">Attention</label></div>
              <div class="col-sm-10"><input type="text" id="bill_att_en_tion" name="bill_att_en_tion"
                      class="form-control bg-white text-dark" style="width: 50%;">

              </div>
            </div>
            <div class="row mb-4  d-none " id="bill_country_row">
              <div class="col-sm-2"><label for="bill_country">Country</label></div>
              <div class="col-sm-10"><input type="text" id="bill_co_untry" name="bill_co_untry"
                      class="form-control bg-white text-dark" style="width: 50%;">

              </div>
            </div>
            <div class="row mb-4  d-none " id="bill_address_row">
              <div class="col-sm-2"><label for="bill_address">Address</label></div>
              <div class="col-sm-10"><textarea type="text" cols="30" rows="10" id="bill_ad_dress" name="bill_ad_dress"
                      class="form-control bg-white text-dark" style="width: 50%;"> </textarea>

              </div>
          </div>
          <div class="row mb-4  d-none " id="bill_city_row">
            <div class="col-sm-2"><label for="bill_city">City</label></div>
            <div class="col-sm-10"><input type="text" id="b_ill_city" name="b_ill_city"
                    class="form-control bg-white text-dark" style="width: 50%;">

            </div>
        </div>
        <div class="row mb-4  d-none " id="bill_state_row">
          <div class="col-sm-2"><label for="bill_state">State</label></div>
          <div class="col-sm-10"><input type="text" id="bill_sta_te" name="bill_sta_te"
                  class="form-control bg-white text-dark" style="width: 50%;">

          </div>
      </div>
      <div class="row mb-4  d-none " id="bill_zipcode_row">
        <div class="col-sm-2"><label for="bill_zipcode">Zipcode</label></div>
        <div class="col-sm-10"><input type="number" id="bill_zipco_de" name="bill_zipco_de"
                class="form-control bg-white text-dark" style="width: 50%;">

        </div>
    </div>
    <div class="row mb-4  d-none " id="bill_phone_row">
      <div class="col-sm-2"><label for="bill_phone">Phone</label></div>
      <div class="col-sm-10"><input type="tel" id="bill_pho_ne" name="bill_pho_ne"
              class="form-control bg-white text-dark" style="width: 50%;">

      </div>
  </div>
  <div class="row mb-4  d-none " id="bill_fax_row">
    <div class="col-sm-2"><label for="bill_fax">Fax</label></div>
    <div class="col-sm-10"><input type="tel" id="bill_fa_x" name="bill_fa_x"
            class="form-control bg-white text-dark" style="width: 50%;">

    </div>
</div>
            <div class="row mb-4   pt-5">
                <div class="col-sm-2"><label for="bill_number">Bill#*</label></div>
                <div class="col-sm-4"><input type="text" id="bill_number" name="bill_number"
                        class="form-control bg-white text-dark" value="" style="width: 132%;">

                </div>
            </div>
            <div class="row mb-4">
              <div class="col-sm-2"><label for="reference">Reference No:</label></div>
              <div class="col-sm-4"> <input type="number" id="ref_number" name="reference_number"
                      class="form-control bg-white text-dark" value="{{b_no}}"style="width: 132%;"></div>
          </div>
            <div class="row mb-4">
              <div class="col-sm-2"><label for="reference">Order Number</label></div>
              <div class="col-sm-4"> <input type="number" id="order_number" name="order_number"
                      class="form-control bg-white text-dark" style="width: 132%;"></div>
          </div>
            <div class="row mt-2">
              
              <div class="row mb-4">
                <div class="col-sm-2"><label for="repeats">Repeat Every *</label></div>
                <div class="col-sm-4"><select class="form-control bg-white text-dark" id="repeats"  name="repeats"  class="form-control bg-white text-dark" style="width: 137%;"> </select></div>
                <div class="col-sm-5" class="btn p-2" style="text-align: right; padding-right: 27%;" >
                  <a data-toggle="modal" data-target="#newrepeat">
                    <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
                        data-toggle="tooltip" title="Add Repeat"></i>
                </a>
                </div>
              </div>
            </div>
             
              
            
            
            
            <div class="row mb-4">
                <div class="col-sm-2"><label for="reference">Bill Date*</label></div>
                <div class="col-sm-4"> <input type="date" id="bill_date" name="bill_date"
                        class="form-control bg-white text-dark" style="width: 132%;"></div>
            </div>
           
            <div class="row ">
                <div class="col-sm-2"><label for="reference" >Due Date*</label></div>
                <div class="col-sm-4"> <input type="date" id="due_date" name="due_date"
                        class="form-control bg-white text-dark" style="width: 132%;">
                </div>
                <!-- <div class="col-sm-5 m-2" style="text-align: right; padding-right: 17%;" >
                  <input type="checkbox" id="never-expire-checkbox" onchange="toggleDateInput()" />
                  <label for="never-expire-checkbox" style="color: #909091;" name="neverExp">Never Expires</label>
                </div> -->
                
            </div>
            <div class="row pt-4">
              <div class="col-sm-2"><label class="text-right">Payment Terms</label></div>
              <div class="col-sm-5 d-flex align-items-center"  style="width: 49%;"> 
                  <select id="p_terms" name="p_terms"
                  class="form-control bg-white text-dark" >
                  
                      
                      <option id="crt_term" selected></option>
                     
                      <option value="30">Net 30</option>
                      
                      <option value="30">Net 60</option>
                      <option value="recpt">Due On Receipt</option>
                      {% for t in terms %}
                      <option value="{{t.Days}}">{{t.Terms}}</option>
                      {% endfor%}
                  </select>
                  <button type="button" class="btn p-2" data-toggle="modal" data-target="#newpayment">
                      <i class="fas fa-plus p-2 rounded" style="color: white; background-color: rgb(210, 132, 30); "
                          data-toggle="tooltip" title="Configure Terms"></i>
                  </button>
                  
              </div>
            </div>
            
            <div class="row mb-4  pt-5">
              <div class="col-sm-2"><label for="customer_name">Customer Name*</label></div>
              <div class="col-sm-10 d-flex align-items-center">
                  <select class="form-control text-dark" id="customer_sel" name="customer_name"
                      style="width: 50%;  background: white;">
                      <option>Select Customer</option>
                      <option id="crt_cust" selected></option>
                      {% for cust in customers %}
                      <option value="{{cust.customerName}}" data-pos="{{cust.placeofsupply}}">
                          {{cust.customerName}}
                      </option>
                      {% endfor %}
                  </select>
                  <a href="" class="p-2" data-toggle="modal" data-target="#create_customer">
                      <i class="fas fa-plus p-2 rounded" style="color: white; background-color: rgb(210, 132, 30); "
                          data-toggle="tooltip" title="Create Customer"></i>
                  </a>
              </div>
          </div>
          <div class="row mb-4  d-none " id="customer_email_row">
              <div class="col-sm-2"><label for="customer_email">Email</label></div>
              <div class="col-sm-10"><input type="email" id="customer_email" name="customer_email"
                      class="form-control bg-white text-dark" style="width: 50%;">

              </div>
          </div>
          <div class="row mt-2 d-none" id="cgst_trt_row">
            <div class="col-sm-2">
              <label for="c_gsttype">GST Treatment</label>
            </div>
            <div class="col-sm-10">
              <input type="text" class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" style="width: 50%;"  >
            </div>
          </div>
    
          <div class="row mt-2 mb-2 pt-2 d-none" id="cgstin_row">
            <div class="col-sm-2">
              <label for="gstin_inp">GST Number</label>
            </div>
            <div class="col-sm-10">
              <input type="text" class="form-control text-dark bg-light"  id="cgstin_inp" name="cgstin_inp"style="width: 50%;" >
            </div>
          </div>
          <div class="row mb-4 pt-2 d-none" id="pos_row" >
              <div class="col-sm-2"><label for="customer_pos">Place Of Supply</label></div>
               <div class="col-sm-10"><!--<input type="text" id="pos" name="pos" class="form-control bg-white text-dark"
                      style="width: 50%;"> -->
                      <select id="pos" name="pos" class="form-control bg-white text-dark"
                      style="width: 50%;">
                        <option value="value" selected></option>
                      <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                      <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                      <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                      <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                      <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                      <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                      <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                      <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                      <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                      <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                    <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                     <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                      <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                      <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                      <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                      <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                      <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                          </select>
              </div>
          </div>
          <div class="row mb-4  d-none " id="cust_bill_atten_tion_row">
            <div class="col-sm-2"><label for="cust_bill_atten_tion">Attention</label></div>
            <div class="col-sm-10"><input type="text" id="cust_bill_att_en_tion" name="cust_bill_att_en_tion"
                    class="form-control bg-white text-dark" style="width: 50%;">

            </div>
          </div>
          <div class="row mb-4  d-none " id="cust_bill_country_row">
            <div class="col-sm-2"><label for="cust_bill_country">Country</label></div>
            <div class="col-sm-10"><input type="text" id="cust_bill_co_untry" name="cust_bill_co_untry"
                    class="form-control bg-white text-dark" style="width: 50%;">

            </div>
          </div>
          <div class="row mb-4  d-none " id="cust_bill_address_row">
            <div class="col-sm-2"><label for="cust_bill_address">Address</label></div>
            <div class="col-sm-10"><textarea type="text" cols="30" rows="10" id="cust_bill_ad_dress" name="cust_bill_ad_dress"
                    class="form-control bg-white text-dark" style="width: 50%;"> </textarea>

            </div>
        </div>
        <div class="row mb-4  d-none " id="cust_bill_city_row">
          <div class="col-sm-2"><label for="cust_bill_city">City</label></div>
          <div class="col-sm-10"><input type="text" id="cust_b_ill_city" name="cust_b_ill_city"
                  class="form-control bg-white text-dark" style="width: 50%;">

          </div>
      </div>
      <div class="row mb-4  d-none " id="cust_bill_state_row">
        <div class="col-sm-2"><label for="cust_bill_state">State</label></div>
        <div class="col-sm-10"><input type="text" id="cust_bill_sta_te" name="cust_bill_sta_te"
                class="form-control bg-white text-dark" style="width: 50%;">

        </div>
    </div>
    <div class="row mb-4  d-none " id="cust_bill_zipcode_row">
      <div class="col-sm-2"><label for="cust_bill_zipcode">Zipcode</label></div>
      <div class="col-sm-10"><input type="number" id="cust_bill_zipco_de" name="cust_bill_zipco_de"
              class="form-control bg-white text-dark" style="width: 50%;">

      </div>
  </div>
  <div class="row mb-4  d-none " id="cust_bill_phone_row">
    <div class="col-sm-2"><label for="cust_bill_phone">Phone</label></div>
    <div class="col-sm-10"><input type="tel" id="cust_bill_pho_ne" name="cust_bill_pho_ne"
            class="form-control bg-white text-dark" style="width: 50%;">

    </div>
</div>
<div class="row mb-4  d-none " id="cust_bill_fax_row">
  <div class="col-sm-2"><label for="cust_bill_fax">Fax</label></div>
  <div class="col-sm-10"><input type="number" id="cust_bill_fa_x" name="cust_bill_fa_x"
          class="form-control bg-white text-dark" style="width: 50%;">

  </div>
</div>
          <div class="row mb-4 pt-2">
            <div class="col-sm-2"><label for="paymentmethod">Payment Method</label></div>
            <div class="col-sm-10"><select name="paymentmethod" id="paymentmethod" class="form-control bg-white text-dark" style="width: 50%;">
              <option id="crt_paymt_method" selected></option>
              <option value="Cash">Cash</option>
              <option value="Cheque">Cheque</option>
              <option value="UPI">UPI</option>
              {% for b in bank %}
                  <option value="{{b.name}}">{{b.name}}</option>
              {% endfor %}
          </select>
            <div class="row mb-4   pl-4" id="chequeField">
          <div class="col-sm-2"><label for="cheque_Field">Cheque Number</label></div>
          <div class="col-sm-10"><input type="text" id="chequeId" name="cheque_Id"
                  class="form-control bg-white text-dark" style="width: 50%;">
        
          </div>
          
          <div class="row mb-4   " id="upiField">
            <div class="col-sm-2"><label for="upi_Field">UPI ID</label></div>
            <div class="col-sm-10"><input type="text" id="upiNumber" name="upi_Number"
                    class="form-control bg-white text-dark" style="width: 50%;">
          
            </div>
            </div>
            
        </div>
        
          <!-- <div class="form-check  pt-2 pb-5">
                <input class="form-check-input" type="checkbox" value="" id="checkbox" onchange="updateTaxHeader()">
                <label class="form-check-label" for="checkbox">
                    This transaction is applicable for reverse charge
                </label>
            </div> -->
            <label for="">Price List</label><br>
            <table class="table  text-black" id="item_table" style="background-color: rgba(250, 227, 198, 0.8);display: block;"
                onchange="calc()">
                <thead>
                    <tr>
                        <th style="width: 200px;">Item Details <a href="" data-toggle="modal" data-target="#create_item" style="text-decoration: none;">
                          <i class="fas fa-plus p-2 rounded text-right"style="color: white; background-color: rgb(210, 132, 30);"></i></a></th>
                          <th class=" text-right">HSN </th>

                        <!-- <th style="width: 250px;">Account<a href="" data-toggle="modal" data-target="#create_account" style="text-decoration: none;">
                          <i class="fas fa-plus p-2 rounded"style="color: white; background-color: rgb(210, 132, 30);"></i></a></th> -->

                        <th class="text-right" >Quantity</th>
                        <th class="text-right" >Rate</th>
                        <th class="text-right" id="tax_head" style="width: 200px;">Tax</th>
                        <th class="text-center">Discount</th>
                        <th class="text-right" >Amount</th>
                    </tr>
                </thead>
                <tbody>

                    <tr id='row1'>
                        <td class='text-right'>
                            <div class='form-group'><select
                                    class='form-control bg-transparent text-black border-0 item_select itme itemlist'
                                    name='item[]' id='item1'>
                                    <option class='text-dark'>Select Items</option>
                                    <option class='text-dark' id="items_nms" ></option>
                                    {% for i in items %}
                                    <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                                    {% endfor %}
                                </select></div>
                        </td>
                        <td class='text-right' style="width: 80px;">
                          <input type="text" value="0" name='HSN[]' id="HSN1"  placeholder='HSN' class='bg-transparent border-0 text-black text-right HSN' style="width: 52px;" />
                        </td>
          
                        <td class='text-right'><input type='number' id='qty1' style="width: 50px;"
                                class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value='0'>
                        </td>
                        <td class='text-right'><input type='number' id='rate1'  style="width: 70px;"
                                class='bg-transparent border-0 text-black text-right rate' name='rate[]' value='0.00'>
                        </td>
                        
                        <td class='text-right' > 
                          <select name='tax[]' id='tax1' class='bg-transparent border-0 text-black text-right tax'
                          onclick='handleTaxChange(1)'>
                            <optgroup label="GST" >
                                <option value=0>0% GST</option>
                                <option value=3>3% GST</option>
                                <option value=5>5% GST</option>
                                <option value=12>12% GST</option>
                                <option value=18>18% GST</option>
                                <option value=28>28% GST</option>
                            </optgroup>
                            <optgroup label="IGST" >
                                <option value=0>0% IGST</option>
                                <option value=3>3% IGST</option>
                                <option value=5>5% IGST</option>
                                <option value=12>12% IGST</option>
                                <option value=18>18% IGST</option>
                                <option value=28>28% IGST</option>
                            </optgroup>
                        </select>
                            
                        </td>
                        <td class='text-right'> 
                          <input type="number" id="discount" name="discount[]"  style="width: 60px;"  value='0.00' class='bg-transparent border-0 text-black text-right discount' step="0.00" min="0"/>
                        </td> 
                        <td style="display: none;">
                            <input type="number" name='taxamount[]' id="taxamount1" class="form-control taxamount" />
                        </td>
                        <td class='text-right'><input type='number' id='amount1'
                                class='bg-transparent border-0 text-black text-right amount' style="width: 60px;" name='amount[]'
                                value='0.00'></td>
                        <td class='text-center'><button type='button' id='copy_btn1'
                                class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                                data-placement='top' title='Clone' style='width:30px'><i
                                    class="fas fa-copy"></i></button>
                        </td>
                        <td class='text-center'><button type='button' id='del_btn1'
                                class='btn btn-transparent text-danger btn-sm   delete-row' data-toggle='tooltip'
                                data-placement='top' title='delete-row' style='width:30px'><i
                                    class='fa fa-times'></i></button></td>
                    </tr>
                </tbody>

            </table>
            <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30) ;"
                id="add-row">Add another line</button>
            
               
            <div class="row  pb-5">
                <div class="col-sm-6 d-flex flex-column mt-4">
                  <label for="">Note</label>
                  <div class="form-row">
                    <textarea class="form-control text-dark bg-light" name="note" rows="15" style="height: 200px;"></textarea>
                  </div><br>

                </div>
                <div class="col-sm-6">
                    <table class=" table  text-black" style="background-color: rgba(250, 227, 198, 0.8);">
                        <tr>
                            <td>Sub Total</td>
                            <td></td>
                            <td><input type="number" id="subtotal" name="subtotal" step="any" value="0.00"
                                    class="bg-transparent border-0 text-right subtotal "></td>
                        </tr>
                        <tr style="display: none;" id="tr_igst">
                            <td>IGST</td>
                            <td></td>
                            <td><input type="number" id='igst' name="igst" step="any" value="0.00"
                                    class="form-control bg-transparent border-0 text-right igst text-dark"></td>
                        </tr>
                        <tr style="display: none;" id="tr_cgst">
                            <td>CGST</td>
                            <td></td>
                            <td><input type="number" id='cgst' name="cgst" step="any" value="0.00"
                                    class="form-control bg-transparent border-0 text-right cgst text-dark"></td>
                        </tr>
                        <tr style="display: none;" id="tr_sgst">
                            <td>SGST</td>
                            <td></td>
                            <td><input type="number" id='sgst' name="sgst" step="any" value="0.00"
                                    class="form-control bg-transparent border-0 text-right sgst text-dark"></td>
                        </tr>
                        <tr>
                            <td>Tax Amount</td>
                            <td></td>
                            <td><input type="number" id="total_taxamount" name="total_taxamount" step="any" value="0.00"
                                    class="total_taxamount form-control bg-transparent border-0 text-right text-dark">
                            </td>
                        </tr>
                        <tr>
                            <td>Shipping Charges</td>
                            <td></td>
                            <td><input type="number" id="shipping" name="shipping_charge" value="0" > <i class="fas fa-question"></i></td>
                            <!-- <td><input type="text" id="shipping_charge" name="shipping_charge" step="any" 
                                    class="form-control bg-transparent border-0 text-right shipping_charge text-dark">
                            </td> -->
                        </tr>
                        <tr>
                            <td>Adjustment</td>
                            <td></td>
                            <td><input type="number" id="adjustment" name="add_round_off" value="0" > <i class="fas fa-question"></i></td>
                            <!-- <td><input type="number" id="discount" name="discount_amnt" value="0" > <i class="fas fa-question"></i></td> -->
                            <!-- <td><input type="text" id="discount_amnt" name="discount_amnt" step="any" 
                                    class="form-control bg-transparent border-0 text-right discount_amnt text-dark">
                            </td> -->
                        </tr>
                        <tr>
                            <th>Total ( &#x20B9; )</th>
                            <th></th>
                            <th><input type="number" id="total" name="total" step="any" value="0.00"
                                    class="form-control bg-transparent border-0 text-right total text-dark"></th>
                           
                        </tr>
                        <tr>
                          <td><strong>Paid ( &#x20B9; )</strong></td>
                          <th></th>
                          <th><input type="number" id="amtPaid" name="amtPaid" step="any" value="0.00"></th>
                        </tr>
                    </table>
                </div>
            </div>
            

            <div class="row py-2 ">

                <div class="col-md-6 py-2 text-center rounded" style="background-color: rgba(250, 227, 198, 0.8);">
                    <label class="text-dark" for="">Attach File(s) to Purchase Bill</label><br>

                    <label for="file-upload" class="btn text-white border-0"
                        style="background-color: rgb(210, 132, 30);">
                        <i class="fas fa-upload text-white"></i> Upload File
                    </label>
                    <input id="file-upload" type="file" name="file" style="display:none;">



                </div>
            </div>
               
            <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                onclick="saveAsDraftDialog()" value="Save As Draft">
            <input type="submit" class="btn text-white mt-5" style="background-color: rgb(210, 132, 30) ; "
                onclick="saveAndOpenDialog()" value="Save And Open">
            <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                onclick="cancelDialog()" value="Cancel">
        </form>



    </div>

    </div>



</section>

<!-- repeat modal -->


<div class="modal fade" id="newrepeat">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">Add Repeat</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalRepeat">
            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>
              <div class="col-md-4 mt-2">
                
              </div>

            </div>


            <div class="row mt-2">
              <div class="col-md-2 mt-2">
                <center><label for="termname" style="color: rgb(190, 88, 88);">Add Repeat*</label></center>
              </div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="repeats_input" name="repeats_input" required>      
              </div>

             

            </div>
            
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="RepeatSave">Save
                  </button> 
                  

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div> 

<!-- create customer----------------------------------------------------------------------------------------------------------------------------------- -->

<div class="modal fade" id="create_customer">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Customer</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);height: 500px; overflow-y: scroll;">
        <div class="card p-3 m-3">
          <form  method="POST" action=""  enctype="multipart/form-data" class="" novalidate id="modalCustomer">
            {% csrf_token %}
            
            <div class="form-group row mt-4">
              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer Type</label>
              
              <div class=" col-sm-12 col-md-3 col-lg-3">
                  <input  type="radio"  value="Business" name="type" >
                          <label for="Business"> Business</label>
                         &nbsp;&nbsp;&nbsp;
                         <input  type="radio"  value="Individual" name="type" >
                         <label for="Business">Individual</label>
              </div><br></div>
            <div class=" form-group row">
              <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                  <label >Primary Contact</label>
              </div>
              <div class="col-sm-12 col-md-1 col-lg-1">
                  <select id="sa"  name="txtsalu" class="form-control bg-light text-dark  " >
                    
                   
                      <option value="Mr" selected>Mr</option>
                      <option value="Mrs">Mrs</option>
                      <option value="Ms">Ms</option>
                      <option value="Dr">Dr</option>


 
                      
                     </select> 
              </div>
              <div class="col-sm-12 col-md-2 col-lg-3" >
                  <input  type="text" class="form-control bg-light text-dark  " id="fName" name="fName"  placeholder="first name" required >

              </div>
              <div class="col-sm-12 col-md-2 col-lg-2" >
                  <input type="text" class="form-control bg-light text-dark " id="lName"  name="lName" placeholder="last name"  oninput="generateFullName_cust()" required >

              </div>
          </div>
          <div class="form-group row mt-4">
              <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Display Name*</label></div>
               <div class="col-sm-12 col-md-6 col-lg-6">
                  
                  <input type="text" class="form-control bg-light text-dark "  id="txtFullName" name="txtFullName" >

    
                          
                        
               </div>
          
             <div class="form-group row mt-4">
                 <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Company Name</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input type="text" id="ccname" name="cpname" class="form-control bg-light text-dark "required>
   </div></div>

               <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Email</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input type="email" id="myEmail" name="email"  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" 
                      class="form-control bg-light text-dark"  required> 
                      
                   </div> </div>

           
               <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Customer phone</label>
                   <div class="col-sm-12 col-md-3 col-lg-3">
                        <input type="text" name="wphone" class="form-control bg-light text-dark" style="width: 100%;" placeholder="0000-0000000" pattern="[0-9]{4}-[0-9]{7}">
                       
                      
                   </div>
                   <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input type="text" name="mobile" style="width:100%;" placeholder="Mobile" pattern="[0-9]{10}" class="form-control bg-light text-dark" required>
                      <div class="toggle_cust_"
                      style=" color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      Add more details </div>
                  </div>
                  


               </div>
               

               <fieldset_cust_19 class="contact" style="display: none;">


                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Skype name/Number</label></div>
                     
                       <div class="col-sm-12 col-md-6 col-lg-6">
                         <input  type="text" class="form-control bg-light text-dark"  id="cn"  name="skname">      
                       </div>
                       
   
   
                   </div>


                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Designation</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input  type="text" class="form-control bg-light text-dark"  id="cn"   name="desg">      
                       </div>
   
   
                  </div>
                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Department</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input  type="text" class="form-control bg-light text-dark"  id="cn"   name="dept">      
                       </div>
   
   
                   </div>
                   <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input type="text" class="form-control bg-light text-dark" id="cn" name="wbsite" >      
                      </div>
                  </div>

               </fieldset_cust_19>
              



              <br><br><span class="input-group mb-1 mt-3">
                  <div class="toggle_cust_2"
                    style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Other Details </a></div>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                  <div class="toggle_cust_3" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                  
                    <a href="" style="color: rgb(230, 171, 45);">Address </a>
                    <!-- <button class="btn" onclick="fieldset5_function()" style="border: none;background-color: transparent;">Address</button> -->
                  </div>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                  <div class="toggle_cust_4"
                    style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Contact Persons </a></div>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                 

                  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                  <div class="toggle_cust_7"
                    style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Remarks</a></div>

                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </span><br><br><br>

                <fieldset_cust_2 class="other details" style="display: block;">
                    <div class="form-group row mt-2">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> GST Treatment*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="gsttype" id="GSTT" class="form-control bg-light text-dark" onclick="gstPan_function_cust()">
                              <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                              <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                              <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                  Registered Business-Composition Business that is registered under the Composition schemen in GST
                              </option>
                              <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                              <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                              <option value="Special Economic Zone">Special Economic Zone</option>
                          </select><br>
                      </div>
   
   
                  </div>
                  <fieldset_cust_3 id="gst" style="display: none;">
                      <div class="row mt-4">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"  style="color:rgb(214, 75, 75) ;"> GSTIN/UIN*</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <input type="text" class="form-control bg-light text-dark" name="v_gstin" placeholder="29APPCK7465F1Z1" id="gst_input" onmouseout="gst_check_cust()"> 
                              <label id="gst_label"></label>     
      
                          </div></div>

                  </fieldset_cust_3>

                  <fieldset_cust_4 id="pan" style="display: none;">
                      <div class=" row mt-4">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > PAN</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <input type="text" class="form-control bg-light text-dark" id="pan_input_cust" onmouseout="pan_check_cust()" name="pan_number">  
                              <label id="pan_label_cust"></label>     
  
      
                          </div>
       
       
                      </div>

                  </fieldset_cust_4>



                  

              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> Source Of Supply*</label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="posply" id="PLACE" class="form-control bg-light text-dark">
                      <option value="value" selected></option>
                    <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                    <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                    <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                    <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                    <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                    <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                    <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                    <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                    <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                    <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                  <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                   <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                    <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                    <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                    <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                    <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                    <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                        </select>
                  </div>


              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">Tax Preference*</label>
                  
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input type="checkbox" id="Taxable" name="tax1" value="Taxable">&nbsp;
                      <label for="vehicle1" class="pt-1">Taxable</label>
                      &nbsp;&nbsp;&nbsp;
                      <input type="checkbox" id="Tax Exempt" name="tax1" value="Tax Exempt">&nbsp;
                      <label for="vehicle2" class="pt-1"> Tax Exempt</label>
                
                  </div>


              </div>









              

              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> Currency*</label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="crncy"  id="PLACE" class="form-control bg-light text-dark">
                          <option value="Indian Rupee" selected>Indian Rupee</option>
                          <option value="Indian Rupee">Indian Rupee</option>
                
                      </select>
                  </div>


              </div>


              <div class="form-group row mt-4">
                  <label for="opn_bal" class="col-md-3 p-3">Opening Balance</label>
          <div class="col-sm-12 col-md-3 col-lg-3 ">
            <div class="input-group">
              <div class="input-group-append">
                <select class="form-gr form-select text-dark bg-light" id="bal" name="bal" style="background-color: #888; width: 100px;">
                  <option value="credit">Credit</option>
                  <option value="debit">Debit</option>
                 
                </select>
              </div>
              <input type="number" class="form-control text-dark bg-light" id="cn"  name="obal">
            </div>
          </div>
                  
                  

              </div>
              


              <div class="form-group row mt-4">
                  <label class=" col-md-3 col-lg-3 col-form-label" > Payment Terms</label>
                   
                  <div class=" col-md-5 col-lg-3">
                  
                      <select class="form-control bg-light text-dark" id="terms" name="terms" >
                          <option id="crt_term" selected></option>
                          <option value="Net 60">Net 60</option>
                          <option value="Net 45">Net 45</option>
                          <option value="Net 30">Net 30</option>
                          <option value="Due On Receipt">Due On Receipt</option>

                          {% for p in sb %} 

                              <option value="{{ p.term }}"> {{ p.term}}</option>
                          {% endfor %}
                      </select>
                      
                      
  
                  </div>
                 
                      <div class="col-md-4 ">
                          <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal" style="color: white; background-color: rgb(210, 132, 30);" >+</a>
                      </div>
                  


              </div>
              

              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" >Price List </label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="plst" id="PLACE" id="PLACE" class="form-control bg-light text-dark">
                          
      
                          <option type="text">PriceBook0 [ 68% Markup ]</option>
                          <option type="text">PriceBook1 [ 70% Markdown ]</option>

                              {% for cs in hi %}
                      
                            <option type="text" value ='{{ cs.id }}'> {{ cs.name}}</option>
                           
                            {% endfor %}
                           </select>
                     
                  </div>
      
      
              </div>
           
                   

                      <!-- <div class="form-group row mt-4">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Enable Portal? </label>
                              <div class=" col-sm-12 col-md-3 col-lg-3">
                                  <input type="checkbox"  id="vehicle1" name="vehicle1" value="Bike">
                                  <label for="vehicle1">Allow Portal Access For This Customer</label>
 
                          </div></div> -->







                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">
                                  Portal Language</label>
                                  <div class=" col-sm-12 col-md-3 col-lg-3">
                                      <select name="plang" id="PLACE" style="width: 100%;" class="form-control bg-light text-dark"  >
                                          <option selected disabled value="" >Choose..</option>
                                          <option value="ENGLISH">ENGLISH</option>
                                        </select>
                              </div></div>   
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Facebook </label>
                                      <div class=" col-sm-12 col-md-3 col-lg-3">
                                          <input type="text" id="cn" name="fbk" class="form-control bg-light text-dark" >
                                          
                                  </div></div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Twitter</label>
                                      <div class=" col-sm-12 col-md-3 col-lg-3">
                                          <input type="text" id="cn" name="twtr" class="form-control bg-light text-dark" >
                                        
                                  </div></div>
                                  

          </fieldset_cust_2>
<!-- ....................................   Fieldset 5  .................................................... -->

<fieldset_cust_5 class="address" style="display: none;">
  <div>
      <div class="row">
          <div class="col-sm-12 col-md-6 col-lg-6">
              <div class="row">
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <label for="">BILLING ADDRESS</label>
                  </div>
                  <div class="col"></div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark" id="batn"  name="atn" >      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <select name="ctry" id="bcty" class="form-control bg-light text-dark">
                          <option value="India" selected>India</option>
                      </select>      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" id="bads1" name="addrs" ></textarea>
                      <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" id="bads2"
                      name="addrs1"></textarea>
     
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark"  id="bct" name="bct" >      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input type="text" class="form-control bg-light text-dark"  id="bst" name="bst" >      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="number" class="form-control bg-light text-dark" id="bzip" name="bzip">      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Mobile </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567890" pattern="[0-9]{10}" id="bpon" name="bpon" >      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="number" class="form-control bg-light text-dark" placeholder="1234567" id="bfx" name="bfx">      
                  </div>
              </div> 
              

          </div>
          <div class="col-sm-12 col-md-6 col-lg-6">
              <div class="row">
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <label for="">SHIPPING ADDRESS</label>
                  </div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input  type="checkbox" id="myCheckT" onclick="myCopyAddressFunction_cust()">&nbsp;
                      <label for="myCheck">Same as Billing Address:</label>
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark " style="color: white;" id="satn" name="lna">      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <select name="Place" id="scty" class="form-control bg-light text-dark">
                          <option value="India" selected>India</option>
                      </select>      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);"  cols="26" rows="4"  id="sads1" name="lna"></textarea>
                      <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);"  cols="26" rows="4" id="sads2" name="lna"></textarea>
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark" id="sct" name="lna">      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input type="text" class="form-control bg-light text-dark" id="sst" name="lna">      
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="number" class="form-control bg-light text-dark" id="szip" name="lna">      
                  </div>
              </div>
           

              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" >Mobile </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567890" pattern="[0-9]{10}" style="color: white;" id="spn" name="lna">  
                      <label for="" id="sphone_label"></label>    
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                  <div class=" col-sm-12 col-md-6 col-lg-6">
                      <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567" pattern="[0-9]{7}" style="color: white;" id="sfx" name="bfx"> 
                      <label for="" id="sfax_label"></label>     
                  </div>
              </div>

          </div>
      </div>
  </div>
</fieldset_cust_5>


          <fieldset_cust_6 class="contact_person" style="display: none;color: azure ; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;" >
              <div class="row">
                  <div class="col-sm-12 col-md-11 col-lg-11">
                      <div style="overflow-x: scroll;">
                          <table id="tbl" style="border:1px solid;border-color:white;width:75%;">
                              <tr>
                                <th>Salutation</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Email Address</th>
                                <th >Work Phone <br><label for="" id="twph_label"></label></th>
                                <th >Mobile <br><label for="" id="tlabel"></label>    </th>
                                <th >Skype Name/No</th>
                                <th >Designation</th>
                                <th >Department</th>
                              </tr>
                              <tr>
                                <td><select name="sal[]" class="bg-light" style="width:8rem;height: 2.4rem;border: none;color: black;" id="PLACE" style="width:8rem;height: 2.4rem;">
                                    <option value="Mr" selected>Mr.</option>
                                    <option value="Mrs">Mrs.</option>
                                    <option value="Ms">Ms.</option>
                                    <option value="Miss">Miss.</option>
                                    <option value="Dr">Dr.</option>
                                  </select></td>
                                  <td><input type="text" name="ftname[]" ></td>
                                  <td><input type="text" name="ltname[]" ></td>
                                  <td><input type="text" name="mail[]" ></td>
                                  <td><input type="tel" placeholder="1234-1234567" name="bworkpn[]" ></td>
                                  <td><input type="tel" name="bmobile[]" ></td>
                                  <td><input type="number" name="bskype[]" ></td>
                                  <td><input type="text" name="bdesg[]" ></td>
                                  <td><input type="text" name="bdept[]" ></td>
                                </tr>
                            </table>
                           
                      </div>
                      <div class="button add_another_cust mt-3"
                      style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      + Add Contact Person</div>
                        
                  </div>
                  
              </div>

          </fieldset_cust_6>



<!-- ...........................................................Remarks    ......................................... -->



          <fieldset_cust_7 class="remarks" style="display: none;">
              <div class="row">
                  <div class="col-sm-12 col-md-8 col-lg-8">
                      <div class="form-group row mt-4">
                          <div class=" col-sm-12 col-md-6 col-lg-6">
                              <textarea class="bg-light" style="border: none;color: rgb(5, 5, 5);" cols="70" rows="4" name="remark"></textarea>
                          </div>
                      </div>
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-2"></div>
              </div>

          </fieldset_cust_7>



          
          <div class="row mt-4">
              <div class="col-sm-12 col-md-2 col-lg-2"> 
                  <input type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" data-dismiss="modal" id="customerSave" style="font-weight: bold;" value="save">
              </div>
               
              <div class=" col-sm-12 col-md-2 col-lg-2">
                <a role="button" class="form-control  bg-warning text-dark"  data-dismiss="modal" aria-label="Close" style="font-weight: bold;"><center>Cancel</center></a>

              </div> 


          </div>

         


              <br><br><br><br><br><br><br><br><br><br><br><br>

                     

          </form>
              </div>
          </div>
      </div>
  </div>  
</div> 
</div> 
<!-- create vendor----------------------------------------------------------------------------------------------------------------------------------- -->

<div class="modal fade" id="create_vendor">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Vendor</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);height: 500px; overflow-y: scroll;">
        <div class="card p-3 m-3">
          <form  method="post" enctype="multipart/form-data" class="" id="modalVendor">
            {% csrf_token %}
            
            
            <div class=" form-group row">
              <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                  <label >Primary Contact</label>
              </div>
              <div class="col-sm-12 col-md-1 col-lg-1" style="width: 5.5rem;">
                  <select id="select1"  name="salutation" class="form-control bg-light text-dark  " >
                    
                   
                      <option value="Mr">Mr</option>
                      <option value="Mrs">Mrs</option>
                      <option value="Ms">Ms</option>
                      <option value="Dr">Dr</option>


 
                      
                     </select> 
              </div>
              <div class="col-sm-12 col-md-2 col-lg-3" style="width:17rem;">
                  <input  type="text" class="form-control bg-light text-dark  " id="fname" name="first_name" placeholder="first name" required >

              </div>
              <div class="col-sm-12 col-md-2 col-lg-3" style="width:17rem;">
                  <input type="text" class="form-control bg-light text-dark " id="lname" name="last_name" placeholder="last name" required >

              </div>
          </div>

             <div class="form-group row mt-4">
                 <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Company Name</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input  type="text" class="form-control bg-light text-dark " id="vcompany" name="company_name" required>     
                      <div class="invalid-feedback">Please fill out this field.</div>   

                  </div>


              </div>
              <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Display Name</label></div>
                   <div class="col-sm-12 col-md-6 col-lg-6">
                      
                          <select  name="v_display_name" class="form-control bg-light text-dark " onclick="vendor_display()">
                          <option id="select2"></option>
                              
                          </select> 
        
                              
                            
                   </div>
                   <script type="text/javascript">
                      function vendor_display()
                      {
                          var x=document.getElementById("select1").value;
                          var y=document.getElementById("fname").value;
                          var z=document.getElementById("lname").value;

                          document.getElementById("select2").innerHTML=x+" "+y+" "+z
                         
                          
                      }
                   </script>


               </div>

               <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Email</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                       <input  type="email" class="form-control bg-light text-dark" name="vendor_email" id="vemail" required> 
                       <div class="invalid-feedback">Please fill out this field.</div>   
   
                   </div>


               </div>

               <!-- <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Vendor phone</label>
                   <div class="col-sm-12 col-md-3 col-lg-3">
                       <input  type="number" class="form-control bg-light text-dark" name="w_phone" placeholder="work phone" required>
                       <div class="invalid-feedback">Please fill out this field.</div>   
    
                   </div>
                   <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input  type="number" class="form-control bg-light text-dark" name="m_phone" placeholder="mobile number" required>
                      <div class="invalid-feedback">Please fill out this field.</div>   
    
                  </div>
                  <div class="toggle1" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      <a href="">More Details</a>

                   </div>


               </div> -->
               <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Vendor phone</label>
                   <div class="col-sm-12 col-md-3 col-lg-3">
                       <input id="workphone"  type="text" class="form-control bg-light text-dark" pattern="[0-9]{7}"   name="w_phone" placeholder="work phone" required>
                       <label for="" id="workphone_label"></label>
                       <div class="invalid-feedback">Please fill out this field.</div>   
    
                   </div>
                   <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input id="mphone"  type="text" pattern="[0-9]{10}" class="form-control bg-light text-dark" onclick="work_phone()"                        name="m_phone" placeholder="mobile number" required>
                      <label for="" id="mphone_label"></label>
                      <div class="invalid-feedback">Please fill out this field.</div>   
    
                  </div>
                  <div class="toggle1" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      <a href="">More Details</a>

                   </div>


               </div>
               

               <fieldset1 id="more_detail" class="more details" style="display: none;">


                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Skype name/Number</label></div>
                     
                       <div class="col-sm-12 col-md-6 col-lg-6">
                         <input  type="text" class="form-control bg-light text-dark" name="skype_number" id="vskype">      
                       </div>
                       
   
   
                   </div>


                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Designation</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input  type="text" class="form-control bg-light text-dark" name="designation" id="v_desg">      
                       </div>
   
   
                  </div>
                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Department</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input  type="text" class="form-control bg-light text-dark" name="department" id="v_dpt">      
                       </div>
   
   
                   </div>

               </fieldset1>

              <!-- <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                       <input type="text" class="form-control bg-light text-dark" name="website" required>      
                  </div>
              </div> -->
              <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                       <input id="web" type="text" class="form-control bg-light text-dark" onclick="mobile_phone()"  id="web_site"  name="website"  required>      
                  </div>
              </div>



              <br><br><span class="input-group mb-1 mt-3">
                  <div class="toggle2"
                    style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Other Details </a></div>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                  <div class="toggle3" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                  
                    <a href="" style="color: rgb(230, 171, 45);">Address </a>
                    <!-- <button class="btn" onclick="fieldset5_function()" style="border: none;background-color: transparent;">Address</button> -->
                  </div>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                  <div class="toggle4"
                    style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Contact Persons </a></div>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                  <!-- <div class="toggle6"
                    style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    Reporting Tags</div> -->

                  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                  <div class="toggle7"
                    style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    <a href="" style="color: rgb(230, 171, 45);">Remarks</a></div>

                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </span><br><br><br>

                <fieldset2 class="other details">

                  

                    <div class="form-group row mt-2">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > GST Treatment*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="gst" id="VGSTT" class="form-control bg-light text-dark" onclick="gstPan_function()">
                              <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                              <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                              <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                  Registered Business-Composition Business that is registered under the Composition schemen in GST
                              </option>
                              <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                              <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                              <option value="Special Economic Zone">Special Economic Zone</option>
                          </select><br>
                      </div>
   
   
                  </div>
                  <fieldset3 id="gst" class="v_gst" style="display: none;">
                      <div class="row mt-4">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"  > GSTIN/UIN*</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <input type="text" class="form-control bg-light text-dark" name="gst_number" id="gst_input" onmouseout="gst_check()"> 
                              <label id="gst_label"></label>     
      
                          </div>
       
       
                      </div>

                  </fieldset3>

                  <fieldset4 id="pan" class="v_pan" style="display: none;">
                      <div class=" row mt-4">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > PAN</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <input type="text" class="form-control bg-light text-dark" id="pan_input" onmouseout="pan_check()" name="pan_number">  
                              <label id="pan_label"></label>     
  
      
                          </div>
       
       
                      </div>

                  </fieldset4>



                  

              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Source Of Supply*</label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="source_supply" id="v_srcsupply" class="form-control bg-light text-dark">
                      <option value="value" selected></option>
                    <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                    <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                    <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                    <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                    <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                    <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                    <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                    <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                    <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                    <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                  <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                   <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                    <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                    <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                    <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                    <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                    <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                        </select>
                  </div>


              </div>
              



              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Currency*</label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="currency" id="currency" class="form-control bg-light text-dark">
                          <option value="Indian Rupee" selected>Indian Rupee</option>
                          <option value="Indian Rupee">Indian Rupee</option>
                
                      </select>
                  </div>


              </div>

              <div class="form-group row">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Opening Balance Type</label>
                  <div class="col-sm-12 col-md-3 col-lg-3 d-flex align-items-center">
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="op_type" id="debit" value="debit">
                          <label class="form-check-label" for="debit">Debit</label>
                      </div>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="op_type" id="credit" value="credit">
                          <label class="form-check-label" for="credit">Credit</label>
                      </div>
                  </div>
              </div>


              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Opening Balance Amount</label>                    
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input  type="number" class="form-control bg-light text-dark" name="opening_bal" id="v_open">      
                  </div>
              </div>
              
              


              <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Payment Terms</label>
                   
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <select name="payment_terms" id="v_terms" class="form-control bg-light text-dark">
                          <option value="NET 60" >NET 60</option>
                          <option value="NET 45" >NET 45</option>                          
                          <option value="NET 30">NET 30</option>
                          <option value="Due on Receipt" selected>Due on Receipt</option>
                          <option >
                            </option>
                      </select>

                  </div>


              </div>

              

          </fieldset2>
<!-- ....................................   Fieldset 5  .................................................... -->

          <fieldset5 id="address" style="display: none;">
              <div>
                  <div class="row">
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <div class="row">
                              <div class="col-sm-12 col-md-6 col-lg-6">
                                  <label for="">BILLING ADDRESS</label>
                              </div>
                              <div class="col"></div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="text" class="form-control bg-light text-dark" name="battention" id="batten">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <select name="bcountry" id="btry" class="form-control bg-light text-dark">
                                      <option value="India" selected>India</option>
                                  </select>      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <textarea class="form-control bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" name="baddress" id="badd1"></textarea>
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="text" class="form-control bg-light text-dark" name="bcity" id="bcty">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input type="text" class="form-control bg-light text-dark" name="bstate" id="bste">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="bzip" id="bzp">      
                              </div>
                          </div>
                          <!-- <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="bphone" id="bphn">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="bfax" id="bfx">      
                              </div>
                          </div> -->
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input id="bphone_num"  type="tel" pattern="[0-9]{10}" class="form-control bg-light text-dark" name="bphone" >
                                  <label for="" id="bphone_label"></label>      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" onmouseout="fax_number()"  onclick="bphone_number()"                                       name="bfax" id="bfx">  
                                 
                                  <label for="" id="fax_label"></label> 
                              </div>
                          </div>

                      </div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <div class="row">
                              <div class="col-sm-12 col-md-6 col-lg-6">
                                  <label for="">SHIPPING ADDRESS</label>
                              </div>
                              <div class="col-sm-12 col-md-6 col-lg-6">
                                  <input  type="checkbox" id="myCheckT" onclick="myCopyAddressFunction()">&nbsp;
                                  <label for="myCheck">Same as Billing Address:</label>
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="text" class="form-control bg-light text-dark " style="color: white;" name="sattention" id="satten">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <select name="scountry" id="sctry" class="form-control bg-light text-dark">
                                      <option value="India" selected>India</option>
                                  </select>      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <textarea class="form-control bg-light" style="border: none;color: rgb(10, 10, 10);" id="sadd1" cols="26" rows="4" name="saddress"></textarea>
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="text" class="form-control bg-light text-dark" name="scity" id="scty">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input type="text" class="form-control bg-light text-dark" name="sstate" id="sste">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="szip" id="szp">      
                              </div>
                          </div>
                          <!-- <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="sphone" id="sphn">      
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="number" class="form-control bg-light text-dark" name="sfax" id="sfx">      
                              </div>
                          </div> -->

                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{10}" style="color: white;" name="sphone" id="sphone_num">  
                                  <label for="" id="sphone_label"></label>    
                              </div>
                          </div>
                          <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" style="color: white;" name="sfax" onclick="sphone_number()" onmouseout="sfax_number()" id="sfx"> 
                                  <label for="" id="sfax_label"></label>     
                              </div>
                          </div>

                      </div>
                  </div>
              </div>
          </fieldset5>

          <fieldset6 id="contact_person" style="display: none;color: azure ; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;" >
              <div class="row">
                  <div class="col-sm-12 ">
                      
                          <table id="v_tbl" class="table text-white" style="background-color: rgba(250, 227, 198, 0.5);">
                              <tr>
                                <th>Salutation</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Email Address</th>
                                <th >Work Phone <br><label for="" id="twph_label"></label></th>
                                <th >Mobile <br><label for="" id="tlabel"></label>    </th>
                                <th >Skype Name/No</th>
                                <th >Designation</th>
                                <th >Department</th>
                              </tr>
                              <tr>
                                <td><select name="salutation[]" class="bg-transparent border-0 text-white"  id="sal_utation" >
                                  <option class="text-dark"  >Select</option>
                                    <option class="text-dark" value="Mr" >Mr.</option>
                                    <option class="text-dark" value="Mrs">Mrs.</option>
                                    <option class="text-dark" value="Ms">Ms.</option>
                                    <option class="text-dark" value="Miss">Miss.</option>
                                    <option class="text-dark" value="Dr">Dr.</option>
                                  </select></td>
                                <td><input type="text" class=" form-control border-1 bg-transparent text-white"    name="first_name[]"  id="first_name"></td>
                                <td><input type="text"class="form-control border-1 bg-transparent text-white"  name="last_name[]" id="last_name"/></td>
                                <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="email[]" id="e_mail"/></td>
                                <!-- <td><input type="text" style="width:8rem;" name="wphone[]" /></td>
                                <td><input type="text" style="width:8rem;" name="mobile[]" /></td>
                                <td><input type="text" style="width:8rem;" name="skype[]" /></td> -->
                                <td><input type="tel" pattern="[0-9]{7}" class="form-control border-1 bg-transparent text-white"  id="twphone" name="wphone[]"/></td>
                                <td><input type="tel" pattern="[0-9]{10}"  class="form-control border-1 bg-transparent text-white"  id="tmobile" onclick="sample1()"   name="mobile[]" /></td>
                                <td><input type="number" class="form-control border-1 bg-transparent text-white"  onclick="sample()" name="skype[]" id="sky_pe"/></td>
                                <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="designation[]" id="desig_nation" /></td>
                                <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="department[]" id="depart_ment"/></td>
                              </tr>
                            </table>
                           
                      
                      <div class="button add_another mt-3"
                      style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      + Add Contact Person</div>
                        
                  </div>
                  
              </div>

          </fieldset6>



<!-- ...........................................................Remarks    ......................................... -->



          <fieldset7 class="remarks" style="display: none;">
              <div class="row">
                  <div class="col-sm-12 col-md-8 col-lg-8">
                      <div class="form-group row mt-4">
                          <div class=" col-sm-12 col-md-6 col-lg-6">
                              <textarea class="bg-light" style="border: none;color: rgb(5, 5, 5);" cols="70" rows="4" name="remark" id="remark"></textarea>
                          </div>
                      </div>
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-2"></div>
              </div>

          </fieldset7>



          
          <div class="row mt-5">
              <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                  <input type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" data-dismiss="modal" id="vendorSave" style="font-weight: bold;" value="save">
              </div>
               
              <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                  <a role="button" class="form-control  bg-warning text-dark"  data-dismiss="modal" aria-label="Close" style="font-weight: bold;"><center>Cancel</center></a>

              </div> 


          </div>
  
              <br><br><br><br><br><br><br><br><br><br><br><br>
 
            </form>
              </div>
          </div>
      </div>
  </div>  
</div>  

<!-- Create Item  ------------------------------------------------------------------------------------------------------------------------------>
<div class="modal fade" id="create_item" style="overflow: auto;">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content modal-xl  p-5" style="background-color: #000000;height: 700px; overflow-y: scroll;overflow: auto;">
        <div class="modal-header">
          <h3 class="mb-3  text-white  " style="font-size: 2rem;">New item</h3>
          <button type="button" class="close text-light" data-dismiss="modal" aria-label=""
            style="font-size: 20px;;background-color: #000000;border:none;">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form action="" method="post" id="modalItem">
          {% csrf_token %}
          <fieldset class="form-group">
            <div class="row">
              <label class="col-form-label col-sm-2 pt-3">Type <i class="fa fa-question-circle"></i></label>
              <div class="col-sm-10 form-inline">
                <div class="form-check ">
                  <input required class="form-check-input " type="radio" name="type" id="gridRadios1" value="Goods" style="margin-left:5px;">
                  <label class="form-check-label text-white" for="gridRadios1">Goods</label>
                </div>
                <div class="form-check ml-5">
                  <input required class="form-check-input " type="radio" name="type" id="gridRadios2" value="Services" style="margin-left:50px;">
                  <label class="form-check-label text-white" for="gridRadios2">Services</label>
                </div>
                      
              </div>
            </div>
          </fieldset>
          <div class="form-group row">
            <label  class="col-sm-2 col-form-label ">Name *</label>
            <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
              <input required type="text" class="form-control text-black" name="name" id="nameInput">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Unit <i class="fa fa-question-circle"></i></label>
            <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                <div class="d-flex align-items-center">
                    <select name="unit" class="form-control text-black" id="unit" style="width: 100%;">
                        {% for u in unit %}
                        <option value="{{u.id}}">{{u.unit}}</option>
                        {% endfor %}
                    </select>
                    <button style="width: 2.5rem; background-color: chocolate; color: black; border-radius: 3px; margin-left: 10px;" class="open-button" onclick="openForm()">+</button>
                </div>
            </div>
        </div>
        

          <div class="form-group row">
            <label  class="col-sm-2 col-form-label">HSN Code</label> 
            <div class="col-sm-10 col-md-7 col-9"  style="margin-left: -2.2rem;" >
              <input required type="number" class="form-control text-black" name="hsn" id="myInputField" oninput="validateInput()">
              <div id="validationResult"></div>
            </div>
          </div>
          <script>
            function validateSixDigits(field) {
              // Define the regular expression pattern for exactly six digits
              var pattern = /^\d{6}$/;
            
              // Check if the field matches the pattern
              return pattern.test(field);
            }
            
            function validateInput() {
              var inputField = document.getElementById("myInputField");
              var inputValue = inputField.value;
            
              var validationResultDiv = document.getElementById("validationResult");
            
              if (validateSixDigits(inputValue)) {
                validationResultDiv.textContent = "Valid: The field contains exactly six digits.";
              } else {
                validationResultDiv.textContent = "Invalid: The field does not contain exactly six digits.";
              }
            }
          
          </script>
          <div class="form-inline text-white" >
            <label class="text-danger mb-4 mr-4" for="">Tax Preference  :</label>
            <p class="text-white  ">
            <input type="radio"  name="radio" value="taxable" onclick="showAllSelect()" style="margin-left:95px;">  Taxable</p>
            <p><input type="radio" name="radio" value="no-taxable" onclick="hideAllSelect()" style="margin-left:62px;"> None-Taxable </p><br><br>
          </div>

          <div class="row">
            <div class="col-md-3">
          
              <div id="select1_div" style="display: none;">
                <label for="select1">Intra-State TAX</label>
                <select name="intra" class="form-control text-black" id="select1">
                  <option value="GST0[0%]">GST0[0%]</option>
                  <option value="GST3[3%]">GST3[3%]</option>
                  <option value="GST5[5%]">GST5[5%]</option>
                  <option value="GST12[12%]">GST12[12%]</option>
                  <option value="GST18[18%]">GST18[18%]</option>
                  <option value="GST28[28%]">GST28[28%]</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div id="select2_div" style="display: none;">
                <label for="select2">Inter-State TAX</label>
                <select name="inter" class="form-control text-black" id="select2">
                  <option value="IGST0[0%]">IGST0[0%]</option>
                  <option value="IGST5[5%]">IGST3[3%]</option>
                  <option value="IGST5[5%]">IGST5[5%]</option>
                  <option value="IGST12[12%]">IGST12[12%]</option>
                  <option value="IGST18[18%]">IGST18[18%]]</option>
                  <option value="IGST28[28%]">IGST28[28%]</option>
                </select>
              </div>
            </div>
          </div>
    


        <script>
        function showAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "block";
        select2_div.style.display = "block";
        }

        function hideAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "none";
        select2_div.style.display = "none";
        }
        </script>
        <div class="row">
          <div class="col-md-6">
            <input  type="checkbox" name="selling" checked> <label >selling  information</label><br><br>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Selling price *</label>
              <div class="col-sm-12 col-md-7 col-9 ml-5">
                <div class="input-group mb-2">
                  <div class="input-group-prepend">
                    <div class="input-group-text text-white">INR</div>
                  </div>
                  <input required type="text" name="sel_price" class="form-control text-black">
                </div>
              </div>
            </div>
            <div class="form-group row">
              <label  class="col-sm-2 col-form-label">Account *</label>
              <div class="col-sm-10 col-md-7 col-9 ml-5">
                <select name="sel_acc" class="form-control text-dark">
                  
                       
                  
                  {% for account_type in account_type %}
                    <option value="" disabled class="btn btn-dark  highlight-account-type"><b>{{ account_type }}</b></option>
                    {% for account in account %}
                    {% if account.Account_type == account_type %}
                    <option value="{{account.id}}">{{ account.Account_name }}</option>
                    {% endif %}
                    {% endfor %}
                    {% endfor %}

                </select>                              
              </div>
            </div>
            <div class="form-group row">
              <label  class="col-sm-2 col-form-label">Description </label>
              <div class="col-sm-10 col-md-7 col-9 ml-5">
                <input required  type="text" name="sel_desc" class="form-control text-black" >
              </div>
            </div>
                                  
          </div>
          <div class="col-md-6">
            <input type="checkbox" name="purchase" checked> <label for="">Purchase information</label><br><br>
            <div class="form-group row">
              <label  class="col-sm-2 col-form-label">Cost Price *</label>
              <div class="col-sm-10 col-md-7 col-9">
                <div class="input-group mb-2">
                  <div class="input-group-prepend">
                    <div class="input-group-text text-white">INR</div>
                  </div>
                  <input required type="text" class="form-control text-black" name="cost_price" >
                </div>
              </div>
            </div>
            <div class="form-group row in">
              <label class="col-sm-2 col-form-label">Account *</label>
              <div class="col-sm-10 col-md-7 col-5">
                  <div class="d-flex align-items-center">
                      <select name="cost_acc" class="form-control text-black" id="myaccount" >
                          {% for account_type in account_types %}
                          <option value="" disabled class="btn btn-dark text-light highlight-account-type"><b>{{ account_type }}</b></option>
                          {% for account in accounts %}
                          {% if account.Account_type == account_type %}
                          <option value="{{account.id}}">{{ account.Account_name }}</option>
                          {% endif %}
                          {% endfor %}
                          {% endfor %}
                      </select>
                      <button id="showFormButton" style="width: 40px; background-color: chocolate; color: black; border-radius: 3px; margin-left: 10px;" class="openbutton" onclick="showForm()">+</button>
                  </div>
              </div>
          </div>
          
          


            <div class="form-group row">
              <label  class="col-sm-2 col-form-label">Description </label>
              <div class="col-sm-10 col-md-7 col-9">
                <input  type="text" name="cost_desc" class="form-control text-black"  >
              </div>
            </div>
          </div>
          <div class="form-group row mt-1">
            <label  class="col-sm-2 col-form-label">Minimum Stock to maintain </label>
            <div class="col-sm-7 col-md-3 col-9">
              <input  type="text" name="minimum_stock" class="form-control text-black" style="margin-left: -2.4rem;" >
            </div>
          </div>
          <fieldset class="form-group">
            <div class="row">
              <label class="col-form-label col-sm-2 pt-3">Activation tag<i class="fa fa-question-circle"></i></label>
              <div class="col-sm-10 form-inline">
                <div class="form-check ">
                  <input required class="form-check-input" type="radio" name="status" id="gridRadios1" value="Active"  style="margin-left:5px;" >
                  <label class="form-check-label text-white" for="gridRadios1">Activate</label>
                </div>
                <div class="form-check ml-5">
                  <input required class="form-check-input" type="radio" name="status" id="gridRadios2" value="Inactive" style="margin-left:50px;">
                  <label class="form-check-label text-white" for="gridRadios2">Non-Activate</label>
                </div>
                  
              </div>
            </div>
          </fieldset>
            <br><br>
            <div class="row" >
              <div class="col-md-10">
                {% comment %} <label><input type="checkbox" value="trackstate" name="trackstate" onclick="toggleForm()" style="display: none;">
               Track Inventory for this item</label> {% endcomment %}
                {% comment %} <input type="hidden" name="trackState" id="trackState" value="" unchecked> {% endcomment %}
                <label>
                  <input type="checkbox" name="trackstate" value="trackstate" class=" "  onclick="toggleFormFields()">
                  Track Inventory for this item
                </label>
                <div id="formFields" style="display: none;"> 
                  <div class="form-group row" >
                    <label class="col-sm-2 col-form-label">Inventory Account *</label>
                    <div class="col-sm-10 col-md-7 col-9" style="margin-left: -1rem;">
                      <select class="form-select form-select-sm mt-3 text-black" name="invacc">
                        <option>Choose..</option>
                        <option value="inventory assets">Inventory Asset</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group row ">
                    <label class="col-sm-2 col-form-label">Opening Stock</label>
                    <div class=" col-md-5">
                      <input  type="number" class="form-control text-black"  name="openstock" value="0">
                    </div>
                    <div class="col-md-5  ">
                      <div class="row align-items-center">
                        <label class="col-sm-6 col-form-label">Opening Stock Rate per Unit</label>
                        <div class="col-sm-6">
                          <input type="number" class="form-control text-black" name="inventoryaccntperunit"  value="0">
                        </div>

                      </div>
                    </div>
                    <fieldset class="form-group">
                      <div class="row">
                        <label class="col-form-label col-sm-2 pt-2">Activation tag<i class="fa fa-question-circle"></i></label>
                        <div class="col-sm-10 form-inline">
                          <div class="form-check ">
                            <input  class="form-check-input" type="radio" name="satus" id="gridRadios1" value="Active"  style="margin-left:5px;" >
                            <label class="form-check-label" for="gridRadios1">Activate</label>
                          </div>
                          <div class="form-check ml-5">
                            <input  class="form-check-input" type="radio" name="satus" id="gridRadios2" value="Inactive"  style="margin-left:50px;">
                            <label class="form-check-label" for="gridRadios2">Non-Activate</label>
                          </div>
                                      
                        </div>
                      </div>
                    </fieldset>

                  </div>
                </div>
              </div>
            </div>
            <script>
              function toggleFormFields() {
                var formFields = document.getElementById("formFields");
                var checkbox = document.querySelector("input[name=trackstate]");
          
                if (checkbox.checked) {
                  formFields.style.display = "block";
                } else {
                  formFields.style.display = "none";
                }
              }
            </script>
            <br><br> <br>
        <div class="form-inline " style="margin-bottom: 200px;">
          <button type="submit"  class="mr-3 btn" style="background-color: chocolate;" data-dismiss="modal" onclick="create_item()" value="Save">Save</button>
          <button type="button" class="mr-3 btn"  data-dismiss="modal" value="Cancel" style="margin-left:10px;background-color: chocolate;">Cancel</button>
        </div>
      </form>
      </div>
      </div>
    </div>
  </div>

  <div class="form-popup" id="myForm">
    <form onsubmit="event.preventDefault(); addUnit();" class="form-container" id="unitForm">
        {% csrf_token %}
        <span class="close" onclick="closeForm()">&times;</span><br>
        <h1 class="text-dark">Add Unit</h1>
  
        <label class="text-dark" for="unit"><b>Unit</b></label>
        <input type="text" placeholder="Enter unit" id="unitName" name="unit_name" required>
        <p class="text-dark">eg:KL,PCS,BOX,LTR</p>
  
        <button type="submit" class="btn add-button">Add</button>
    </form>
  </div>

  <div class="form-popup1" id="myForm1" >
    <form style="margin-top: 5rem;" onsubmit="event.preventDefault(); addAccount();" class="form-container" id="accountForm">
      {% csrf_token %}
      <span class="close" onclick="closeForm1()">&times;</span><br>
      <h1 class="text-dark" >Add Account</h1><br>
      
      <label class="text-dark"><b>Account type</b></label>
      <select class="form-select" aria-label="Default select example" name="acc_type">
        <option selected></option>
        <option value="EXPENCES">EXPENCES</option>
        <option value="Cost Of Goods Sold">Cost Of Goods Sold</option>
        <option value="Fixed Asset">Fixed Asset</option>
      </select>
      <label class="text-dark"><b>Account Name</b></label>
      
      <input type="text" placeholder="Enter account Name" id="unit" name="acc_name" required>
      <label class="text-dark"><b>Description</b></label>
      <input type="text" placeholder="Description"name="acc_desc">
      <button type="submit" class="btn add-button" >Add</button>
    
    </form>
  </div>

<!-- Add unit --------------------------------------------------------------------------------------------------------------------------------->
<div class="rowmt-5 modal " id="add_unit">
    <div class="modal-dialog modal-md modal-dialog-centered " role="document">
      <div class="modal-content modal-md bg-dark" style="background-color: #191c24;">
        <div class="card bg-dark">
          <div class="card-body bg-dark">
  
            <button type="button" class="close text-light bg-dark" data-dismiss="modal" aria-label=""
              style="background-color: #191c24;border:none; float: right; font-size: 20px;">
              <span aria-hidden="true">&times;</span>
            </button>
            <div class="text-info bg-dark" style="font-size: 20px;font-weight: 600;" id="heads2">Add Unit</div>
            <form style="margin-top: 3rem;" action="" method="post">
              {% csrf_token %}
              <label class="text-light">Unit</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="unit_name" id=""> <br>
  
              <br>
  
              <p class="text-light" disabled>eg:KL,PCS,BOX,LTR</p> <br>
              <div class="row">
                <div class="col-sm-12" style="text-align: center;">
                  <input style="width: 5rem; height: 2rem; color: black;" class="btn btn-success" type="submit"
                    value="submit">
                </div>
              </div>
  
  
            </form>
  
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Add account------------------------------------------------------------------------------------------------------------------------------->

<!-- <div class="modal fade" id="create_account">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Account</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalAccount">
    
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Account Type</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="acct_type" name="acct_type" required> -->
                <!-- <select class="form-control text-dark bg-light" id="acct_type" name="acct_type">
                  <option value="Accounts Payable">Accounts Payable</option>
                  <option value="Accounts Receivable">Accounts Receivable</option>
                  <option value="Other Current Asset">Other Current Asset</option>
                  <option value="Expence">Expence</option>
                  <option value="Cost of Goods Sold">Cost of Goods Sold</option>
                  <option value="Income">Income</option>
                  <option value="Equity">Equity</option>
                  <option value="Other Current Liability">Other Current Liability</option>
                  <option value="Other Expense">Other Expense</option>
                  <option value="Fixed Asset">Fixed Asset</option>
                  <option value="Stock">Stock</option>
                  <option value="Cash">Cash</option>
                  <option value="Other Liability">Other Liability</option>
                  <option value="Long Term Liability">Long Term Liability</option>
                </select>
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cfname">Account name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="acct_name" name="acct_name" required>
              </div>
            </div>            

            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="accountSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div>   --> 
<!-- Add sale---------------------------------------------------------------------------------------------------------------------------------->
<div class="rowmt-5 modal " id="add_sale">
    <div class="modal-dialog modal-md modal-dialog-centered " role="document">
      <div class="modal-content modal-md bg-dark" style="background-color: #191c24;">
        <div class="card bg-dark">
          <div class="card-body bg-dark">
  
            <button type="button" class="close text-light bg-dark" data-dismiss="modal" aria-label=""
              style="background-color: #191c24;border:none; float: right; font-size: 20px;">
              <span aria-hidden="true">&times;</span>
            </button>
            <div class="text-info bg-dark" style="font-size: 20px;font-weight: 600;" id="heads2">Add Sale</div>
            <form style="margin-top: 3rem;" action="" method="post">
              {% csrf_token %}
              <label class="text-light">Accout type</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="acc_type" id=""> <br>
              <label class="text-light">Accout Name</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="acc_name" id=""> <br>
              <label class="text-light">Accout Code</label> <br>
              <input type="text" class="form-control bg-light text-dark" name="acc_code" id=""> <br>
              <label class="text-light">Accout Description</label> <br>
              <input type="text" class="form-control bg-light text-dark" name="acc_desc" id=""> <br> <br>
              <div class="row">
                <div class="col-sm-12" style="text-align: center;">
                  <input style="width: 5rem; height: 2rem; color: black;" class="btn btn-success" type="submit"
                    value="submit">
                </div>
              </div>
  
  
            </form>
  
          </div>
        </div>
      </div>
    </div>
  
  </div>

<!-- Add payment terms------------------------------------------------------------------------------------------------------------------------->

  <div class="modal fade" id="newpayment">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header " style="background: rgb(32, 35, 37);">
            <h3 class="m-3 text-uppercase">Add Payment Term</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card p-3 m-3">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
              <div class="row mt-2">
                <div class="col-md-2 mt-2"></div>
                <div class="col-md-4 mt-2">
                  <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
                </div>

                <div class="col-md-4 mt-2">
                  <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
                </div>
                <div class="col-md-2 mt-2"></div>
              </div>


              <div class="row mt-2">
                <div class="col-md-2 mt-2"></div>

                <div class="col-md-4 mt-2">
                  <input type="text" class="form-control text-dark bg-light" id="term_name" name="term_name" required>      
                </div>

                <div class="col-md-4 mt-2">
                  <input type="text" class="form-control text-dark bg-light" id="term_days" name="term_days" required>
                </div>
                <div class="col-md-2 mt-2"></div>

              </div>
              
              <div class="row mt-5">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                  <div class="d-flex">
                    <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                    type="submit" data-dismiss="modal" id="paySave">Save
                    </button> 
                    

                    <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                      data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Cancel</span>
                    </button>
                  </div>
                </div>
                <div class="col-md-4"></div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>  
  </div>  

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
    crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" integrity="sha512-somehash"
    crossorigin="anonymous"></script>

<!-- Get customer data -->
<script>
    $(document).ready(function () {
        $('#customer_sel').on('change', function () { debugger
            select = $('#customer_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_customer_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) { debugger
                    // console.log(response)
                    email = response.email
                    pos = response.pos
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number

                    $("#cgst_trt_row").removeClass('d-none');
                    $("#cgst_trt_row").addClass('d-flex');
                    $("#pos_row").removeClass('d-none');
                    $("#pos_row").addClass('d-flex');
                    $("#customer_email_row").removeClass('d-none');
                    $("#customer_email_row").addClass('d-flex');
                    $("#cgstin_row").removeClass('d-none');
                    $("#cgstin_row").addClass('d-flex');
                    $("#cust_bill_atten_tion_row").removeClass('d-none');
                    $("#cust_bill_atten_tion_row").addClass('d-flex');
                    $("#cust_bill_country_row").removeClass('d-none');
                    $("#cust_bill_country_row").addClass('d-flex');
                    $("#cust_bill_address_row").removeClass('d-none');
                    $("#cust_bill_address_row").addClass('d-flex');
                    $("#cust_bill_city_row").removeClass('d-none');
                    $("#cust_bill_city_row").addClass('d-flex');
                    $("#cust_bill_state_row").removeClass('d-none');
                    $("#cust_bill_state_row").addClass('d-flex');
                    $("#cust_bill_zipcode_row").removeClass('d-none');
                    $("#cust_bill_zipcode_row").addClass('d-flex');
                    $("#cust_bill_phone_row").removeClass('d-none');
                    $("#cust_bill_phone_row").addClass('d-flex');
                    $("#cust_bill_fax_row").removeClass('d-none');
                    $("#cust_bill_fax_row").addClass('d-flex');
                    
                    document.getElementById('cust_bill_att_en_tion').value = response.cust_Attenti_on
                    document.getElementById('cust_bill_co_untry').value = response.cust_countr_y
                    document.getElementById('cust_bill_ad_dress').value = response.cust_Addres_s1
                    document.getElementById('cust_b_ill_city').value = response.cust_cit_y
                    document.getElementById('cust_bill_sta_te').value = response.cust_stat_e
                    document.getElementById('cust_bill_zipco_de').value = response.cust_zipcod_e
                    document.getElementById('cust_bill_pho_ne').value = response.cust_phon_e1
                    document.getElementById('cust_bill_fa_x').value = response.cust_fax_s

                    document.getElementById('customer_email').value = email
                    document.getElementById('pos').value = pos
                    document.getElementById('c_gsttype').value = gst_treatment
                    document.getElementById('cgstin_inp').value = gst_number
                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)  
              }
              else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              
              else{
                $("#cgstin_row").addClass('d-none');
              }

                // gst or igst in tax

              $("#cust_state").val(response.state);
                if(isGST()) {

                  $('#item_table tbody tr').each(function (index) { debugger
                    var tax = $(this).find('.tax').val();
                    let inx = index+1;
                           $('#tax'+inx+' optgroup[label="GST"]').show();
                           $('#tax'+inx+' optgroup[label="IGST"]').hide(); 
                           $('#tax'+inx+' optgroup[label="GST"] option[value="' + tax + '"]').prop('selected', true);
 
                  })
                       } else {

                        $('#item_table tbody tr').each(function (index) { debugger
                           var tax = $(this).find('.tax').val();
                           let inx = index+1;
                           $('#tax'+inx+' optgroup[label="GST"]').hide();
                           $('#tax'+inx+' optgroup[label="IGST"]').show();
                           $('#tax'+inx+' optgroup[label="IGST"] option[value="' + tax + '"]').prop('selected', true);
                  })
                       }
                    

                }

            });


        });
    });
</script>

<!-- Get vendor data -->
<script>
    $(document).ready(function () {
        $('#vendor_sel').on('change', function () {
            select = $('#vendor_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_vendor_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) {  debugger
                    email = response.email
                    sos = response.sos 
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number
 
                    $("#gst_trt_row").removeClass('d-none');
                    $("#gst_trt_row").addClass('d-flex');
                    $("#gstin_row").removeClass('d-none');
                    $("#gstin_row").addClass('d-flex');
                    $("#sos_row").removeClass('d-none');
                    $("#sos_row").addClass('d-flex');
                    $("#vendor_email_row").removeClass('d-none');
                    $("#vendor_email_row").addClass('d-flex');
                    $("#bill_atten_tion_row").removeClass('d-none');
                    $("#bill_atten_tion_row").addClass('d-flex');
                    $("#bill_country_row").removeClass('d-none');
                    $("#bill_country_row").addClass('d-flex');
                    $("#bill_address_row").removeClass('d-none');
                    $("#bill_address_row").addClass('d-flex');
                    $("#bill_city_row").removeClass('d-none');
                    $("#bill_city_row").addClass('d-flex');
                    $("#bill_state_row").removeClass('d-none');
                    $("#bill_state_row").addClass('d-flex');
                    $("#bill_zipcode_row").removeClass('d-none');
                    $("#bill_zipcode_row").addClass('d-flex');
                    $("#bill_phone_row").removeClass('d-none');
                    $("#bill_phone_row").addClass('d-flex');
                    $("#bill_fax_row").removeClass('d-none');
                    $("#bill_fax_row").addClass('d-flex');

                    document.getElementById('bill_att_en_tion').value = response.att_ent_ion
                    document.getElementById('bill_co_untry').value = response.cou_nt_ry
                    document.getElementById('bill_ad_dress').value = response.a_ddres_s
                    document.getElementById('b_ill_city').value = response.c_it_y
                    document.getElementById('bill_sta_te').value = response.s_ta_te
                    document.getElementById('bill_zipco_de').value = response.z_i_p
                    document.getElementById('bill_pho_ne').value = response.ph_o_ne
                    document.getElementById('bill_fa_x').value = response.f_ax_bill_s
                    

                    document.getElementById('vendor_email').value = email
                    document.getElementById('sos').value = sos
                    document.getElementById('gstin_inp').value = gst_number
                    document.getElementById('v_gsttype').value = gst_treatment

                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                      $("#gstin_row").removeClass('d-none');
                      $("#gstin_row").addClass('d-flex');
                      $('#gstin_inp').val(' '+ response.gst_number)
                    }
                    else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                      $("#gstin_row").removeClass('d-none');
                      $("#gstin_row").addClass('d-flex');
                      $('#gstin_inp').val(' '+ response.gst_number)  
                    }
                    else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                      $("#gstin_row").removeClass('d-none');
                      $("#gstin_row").addClass('d-flex');
                      $('#gstin_inp').val(' '+ response.gst_number)
                    }
              
                    if(response.gst_number != null && response.gst_number != ""){
                      $("#gstin_row").removeClass('d-none');
                      $("#gstin_row").addClass('d-flex');
                    }
                    else{
                
                      $("#gstin_row").removeClass('d-flex');
                      $("#gstin_row").addClass('d-none');

                    }


                }

            });


        });
    });
</script>

<!-- Add row, copy row, delete row -->
<script>

    // set todays date on estimate date field
    var today = new Date().toISOString().substr(0, 10);
    document.getElementById("bill_date").value = today;

    // Get the bill date and due date elements
    var billDateInput = document.getElementById("bill_date");
    var dueDateInput = document.getElementById("due_date");

     
    // Add an event listener to the payment terms select element
    var paymentTermsSelect = document.getElementById("p_terms");
    paymentTermsSelect.addEventListener("change", function () {
        var selectedOption = paymentTermsSelect.options[paymentTermsSelect.selectedIndex];
        var paymentTermsValue = selectedOption.value;

        var billDate = new Date(billDateInput.value);
        var dueDate = new Date(billDate.getTime() + (paymentTermsValue * 24 * 60 * 60 * 1000));
        dueDateInput.value = dueDate.toISOString().split("T")[0];
    });



    // Add new row
    $(document).ready(function () {
        $('#add-row').click(function () {
            var table = document.getElementById("item_table");
            var RowCount = table.rows.length;
            // console.log(RowCount);
            var newRow = $(`
            <tr id='row${RowCount}' >
                <td class='text-right'>
                    <div class='form-group'>
                        <select
                            class='form-control bg-transparent text-black border-0 item_select itemlist' name='item[]'
                            id='item${RowCount}'>
                            <option class='text-dark'>Select Items</option>
                            <option class='text-dark' id='items_nms1' ></option>
                            {% for i in items %}
                            <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                            {% endfor %}
                        </select></div>
                </td>
                <td class='text-right' style="width: 80px">
                  <input type='text' id='HSN${RowCount}'
                   class='bg-transparent border-0 text-black text-right HSN' name='HSN[]' value='0' min="0" style="width: 52px;" >
                </td>
                
                <td class='text-right'><input type='number' id='qty${RowCount}' style="width: 50px;"
                        class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value='0' >
                </td>
                <td class='text-right'><input type='number' id='rate${RowCount}' style="width: 80px;"
                        class='bg-transparent border-0 text-black text-right rate' name='rate[]' value='0.00'
                        ></td>
               
                <td class='text-right'> <select name='tax[]' id='tax${RowCount}'
                        class="form-control bg-transparent text-black text-right border-0 tax"
                        onclick='handleTaxChange(${RowCount})'>
                        <optgroup label="GST" >
                                <option value=0>0% GST</option>
                                <option value=3>3% GST</option>
                                <option value=5>5% GST</option>
                                <option value=12>12% GST</option>
                                <option value=18>18% GST</option>
                                <option value=28>28% GST</option>
                            </optgroup>
                            <optgroup label="IGST" >
                                <option value=0>0% IGST</option>
                                <option value=3>3% IGST</option>
                                <option value=5>5% IGST</option>
                                <option value=12>12% IGST</option>
                                <option value=18>18% IGST</option>
                                <option value=28>28% IGST</option>
                            </optgroup>
                       
                    </select></td>
                <td style="display: none;">
                    <input type="text" name='taxamount[]' id="taxamount${RowCount}" class="form-control taxamount" />
                            </td>
                            <td class='text-right'><input type='number' id='discount${RowCount}'
                        class='bg-transparent border-0 text-black text-right discount' name='discount[]' value='0.00' style="width: 50px;"></td>
                <td class='text-right'><input type='number' id='amount${RowCount}'
                        class='bg-transparent border-0 text-black text-right amount' name='amount[]' value='0.00' style="width: 50px;"></td>
                <td class='text-center'><button type='button' id='copy_btn${RowCount}'
                        class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                        data-placement='top' title='Clone' style='width:20px'><i
                            class="fas fa-copy"></i></button>
                </td>
                <td class='text-center'><button type='button' id='del_btn${RowCount}'
                        class='btn btn-transparent text-danger btn-sm  delete-row'
                        style='width:20px'><i class='fa fa-times'></i></button></td>
            </tr>`);
            $('#item_table').append(newRow);
            debugger
            reloadItem(); 
            var tax = 0;
            if(isGST()){ 
             $(`#tax${RowCount} optgroup[label="GST"]`).show();
             $(`#tax${RowCount} optgroup[label="IGST"]`).hide();  
             $('#tax'+RowCount+' optgroup[label="GST"] option[value="' + tax + '"]').prop('selected', true);
             } 
             else {
             $(`#tax${RowCount} optgroup[label="GST"]`).hide();
             $(`#tax${RowCount} optgroup[label="IGST"]`).show(); 
             $('#tax'+RowCount+' optgroup[label="IGST"] option[value="' + tax + '"]').prop('selected', true);
            } 
        });

        //Duplicate row function
        $('#item_table').on('click', '.copy_row', function () {
            // console.log('hi');
            var table = document.getElementById("item_table");
            var RowCount = table.rows.length;
            // console.log(RowCount);
debugger
            // Get the values from the current row
            var currentItem = $(this).closest('tr').find("select[name='item[]']").val();
            var currentHSN = $(this).closest('tr').find("input[name='HSN[]']").val();
            
            var currentQuantity = $(this).closest('tr').find("input[name='quantity[]']").val();
            var currentRate = $(this).closest('tr').find("input[name='rate[]']").val();
            var currentTax = $(this).closest('tr').find("select[name='tax[]']").val();
            var currentTaxText = $(this).closest('tr').find("select[name='tax[]'] option:selected").text();
            var currentTaxAmount = $(this).closest('tr').find("input[name='taxamount[]']").val();
            var currentDiscount = $(this).closest('tr').find("input[name='discount[]']").val();
            var currentAmount = $(this).closest('tr').find("input[name='amount[]']").val();
            // console.log(currentItem);
            
            // console.log(currentQuantity);
            // console.log(currentRate);
            // console.log(currentTax);
            // console.log(currentTaxAmount);
            // console.log(currentAmount);

            var newRow = $(`
            <tr id='row${RowCount}' >
                <td class='text-right'>
                    <div class='form-group'>
                        <select
                            class='form-control bg-transparent text-black border-0 item_select itemlist' name='item[]'
                            id='item${RowCount}'>
                            <option class='text-dark ' value='${currentItem}'>${currentItem}</option>
                            {% for i in items %}
                            <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                            {% endfor %}
                        </select></div>
                </td>
                <td class='text-right' style="width: 80px;">
                  
                  <input type='text' id='HSN${RowCount}' value="${currentHSN}"
                        class='bg-transparent border-0 text-black text-right HSN' name='HSN[]'  value='0' min="0" style="width: 52px;">
                </td>
               
                <td class='text-right'><input type='number' id='qty${RowCount}' value="${currentQuantity}" style="width: 50px;"
                        class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value='0' >
                </td>
                <td class='text-right'><input type='number' id='rate${RowCount}' value="${currentRate}"  style="width: 80px;"
                        class='bg-transparent border-0 text-black text-right rate' name='rate[]' value='0.00'
                        ></td>
               
                <td class='text-right'> <select name='tax[]' id='tax${RowCount}'
                        class="form-control bg-transparent text-black text-right border-0 tax"
                        onclick='handleTaxChange(${RowCount})'>
                        <optgroup label="GST" >
                                <option value=0>0% GST</option>
                                <option value=3>3% GST</option>
                                <option value=5>5% GST</option>
                                <option value=12>12% GST</option>
                                <option value=18>18% GST</option>
                                <option value=28>28% GST</option>
                            </optgroup>
                            <optgroup label="IGST" >
                                <option value=0>0% IGST</option>
                                <option value=3>3% IGST</option>
                                <option value=5>5% IGST</option>
                                <option value=12>12% IGST</option>
                                <option value=18>18% IGST</option>
                                <option value=28>28% IGST</option>
                            </optgroup>
                       
                    </select></td>
                <td style="display: none;">
                    <input type="text" name='taxamount[]' id="taxamount${RowCount}" class="form-control taxamount" value="${currentTaxAmount}"/>
                            </td>

                            <td class='text-right'><input type='number' id='discount${RowCount}' value="${currentDiscount}"
                        class='bg-transparent border-0 text-black text-right discount' name='discount[]' value='0.00' style="width: 50px;"></td>
                <td class='text-right'><input type='number' id='amount${RowCount}' value="${currentAmount}"
                        class='bg-transparent border-0 text-black text-right amount' name='amount[]' value='0.00' style="width: 50px;"></td>
                <td class='text-center'><button type='button' id='copy_btn${RowCount}'
                        class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                        data-placement='top' title='Clone' style='width:30px'><i
                            class="fas fa-copy"></i></button>
                </td>
                <td class='text-center'><button type='button' id='del_btn${RowCount}'
                        class='btn btn-transparent text-danger btn-sm  delete-row'
                        style='width:30px'><i class='fa fa-times'></i></button></td>
            </tr>`);

            $('#item_table').append(newRow);
            calc_total();
            reloadItem();

            var tax = $('#tax'+RowCount).val();
            if(isGST()){ 
             $(`#tax${RowCount} optgroup[label="GST"]`).show();
             $(`#tax${RowCount} optgroup[label="IGST"]`).hide();  
             $('#tax'+RowCount+' optgroup[label="GST"] option[value="' + currentTax + '"]').prop('selected', true);
             } 
             else {
             $(`#tax${RowCount} optgroup[label="GST"]`).hide();
             $(`#tax${RowCount} optgroup[label="IGST"]`).show(); 
             $('#tax'+RowCount+' optgroup[label="IGST"] option[value="' + currentTax + '"]').prop('selected', true);
            } 
        });

        // Delete row
        $('#item_table').on('click', '.delete-row', function () {
            $(this).closest('tr').remove();
            calc();
        });

    });

</script>

<!-- Update tax header according to check box selection -->
<script>
    function updateTaxHeader() {
        var checkbox = document.getElementById("checkbox");
        var taxHeader = document.getElementById("tax_head");

        if (checkbox.checked) {
            taxHeader.innerText = "Tax (Reverse Charge)";
        } else {
            taxHeader.innerText = "Tax";
        }
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- set display name -->
<script>
  $(document).ready(function() {
    $("#fname, #lname").change(function() {
      $("#vdisplayname").text($("#title").val() +" " + $("#fname").val() + " " + $("#lname").val());
    });
  });
  $(document).ready(function() {
    $("#cfname, #clname").change(function() {
      $("#cdisplayname").text($("#ctitle").val() +" " + $("#cfname").val() + " " + $("#clname").val());
    });
  });
</script>

<!-- create vendor -->
<script>
$(document).on("click", "#vendorSave", function() {
  
  var formData = $("#modalVendor").serialize(); // Serialize the form data

  formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token
debugger
  $.ajax({
    type: 'POST',
    url: "{% url 'add_vendor_bills' %}",
    data: formData,
    success: function(response) {
      document.getElementById("modalVendor").reset();
      reloadVendor();
    },
    error: function(xhr, status, error) {
      console.error(error);
      // Handle error here
    }
  });
});

</script>

<script>
  
  $(document).ready(function() {
    $("#c_gsttype2").change(function() {
      var x=$('#c_gsttype2').val();
      if(x=="Unregistered Business") 
      {
        $(".c_gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".c_gstrow").addClass('d-none');
      }
      else 
      {
        $(".c_gstrow").removeClass('d-none');
        $(".c_gstrow").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#v_gstin").change(function() {

        var x=$("v_gstin").val();
        var gst_label=document.getElementById("gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";
            gst_label.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#v_pan2").change(function() {
        var x= $("#v_pan2").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });
</script>

<!-- create customer -->
<script>

$(document).on("click","#customerSave",function(){

  var formData = $("#modalCustomer").serialize(); // Serialize the form data

  formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token
$.ajax({
  
  type : 'POST',
  url:"{% url 'entr_custmr_for_bills' %}",
  data: formData,
  success: function(response) {
    document.getElementById("modalCustomer").reset();
        reloadCustomer();
  },
  error: function(xhr, status, error) {
    console.error(error); 
  } 
});        
});

function reloadCustomer() {

$.ajax({ 
  url: "{% url 'pur_rec_customer_dropdown' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) { debugger
    var dropdown = $('#customer_sel');
    dropdown.empty();
    dropdown.append($('<option></option>').data('data-pos', '').text('Select Customer')); // Add default option

    $.each(data, function(index, cust) {
      dropdown.append($('<option></option>').attr('value', cust.customerName).data('data-pos', cust.placeofsupply).text(cust.customerName));
    });

  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});
}

function reloadVendor() {
  debugger
$.ajax({
  url: "{% url 'vendor_dropdown' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) {debugger
    var dropdown = $('#vendor_sel');
    dropdown.empty();
    dropdown.append($('<option></option>').text('Select Vendor'));
    $.each(data, function(key, value) {
      debugger
      dropdown.append($('<option></option>').attr('value', key).text(value[1] + ' ' + value[2]).val(value[1] + ' ' + value[2]));
    });
  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});
}




</script>

<!-- create account -->

<script>
  newAcc = "";
  $(document).on("click","#accountSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'create_account_bills' %}",

    data:{
        type : $("#acct_type").val(),
        name : $("#acct_name").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
          acc_name = response.name
          console.log(acc_name)
          newAcc = acc_name
          document.getElementById("crt_acc").innerHTML = acc_name
          document.getElementById("crt_acc1").innerHTML = acc_name
          document.getElementById("modalCustomer").reset();
      },
  });        
});
</script>

<!-- address same -->
<script>
  function addressSame(){
    var chkbtn1 = document.getElementById('vokay');
    var chkbtn2 = document.getElementById('csokay');
    if (chkbtn1.checked == true) {
      document.getElementById('vsstreet').value = document.getElementById('vstreet').value;
      document.getElementById('vscity').value = document.getElementById('vcity').value;
      document.getElementById('vspincode').value = document.getElementById('vpincode').value;
      document.getElementById('vscountry').value = document.getElementById('vcountry').value;
      document.getElementById('vsstate').value = document.getElementById('vstate').value;
      document.getElementById('vsphone').value = document.getElementById('vphone').value;
      document.getElementById('vsfax').value = document.getElementById('vfax').value;
    } 
    else {
      document.getElementById('vsstreet').value = '';
      document.getElementById('vscity').value = '';
      document.getElementById('vsstate').value = '';
      document.getElementById('vspincode').value = '';
      document.getElementById('vscountry').value = '';
      document.getElementById('vsphone').value = '';
      document.getElementById('vsfax').value = '';
    }
    if (chkbtn2.checked == true) {
      document.getElementById('csstreet1').value = document.getElementById('cstreet1').value;
      document.getElementById('csstreet2').value = document.getElementById('cstreet2').value;
      document.getElementById('cscity').value = document.getElementById('ccity').value;
      document.getElementById('cspincode').value = document.getElementById('cpincode').value;
      document.getElementById('cscountry').value = document.getElementById('ccountry').value;
      document.getElementById('csstate').value = document.getElementById('cstate').value;
      document.getElementById('csphone').value = document.getElementById('cphone').value;
      document.getElementById('csfax').value = document.getElementById('cfax').value;
    } 
    else {
      document.getElementById('csstreet').value = '';
      document.getElementById('cscity').value = '';
      document.getElementById('csstate').value = '';
      document.getElementById('cspincode').value = '';
      document.getElementById('cscountry').value = '';
      document.getElementById('csphone').value = '';
      document.getElementById('csfax').value = '';
    }
  }

</script>

<!-- create payment terms -->
<!-- <script>
  $(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'create_payment_terms_bills' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
          term_name = response.t_name
          document.getElementById("crt_term").innerHTML = term_name
          document.getElementById("modalCustomer").reset();
      },
  });        
});
</script> -->

<script>
     

    // function vendor_display()
    // {
    //     console.log('fullname');
    //     var x=document.getElementById("select1").value;
    //     var y=document.getElementById("ffname").value;
    //     var z=document.getElementById("llname").value;
    //     console.log(x);
    //     console.log(y);
    //     console.log(z);
    //     document.getElementById("select2").innerHTML=x+" "+y+" "+z
        
        
    // }
</script>

<script>
    // function gstPan_function(){
    //     var x=document.getElementById('GSTT').value
    //     if(x=="Unregistered Business-not Registered under GST")
    //     {
    //         document.getElementById("pan").style.display="block";
    //         document.getElementById("gst").style.display="none";

            
    //     }
    //     else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
    //     {
    //         document.getElementById("gst").style.display="block";
    //         document.getElementById("pan").style.display="block";


    //     }
    
    // }
    // function gst_check(){
    //     var x=document.getElementById("gst_input").value;
    //     var gst_label=document.getElementById("gst_label")
    //     // var expr=/^[0-9]{15}$/;
    //     var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

    //     // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
    //     // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
    //     if (!expr.test(x)) {
    //         gst_label.style.color="red";
    //         gst_label.innerHTML = "Invalid GST Number.";
    //     }
    //     else{
    //         gst_label.style.color="green";

    //         gst_label.innerHTML = "valid GST Number.";

    //     }
    // }
    // function pan_check(){
    //     var x=document.getElementById("pan_input").value;
    //     var gst_label=document.getElementById("pan_label")
    //     var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
    //     if (!expr.test(x)) {
    //         pan_label.style.color="red";
    //         pan_label.innerHTML = "Invalid PAN Number.";
    //     }
    //     else{
    //         pan_label.style.color="green";

    //         pan_label.innerHTML = "valid PAN Number.";

    //     }
    // }
 

    // $(document).ready(function () {
    //     $(".toggle1").click(function (e) {
    //       e.preventDefault();
    //       $("fieldset1").toggle();
    //     })
    //   })
    // $(document).ready(function () {
    //     $(".toggle2").click(function (e) {
    //       e.preventDefault();
         
    //       $("fieldset2").toggle(); 
    //       $("fieldset5").hide();
    //       $("fieldset6").hide();
    //       $("fieldset7").hide();


      
    //     })
    //   })

      // $(document).ready(function () {
      //   $(".toggle3").click(function (e) {
      //     e.preventDefault();
      //     $("fieldset5").toggle();
      //     $("fieldset2").hide();
      //     $("fieldset6").hide();
      //     $("fieldset7").hide();

      //   })
      // })
      // $(document).ready(function () {
      //   $(".toggle4").click(function (e) {
      //     e.preventDefault();
      //     $("fieldset6").toggle();
      //     $("fieldset2").hide();
      //     $("fieldset5").hide();
      //     $("fieldset7").hide();
                
      //   })
      // })
      // $(document).ready(function () {
      //   $(".toggle7").click(function (e) {
      //     e.preventDefault();
      //     $("fieldset7").toggle();
      //     $("fieldset2").hide();
      //     $("fieldset6").hide();
      //     $("fieldset5").hide();
         

         
      //   })
      // })

      // $('document').ready(function () {
      //   $('.add_another').click(function () {
      //     $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" style="width:8rem;height: 2.4rem;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="email" name="email[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" id="twphone" name="wphone[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" id="tmobile" onclick="sample1()" name="mobile[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" onclick="sample()" name="skype[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="department[]" style="width:8rem;" class="txtbox" value="" /></td></tr>');
      //   });
      // })

      function fieldset5_function()
      {
        document.getElementById("address").style.display="block";
      }

      function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batten");
        var txtcry = document.getElementById("bctry");
        var txtadrs11 = document.getElementById("badd1");
        var txtcty = document.getElementById("bcty");
        var txtstat = document.getElementById("bste");
        var txtzip = document.getElementById("bzp");
        var txtphone = document.getElementById("bphone_num");
        var txtfx = document.getElementById("bfx");
  
        var textatn1 = document.getElementById("satten");
        var txtcry1 = document.getElementById("sctry");
        var txtadrs21 = document.getElementById("sadd1");
        var txtcty1 = document.getElementById("scty");
        var txtstat1 = document.getElementById("sste");
        var txtzip1 = document.getElementById("szp");
        var txtphone1 = document.getElementById("sphone_num");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
          textatn1.value = textatn.value;
          txtadrs21.value = txtadrs11.value;
          txtcty1.value = txtcty.value;
          txtstat1.value = txtstat.value;
          txtzip1.value = txtzip.value; 
          txtphone1.value = txtphone.value;
          txtfx1.value = txtfx.value;
          



          
  
        } else {
          txtadrs21.value = "";
          txtcty1.value = "";
          txtstat1.value = "";
          txtzip1.value = "";
          txtphone1.value = "";
          txtfx1.value = "";
          txtcry1.value = "";
          textatn1.value = "";

  
        }
      }

      function open_table()
      {
        document.getElementById("hid").style.display="block";
        
      }

    //   function work_phone()
    //   {
    //     var x=document.getElementById("workphone").value;
    //     var y=document.getElementById("workphone_label")
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(x)) {
    //         y.style.color="red";
    //         y.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         y.style.color="green";

    //         y.innerHTML = "valid Phone Number.";

    //     }


    //   }

    //   function mobile_phone()
    //   {
        
    //     var a=document.getElementById("mphone").value;
    //     var b=document.getElementById("mphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a)) {
    //         b.style.color="red";
    //         b.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b.style.color="green";

    //         b.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function bphone_number()
    //   {
    //     var a1=document.getElementById("bphone_num").value;
    //     var b1=document.getElementById("bphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function sphone_number()
    //   {
    //     var a1=document.getElementById("sphone_num").value;
    //     var b1=document.getElementById("sphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function fax_number()
    //   {
    //     var a1=document.getElementById("bfx").value;
    //     var b1=document.getElementById("fax_label");
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function sfax_number()
    //   {
    //     var a1=document.getElementById("sfx").value;
    //     var b1=document.getElementById("sfax_label");
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    
      function sample()
      {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("tlabel");

        b1.innerHTML = "";

        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";

        }

       

      }

      function sample1()
      {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("twph_label");

        b1.innerHTML = "";

        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";

        }

       

      }

      

     
</script>

<!-- create item -->


<script>
  function create_item() {
  var formData = $("#modalItem").serialize(); // Serialize the form data
   formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token

    $.ajax({

      type: "POST",
      url: "{% url 'additem_bills' %}",

      data: formData,  

      success: function (response) {
        document.getElementById("modalItem").reset();
         reloadItem(); 
      },
      error: function(xhr, status, error) {
        console.error(error);
        // Handle error here
      }

    });


  }

  
function reloadItem() { 
$.ajax({
  url: "{% url 'item_dropdown' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) {

    $('.itemlist').each(function(index, options) { 
         debugger
          var $select = $(this); 
          let items = $.map(options, e => $(e).val()) 

          $.each(data, function(key, value) {
            debugger
            if(items.indexOf(value[0])==-1){
              $select.append($('<option></option>').attr('value', key).text(value[0]).val(value[0])); 
            } 
          });

      }); 

  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});
}
</script>

<script>
    function generateFullName() {
        document.getElementById('txtFullName').value =
            document.getElementById('sa').value +
            document.getElementById('fName').value + ' ' +
            document.getElementById('lName').value;

    }
    function myFunction() {
        var x = document.getElementById("myEmail").pattern;
        document.getElementById("demo").innerHTML = x;
    }
    function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batn");
        var txtcry = document.getElementById("bcty");
        var txtadrs11 = document.getElementById("bads1");
        var txtadrs12 = document.getElementById("bads2");
        var txtcty = document.getElementById("bct");
        var txtstat = document.getElementById("bst");
        var txtzip = document.getElementById("bzip");
        var txtphone = document.getElementById("bpon");
        var txtfx = document.getElementById("bfx");

        var textatn1 = document.getElementById("satn");
        var txtcry1 = document.getElementById("scty");
        var txtadrs21 = document.getElementById("sads1");
        var txtadrs22 = document.getElementById("sads2");
        var txtcty1 = document.getElementById("sct");
        var txtstat1 = document.getElementById("sst");
        var txtzip1 = document.getElementById("szip");
        var txtphone1 = document.getElementById("spn");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
            textatn1.value = textatn.value;
            txtcry1.value = txtcry.value;
            txtadrs21.value = txtadrs11.value;
            txtadrs22.value = txtadrs12.value;
            txtcty1.value = txtcty.value;
            txtstat1.value = txtstat.value;
            txtzip1.value = txtzip.value;
            txtphone1.value = txtphone.value;
            txtphone1.value = txtfx.value;

        } else {
            textatn1.value = "";
            txtcry1.value = "";
            txtadrs21.value = "";
            txtadrs22.value = "";
            txtcty1.value = "";
            txtstat1.value = "";
            txtzip1.value = "";
            txtphone1.value = "";
            txtphone1.value = "";

        }
    }
    $(document).ready(function () {
        $(".toggle").click(function (e) {
            e.preventDefault();
            $("fieldset1").toggle();
        })
    })
    // $(document).ready(function () {
    //     $(".toggle2").click(function (e) {
    //         e.preventDefault();
    //         $("fieldset2").toggle();
    //     })
    // })
    // $(document).ready(function () {
    //     $(".toggle3").click(function (e) {
    //         e.preventDefault();
    //         $("fieldset3").toggle();
    //     })
    // })
    // $(document).ready(function () {
    //     $(".toggle4").click(function (e) {
    //         e.preventDefault();
    //         $("fieldset5").toggle();
    //     })
    // })
    $(document).ready(function () {
        $(".toggle6").click(function (e) {
            e.preventDefault();
            $("fieldset6").toggle();
        })
    })
    // $(document).ready(function () {
    //     $(".toggle7").click(function (e) {
    //         e.preventDefault();
    //         $("fieldset7").toggle();
    //     })
    // })
    $(document).ready(function () {
        $(".toggle9").click(function (e) {
            e.preventDefault();
            $("fieldset9").toggle();
        })
    })
    // $('document').ready(function () {
    //     $('.add_another').click(function () {
    //         $("#tbl").append('<tr><td><select name="Place" id="PLACE"><option value="Mr." selected>Mr.</option><option value="Mrs.">Mrs.</option><option value="Ms.">Ms.</option><option value="mercedes">Miss.</option><option value="audi">Dr.</option></select>  </td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td></tr>');
    //     });
    // })

    let popu = document.getElementById("popup-1");

    function openpop() {
        popu.classList.add("open-popup-1");
    }
    function closepop() {
        popu.classList.remove("open-popup-1");
    }
</script>

<script>
    $(document).ready(function () {


        var roinc = 0
        //console.log("ajax");
        // var place = document.getElementById('pos').value;

        $(document).on('click', '#item1', function () {
            select = $('#item1').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) { debugger
                    //console.log(response) 
                    rate = response.rate

                    document.getElementById('rate1').value = rate
                    document.getElementById('HSN1').value = response.hsn 
                    itemchangewithtax(1);
                     
                }
            });

        });
        // //console.log('pos:'+place_of_supply);
        $(document).on('click', '#item2', function () {
            select = $('#item2').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate2').value = rate;
                    // document.getElementById('crt_acc2').value = newAcc
                    document.getElementById('HSN2').value = response.hsn
                    itemchangewithtax(2);
                }
            });

        });

        $(document).on('click', '#item3', function () {
            select = $('#item3').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate3').value = rate;
                    // document.getElementById('crt_acc3').value = newAcc
                    document.getElementById('HSN3').value = response.hsn
                    itemchangewithtax(3);
                }
            });

        });

        $(document).on('click', '#item4', function () {
            select = $('#item4').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate4').value = rate;
                    document.getElementById('HSN4').value = response.hsn
                    itemchangewithtax(4);
                }
            });

        });

        $(document).on('click', '#item5', function () {
            select = $('#item5').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate5').value = rate;
                    document.getElementById('HSN5').value = response.hsn

                    itemchangewithtax(5);
                }
            });

        });

        $(document).on('click', '#item6', function () {
            select = $('#item6').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate6').value = rate;
                    document.getElementById('HSN6').value = response.hsn

                    itemchangewithtax(6);
                }
            });

        });

        $(document).on('click', '#item7', function () {
            select = $('#item7').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate7').value = rate;
                    document.getElementById('HSN7').value = response.hsn

                    itemchangewithtax(7);
                }
            });

        });

        $(document).on('click', '#item8', function () {
            select = $('#item8').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate8').value = rate;
                    document.getElementById('HSN8').value = response.hsn

                    itemchangewithtax(8);
                }
            });

        });

        $(document).on('click', '#item9', function () {
            select = $('#item9').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate9').value = rate;
                    document.getElementById('HSN9').value = response.hsn

                    itemchangewithtax(9);
                }
            });

        });

        $(document).on('click', '#item10', function () {
            select = $('#item10').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate10').value = rate;
                    document.getElementById('HSN10').value = response.hsn

                    itemchangewithtax(10);



                }
            });

        });

        $(document).on('click', '#item11', function () {
            select = $('#item11').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate11').value = rate;
                    document.getElementById('HSN11').value = response.hsn

                    itemchangewithtax(11);



                }
            });

        });

        $(document).on('click', '#item12', function () {
            select = $('#item12').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate12').value = rate;
                    document.getElementById('HSN12').value = response.hsn

                    itemchangewithtax(12);



                }
            });

        });

        $(document).on('click', '#item13', function () {
            select = $('#item13').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate13').value = rate;
                    document.getElementById('HSN13').value = response.hsn

                    itemchangewithtax(13);



                }
            });

        });

        $(document).on('click', '#item14', function () {
            select = $('#item14').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate14').value = rate;
                    document.getElementById('HSN14').value = response.hsn

                    itemchangewithtax(14);



                }
            });

        });

        $(document).on('click', '#item15', function () {
            select = $('#item15').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate15').value = rate;
                    document.getElementById('HSN15').value = response.hsn

                    itemchangewithtax(15);



                }
            });

        });

        $(document).on('click', '#item16', function () {
            select = $('#item16').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate16').value = rate;
                    document.getElementById('HSN16').value = response.hsn

                    itemchangewithtax(16);



                }
            });

        });

        $(document).on('click', '#item17', function () {
            select = $('#item17').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate17').value = rate;
                    document.getElementById('HSN17').value = response.hsn

                    itemchangewithtax(17);



                }
            });

        });

        $(document).on('click', '#item18', function () {
            select = $('#item18').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate18').value = rate;
                    document.getElementById('HSN18').value = response.hsn

                    itemchangewithtax(18);



                }
            });

        });

        $(document).on('click', '#item19', function () {
            select = $('#item19').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate19').value = rate;
                    document.getElementById('HSN19').value = response.hsn

                    itemchangewithtax(19);



                }
            });

        });

        $(document).on('click', '#item20', function () {
            select = $('#item20').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate20').value = rate;
                    document.getElementById('HSN20').value = response.hsn

                    itemchangewithtax(20);



                }
            });

        });

        $(document).on('click', '#item21', function () {
            select = $('#item21').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate21').value = rate;
                    document.getElementById('HSN21').value = response.hsn

                    itemchangewithtax(21);



                }
            });

        });


    });
</script>

<script>
  function handleTaxChange(selectId) { debugger
         if(isGST()){ 
             $(`#tax${selectId} optgroup[label="GST"]`).show();
             $(`#tax${selectId} optgroup[label="IGST"]`).hide(); 
         } else {
             $(`#tax${selectId} optgroup[label="GST"]`).hide();
             $(`#tax${selectId} optgroup[label="IGST"]`).show();     
         }    
     }
 
 </script>

<!-- //-------- add repeat modal----------- -->
<script>
$(document).on("click","#RepeatSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'add_repeat' %}",


    data:{
      repeats : $("#repeats_input").val(),
       
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalRepeat").reset();
        reloadRepeat();
      },
  });        
});

$(document).ready(function(){
  reloadRepeat()
});

function reloadRepeat() {

$.ajax({
  url: "{% url 'repeat_dropdown' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) {
    var dropdown = $('#repeats');
    dropdown.empty();
    dropdown.append(`
               <option selected value="Week">Week</option>
               
               <option value="Month">Month</option>
               
               <option value="Year">Year</option>`); 
    $.each(data, function(key, value) { 
        dropdown.append('<option value="'+value[0]+'">'+value[0]+'</option>'); 
    });
  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});
}
</script>

<!-- --------payment terms modal---------- -->
<script>
$(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_pay' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalPayment").reset();
        reloadPayment();
      },
  });        
});

function reloadPayment() {

  $.ajax({
    url: "{% url 'pay_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#p_terms');
      dropdown.empty();
      dropdown.append(`<option value="30">NET 30</option></option>
                          
                          
                          <option value="60">NET 60</option>
                          
                         
                          <option value="recpt">Due on receipt</option>`);
      var drpv = $('#v_terms');
      drpv.empty();
      drpv.append(`<option value="30">NET 30</option>
                        
                        
                        <option value="60">NET 60</option>
                       
                        
                        <option value="recpt">Due on receipt</option>`);
      $.each(data, function(key, value) { 
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
          drpv.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


function toggleDateInput() {
    var checkbox = document.getElementById("never-expire-checkbox");
    var billDateInput = document.getElementById("bill_date");
    var dueDateInput = document.getElementById("due_date");

    if (checkbox.checked) {
        billDateInput.disabled = true; // Disable bill_date input
        $('#due_date').val($('#bill_date').val()); // Set due_date value to bill_date value
        $("#p_terms").val("recpt");
    } else {
        billDateInput.disabled = true; // Disable bill_date input
    }
}

$(document).ready(function() {
    $('#p_terms').change(function() {
        var va = $(this).val();
        var checkbox = $('#never-expire-checkbox');

        if (va == 'recpt') {
            checkbox.prop('checked', true); // Check the checkbox
            $('#due_date').val($('#bill_date').val()); // Set due_date value to bill_date value
            $('#due_date').prop('disabled', true); // Disable due_date input
        } else {
            checkbox.prop('checked', false); // Uncheck the checkbox
            $('#due_date').prop('disabled', true); // Disable due_date input
        }
    });

    toggleDateInput(); // Call toggleDateInput after the page loads to prevent dateInput from being enabled on page load
});

// Disable due_date input on page load
$('#due_date').prop('disabled', true);

</script>
<script>

  function cancelDialog() {

      var frm = document.getElementById("forms");
      let customMsg = "Do you want to cancel?";

      if (confirm(customMsg)) {
          alert("Recurring Bill cancelled!")
      }
  }

  function saveAsDraftDialog() { 
    document.getElementById("bill_date").disabled = false; 
    document.getElementById("due_date").disabled = false; 
    let grand_total = $('#total').val();
    let paid = $('#amtPaid').val(); 
    if(parseFloat(paid) > parseFloat(grand_total)){
       alert("Paid amount should not be greater than grand total.")
    }
    else{
      
      var bill_no = "{{bill_no}}"
      if(bill_no != "None"){
        var predict_bill_no = bill_no.replace(bill_no.match(/(\d+)/g)[0], '')+(parseFloat(bill_no.match(/\d+/)[0])+1)
        let bills = $("#bill_number").val();

        if(predict_bill_no != bills ){
              alert("Bill No: is not continuous.")
        }
      } 
      var frm = document.getElementById("forms");
      frm.action = ("{% url 'create_purchase_bill' %}")
    }
  }

  function saveAndOpenDialog() {
    document.getElementById("bill_date").disabled = false; 
    document.getElementById("due_date").disabled = false; 

    let grand_total = $('#total').val();
    let paid = $('#amtPaid').val(); 
    if(parseFloat(paid) > parseFloat(grand_total)){
       alert("Paid amount should not be greater than grand total.")
    }
    else{
      debugger
      var bill_no = "{{bill_no}}"
      if(bill_no != "None"){
        var predict_bill_no = bill_no.replace(bill_no.match(/(\d+)/g)[0], '')+(parseFloat(bill_no.match(/\d+/)[0])+1)
        let bills = $("#bill_number").val();

        if(predict_bill_no != bills ){
              alert("Bill No: is not continuous.")
        }
      } 
      var frm = document.getElementById("forms");
      frm.action = ("{% url 'create_purchase_bill1' %}")
    }
      
  }
</script>

<script>
  //  $(document).ready(function() {
  //   $("#v_gsttype").change(function() { debugger
  //     var x=$('#v_gsttype').val();
  //     if(x=="unregistered Business") 
  //     {
  //       $(".gstin_row").addClass('d-none');

  //     }
  //     else if(x == 'Overseas'){
  //       $(".gstin_row").addClass('d-none');
  //     }
  //     else 
  //     {
  //       $(".gstin_row").removeClass('d-none');
  //       $(".gstin_row").addClass('d-flex');
  //     }
    
  //   });
  // });
  $(document).ready(function() {
  $('#v_gsttype2').on('change', function(){ debugger 
        var selectedValue = $(this).val(); 
        var x=$(this).val();
        if(x=="unregistered Business") 
        {
          $(".gstrow").addClass('d-none');

        }
        else if(x == 'Overseas'){
          $(".gstrow").addClass('d-none');
        }
        else 
        {
          $(".gstrow").removeClass('d-none');
          $(".gstrow").addClass('d-flex');
      }
    });

  });

  $(document).ready(function() {
      $("#c_pan2").change(function() {
        var x= $("#c_pan2").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });
</script>
<script>
  function isGST()
  { 
     var gst_state =["[KL] Kerala","[KL]-Kerala","kerala","Kerala","Kerala [KL]","Kerala-[KL]"];  
     let customer_st  =$("#pos").val();
     if(gst_state.indexOf(customer_st)>-1)
      {     
        document.getElementById("tr_cgst").style.display = "table-row";
        document.getElementById("tr_sgst").style.display = "table-row";
        document.getElementById('tr_igst').style.display = "none";
        return true;
      }
      else{
        document.getElementById('tr_igst').style.display = "table-row";
        document.getElementById("tr_cgst").style.display = "none";
        document.getElementById("tr_sgst").style.display = "none";
        return false;
      }
  }
</script>

<script>
  function itemchangewithtax(index){
                     var tax = $('#tax'+index).val();
                      if(isGST()) {
                           $('#tax'+index+' optgroup[label="GST"]').show();
                           $('#tax'+index+' optgroup[label="IGST"]').hide();
                           $('#tax'+index+' optgroup[label="GST"] option[value="' + tax + '"]').prop('selected', true); 
                       } else {
                           $('#tax'+index+' optgroup[label="GST"]').hide();
                           $('#tax'+index+' optgroup[label="IGST"]').show(); 
                           $('#tax'+index+' optgroup[label="IGST"] option[value="' + tax + '"]').prop('selected', true);                       
                       } 
  }
</script>
 
<script>
  function validateForm() {
      var paymentTerms = document.getElementById("p_terms").value;
      if (paymentTerms === "") {
          document.getElementById("p_terms").classList.add("is-invalid");
          document.getElementById("p_terms").classList.remove("is-valid");
          return false;
      } else {
          document.getElementById("p_terms").classList.remove("is-invalid");
          document.getElementById("p_terms").classList.add("is-valid");
          return true;
      }
  }

  // Validate the form on submit
  document.getElementById("forms").addEventListener("submit", function (event) {
      if (!validateForm()) {
          event.preventDefault();
      }
  });
</script>

<!-- NEW VENDOR MODAL -->
<script>
  function gstPan_function(){ debugger
      var x=document.getElementById('VGSTT').value
      if(x=="Unregistered Business-not Registered under GST")
      {
        document.getElementsByClassName("v_pan")[0].style.display="block"; 
        document.getElementsByClassName("v_gst")[0].style.display="none"; 
      }
      else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
      {
        document.getElementsByClassName("v_gst")[0].style.display="block";
        document.getElementsByClassName("v_pan")[0].style.display="block"; 
      }
  
  }
  function gst_check(){
      var x=document.getElementById("gst_input").value;
      var gst_label=document.getElementById("gst_label")
      // var expr=/^[0-9]{15}$/;
      var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

      // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
      // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
      if (!expr.test(x)) {
          gst_label.style.color="red";
          gst_label.innerHTML = "Invalid GST Number.";
      }
      else{
          gst_label.style.color="green";

          gst_label.innerHTML = "valid GST Number.";

      }
  }
  function pan_check(){
      var x=document.getElementById("pan_input").value;
      var gst_label=document.getElementById("pan_label")
      var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
      if (!expr.test(x)) {
          pan_label.style.color="red";
          pan_label.innerHTML = "Invalid PAN Number.";
      }
      else{
          pan_label.style.color="green";

          pan_label.innerHTML = "valid PAN Number.";

      }
  }



  $(document).ready(function () {
      $(".toggle1").click(function (e) {
        e.preventDefault();
        $("fieldset1").toggle();
      })
    })
    $(document).ready(function () {
      $(".toggle2").click(function (e) {
        e.preventDefault();
       
        $("fieldset2").toggle(); 
        $("fieldset5").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();


    
      })
    })

    $(document).ready(function () {
      $(".toggle3").click(function (e) {
        e.preventDefault();
        $("fieldset5").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();

      })
    })
    $(document).ready(function () {
      $(".toggle4").click(function (e) {
        e.preventDefault();
        $("fieldset6").toggle();
        $("fieldset2").hide();
        $("fieldset5").hide();
        $("fieldset7").hide();
              
      })
    })
    $(document).ready(function () {
      $(".toggle7").click(function (e) {
        e.preventDefault();
        $("fieldset7").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset5").hide();
       

       
      })
    })





 

  //   $('document').ready(function () {
  //     $('.add_another').click(function () {
  //       $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" style="width:8rem;height: 2.4rem;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="email[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="wphone[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="mobile[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="skype[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="department[]" style="width:8rem;" class="txtbox" value="" /></td></tr>');
  //     });
  //   })

  $('document').ready(function () {
      $('.add_another').click(function () { debugger
        $("#v_tbl").append('<tr><td><select name="salutation[]" id="PLACE" class="bg-light" style="width:8rem;height:2.4rem;border: none;color: black;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="email" name="email[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{7}" id="twphone" name="wphone[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{10}" id="tmobile" onclick="sample1()" name="mobile[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="number" onclick="sample()" name="skype[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="department[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td></tr>');
      });
    })

    function fieldset5_function()
    {
      document.getElementById("address").style.display="block";
    }

  

  function myCopyAddressFunction() {
      var checkBox = document.getElementById("myCheckT");
      var textatn = document.getElementById("batten");
      var txtcry = document.getElementById("bctry");
      var txtadrs11 = document.getElementById("badd1");
      var txtcty = document.getElementById("bcty");
      var txtstat = document.getElementById("bste");
      var txtzip = document.getElementById("bzp");
      var txtphone = document.getElementById("bphone_num");
      var txtfx = document.getElementById("bfx");

      var textatn1 = document.getElementById("satten");
      var txtcry1 = document.getElementById("sctry");
      var txtadrs21 = document.getElementById("sadd1");
      var txtcty1 = document.getElementById("scty");
      var txtstat1 = document.getElementById("sste");
      var txtzip1 = document.getElementById("szp");
      var txtphone1 = document.getElementById("sphone_num");
      var txtfx1 = document.getElementById("sfx");
      if (checkBox.checked == true) {
        textatn1.value = textatn.value;
        txtadrs21.value = txtadrs11.value;
        txtcty1.value = txtcty.value;
        txtstat1.value = txtstat.value;
        txtzip1.value = txtzip.value; 
        txtphone1.value = txtphone.value;
        txtfx1.value = txtfx.value;
        



        

      } else {
        txtadrs21.value = "";
        txtcty1.value = "";
        txtstat1.value = "";
        txtzip1.value = "";
        txtphone1.value = "";
        txtfx1.value = "";
        txtcry1.value = "";
        textatn1.value = "";


      }
    }


    function open_table()
    {
      document.getElementById("hid").style.display="block";
      
    }



    function work_phone()
    {
      var x=document.getElementById("workphone").value;
      var y=document.getElementById("workphone_label")
      var expr=/^[0-9]{7}$/;
      if (!expr.test(x)) {
          y.style.color="red";
          y.innerHTML = "Invalid Phone Number.";
      }
      else{
          y.style.color="green";

          y.innerHTML = "valid Phone Number.";

      }


    }

    function mobile_phone()
    {
      
      var a=document.getElementById("mphone").value;
      var b=document.getElementById("mphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a)) {
          b.style.color="red";
          b.innerHTML = "Invalid Phone Number.";
      }
      else{
          b.style.color="green";

          b.innerHTML = "valid Phone Number.";

      }
    }

    function bphone_number()
    {
      var a1=document.getElementById("bphone_num").value;
      var b1=document.getElementById("bphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function sphone_number()
    {
      var a1=document.getElementById("sphone_num").value;
      var b1=document.getElementById("sphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function fax_number()
    {
      var a1=document.getElementById("bfx").value;
      var b1=document.getElementById("fax_label");
      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function sfax_number()
    {
      var a1=document.getElementById("sfx").value;
      var b1=document.getElementById("sfax_label");
      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

  
    function sample()
    {

      var tbldata = document.getElementById("tbl");
      var total_rows = tbldata.rows.length;
      x=document.getElementById("tbl");
      var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;

      var b1=document.getElementById("tlabel");

      b1.innerHTML = "";

      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid";
      }
      else{
          b1.style.color="green";
          b1.innerHTML = "valid";

      }

     

    }

    function sample1()
    {

      var tbldata = document.getElementById("v_tbl");
      var total_rows = tbldata.rows.length;
      x=document.getElementById("v_tbl");
      var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;

      var b1=document.getElementById("twph_label");

      b1.innerHTML = "";

      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid";
      }
      else{
          b1.style.color="green";
          b1.innerHTML = "valid";

      }

     

    }


    

   
</script>

<!-- END NEW VENDOR MODAL -->

<!--- Customer Modal -->
 

<script>
   function generateFullName_cust()
{
 document.getElementById('txtFullName').value = 
 document.getElementById('sa').value + ' '+
 document.getElementById('fName').value + ' ' + 
 document.getElementById('lName').value;

}
  function gstPan_function_cust(){
      var x=document.getElementById('GSTT').value
      if(x=="Unregistered Business-not Registered under GST")
      {
          document.getElementById("pan").style.display="block";
          document.getElementById("gst").style.display="none";

          
      }
      else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
      {
          document.getElementById("gst").style.display="block";
          document.getElementById("pan").style.display="block";


      }
  
  }
  function gst_check_cust(){
      var x=document.getElementById("gst_input").value;
      var gst_label=document.getElementById("gst_label")
      // var expr=/^[0-9]{15}$/;
      var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

      // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
      // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
      if (!expr.test(x)) {
          gst_label.style.color="red";
          gst_label.innerHTML = "Invalid GST Number.";
      }
      else{
          gst_label.style.color="green";

          gst_label.innerHTML = "valid GST Number.";

      }
  }
  function pan_check_cust(){
      var x=document.getElementById("pan_input_cust").value;
      var gst_label=document.getElementById("pan_label_cust")
      var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
      if (!expr.test(x)) {
          pan_label.style.color="red";
          pan_label.innerHTML = "Invalid PAN Number.";
      }
      else{
          pan_label.style.color="green";

          pan_label.innerHTML = "valid PAN Number.";

      }
  }
 
  $(document).ready(function () {
      $(".toggle_cust_").click(function (e) {
        e.preventDefault();
        $("fieldset_cust_19").toggle();
      })
    })
    $(document).ready(function () {
      $(".toggle_cust_2").click(function (e) {
        e.preventDefault();
       
        $("fieldset_cust_2").toggle(); 
        $("fieldset_cust_5").hide();
        $("fieldset_cust_6").hide();
        $("fieldset_cust_7").hide();


    
      })
    })

    $(document).ready(function () {
      $(".toggle_cust_3").click(function (e) {
        e.preventDefault();
        $("fieldset_cust_5").toggle();
        $("fieldset_cust_2").hide();
        $("fieldset_cust_6").hide();
        $("fieldset_cust_7").hide();

      })
    })
    $(document).ready(function () {
      $(".toggle_cust_4").click(function (e) {
        e.preventDefault();
        $("fieldset_cust_6").toggle();
        $("fieldset_cust_2").hide();
        $("fieldset_cust_5").hide();
        $("fieldset_cust_7").hide();
              
      })
    })
    $(document).ready(function () {
      $(".toggle_cust_7").click(function (e) {
        e.preventDefault();
        $("fieldset_cust_7").toggle();
        $("fieldset_cust_2").hide();
        $("fieldset_cust_6").hide();
        $("fieldset_cust_5").hide();
       

       
      })
    })

 
  $('document').ready(function () {
      $('.add_another_cust').click(function () {
        $("#tbl").append('<tr><td><select name="sal[]" id="PLACE" class="bg-light" style="width:8rem;height:2.4rem;border: none;color: black;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="ftname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="ltname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="email" name="mail[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{7} name="bworkpn[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{10}"  name="bmobile[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="number"  name="bskype[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdesg[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdept[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td></tr>');
      });
    })

     
    function myCopyAddressFunction_cust() {
      var checkBox = document.getElementById("myCheckT");
      var textatn = document.getElementById("batn");
      var txtcry = document.getElementById("bcty");
      var txtadrs11 = document.getElementById("bads1");
      var txtadrs12 = document.getElementById("bads2");
      var txtcty = document.getElementById("bct");
      var txtstat = document.getElementById("bst");
      var txtzip = document.getElementById("bzip");
      var txtphone = document.getElementById("bpon");
      var txtfx = document.getElementById("bfx");

      var textatn1 = document.getElementById("satn");
      var txtcry1 = document.getElementById("scty");
      var txtadrs21 = document.getElementById("sads1");
      var txtadrs22 = document.getElementById("sads2");
      var txtcty1 = document.getElementById("sct");
      var txtstat1 = document.getElementById("sst");
      var txtzip1 = document.getElementById("szip");
      var txtphone1 = document.getElementById("spn");
      var txtfx1 = document.getElementById("sfx");
      if (checkBox.checked == true) {
      textatn1.value = textatn.value;
      txtcry1.value = txtcry.value;
      txtadrs21.value = txtadrs11.value;
      txtadrs22.value = txtadrs12.value;
      txtcty1.value = txtcty.value;
      txtstat1.value = txtstat.value;
      txtzip1.value = txtzip.value;
      txtphone1.value = txtphone.value;
      txtfx1.value = txtfx.value;

      } else {
      textatn1.value = "";
      txtcry1.value = "";
      txtadrs21.value = "";
      txtadrs22.value = "";
      txtcty1.value = "";
      txtstat1.value = "";
      txtzip1.value = "";
      txtphone1.value = "";
      txtfx1.value = "";

      }
      }
  
 
 


    
//--------payment terms modal-----------

$(document).on("click","#paySave",function(){
$.ajax({
  
  type : 'POST',
  url:"{% url 'payment_termA' %}",

  data:{
    term : $("#term").val(),
       day : $("#day").val(),
      
      csrfmiddlewaretoken: '{{ csrf_token }}'
      
    },
  
    success: function(response) {
      document.getElementById("modalPayment").reset();
      
    },
});        
});


   
</script>


<!-- END of customer modal -->

<!-- Add item-->
<script>
  function resetForm() {
    document.getElementById("Form").reset();
  }
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function addUnit() {
    // Get the form and form data
    let unitForm = document.getElementById("unitForm");
    let formData = new FormData(unitForm);

    // Send the form data through AJAX
    $.ajax({
        url: "{% url 'add_unit' %}",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function (response) {
            const unitName = response.unit_name;
            const unitId = response.unit_id; // Assume the server returns the unit ID

            // Handle the success response
            console.log(response);

            // Get the dropdown element
            const dropdown = document.getElementById("unit");

            // Create and add the new unit option
            const newUnitOption = document.createElement("option");
            newUnitOption.value = unitId;
            newUnitOption.text = unitName;

            // Add the new unit option to the dropdown
            dropdown.add(newUnitOption);

            // Select the newly added unit option to display it as the current selection
            newUnitOption.selected = true;

            // Close the form and perform any other actions
            closeForm();
        },
        error: function (error) {
            // Handle the error response
            console.log(error);
        }
    });
}

function openForm() {
    let formContainer = document.getElementById("myForm");
    formContainer.style.display = "block";
}

function closeForm() {
    let formContainer = document.getElementById("myForm");
    formContainer.style.display = "none";
}
</script>
<script>
  function addAccount() {
    // Get the form and form data
    let accountForm = document.getElementById("accountForm");
    let formData = new FormData(accountForm);
  
    // Send the form data through AJAX
    $.ajax({
      url: "{% url 'add_account' %}",
      type: "POST",
      data: formData,
      processData: false,
      contentType: false,
      success: function (response) {
        const accountType = response.Account_type;
        const accountName = response.Account_name;
        const accountId = response.account_id; // Assume the server returns the account ID
  
        // Handle the success response
        console.log(response);
  
        // Get the dropdown element
        const dropdown = document.getElementById("myaccount");
  
        // Create and add the new account option
        const newAccountOption = document.createElement("option");
        newAccountOption.value = accountId;
        newAccountOption.text = accountName;
  
        // Find the correct position to insert the new account option
        let foundAccountType = false;
        for (let i = 0; i < dropdown.options.length; i++) {
          const option = dropdown.options[i];
          if (option.disabled && option.innerText === accountType)   {
            foundAccountType = true;
            // Move to the next option to find the correct position within the account type
            continue;
          }
          if (foundAccountType) {
            if (!option.disabled) {
              // Insert the new account option before the first non-disabled option within the account type
              dropdown.add(newAccountOption, i);
              break;
            }
          }
        }
  
        // If the account type option doesn't exist, create and add it along with the new account option
        if (!foundAccountType) {
          const accountTypeOption = document.createElement("option");
          accountTypeOption.text = accountType;
          accountTypeOption.disabled = true;
          accountTypeOption.className = "btn btn-dark text-light highlight-account-type";
          dropdown.add(accountTypeOption);
          dropdown.add(newAccountOption);
        }
  
        // Select the newly added account option to display it as the current selection
        newAccountOption.selected = true;
  
        // Close the form and perform any other actions
        closeForm1();
      },
      error: function (error) {
        // Handle the error response
        console.log(error);
      }
    });
  }
  const dropdown = document.getElementById("myaccount");
  dropdown.addEventListener("change", function () {
  // Get the selected option from the dropdown
  const selectedOption = dropdown.selectedOptions[0];
  // Get the account ID from the selected option's value attribute
  const selectedAccountId = selectedOption.value;

  // Now you can use selectedAccountId for further processing or display
  console.log("Selected Account ID:", selectedAccountId);
});
  
function showForm() {
  let formContainer = document.getElementById("myForm1");
  formContainer.style.display = "block";
}

function closeForm1() {
  let formContainer = document.getElementById("myForm1");
  formContainer.style.display = "none";
}

</script>
<!--END Add item-->

{% endblock %}