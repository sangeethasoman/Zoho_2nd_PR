{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load tz %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>

    /* input[type=text], select, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    } */
    
    /* label {
      padding: 12px 12px 12px 0;
      display: inline-block;
    } */
    
    
    .row:after {
      content: "";
      display: table;
      clear: both;
    }
    
    @media screen and (max-width: 600px) {
      .col-25, .col-75, input[type=submit] {
        width: 100%;
        margin-top: 0;
      }
      input[type=text], select, textarea {
      width: 100%;

    }
    }

    .dropdown input,
    .dropdown button {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
    }

    .dropdown.open input,
    .dropdown.open button {
      display: block;
    }

    /* .row a{
      color: rgb(218, 164, 48);
      font-size: 12px;
    } */

    .table th a{
      color:rgb(218, 164, 48);
      font-size: 11px;
      margin-left: 100px;
    }


    ::-webkit-scrollbar {
      width: 5px; 
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }

    ::-webkit-scrollbar-thumb {
      background: #888; 
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555; 
    }

    .modal{
      z-index: 9999;
      overflow: scroll;
    }
    .item{
      height: auto;
    }
    </style>
<!-- New item -->
<style>
  .open-button {
    background-color: #ccc;
    color: black;
    padding: 5px 5px;
    border: none;
    cursor: pointer;
    opacity: 0.8;
    position: relative;
  }

  /* The popup form - hidden by default */
  .form-popup {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background-color: #f1f1f1;
    border: 3px solid black;
    z-index: 9999;
    padding: 20px;
    max-width: 300px;
  }

  /* Full-width input fields */
  .form-popup input[type="text"] {
    width: 100%;
    padding: 10px;
    margin: 5px 0 20px 0;
    border: none;
    background: #f1f1f1;
  }

  /* Set a style for the submit button */
  .form-popup .btn {
    background-color: #04aa6d;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
  }

  /* Set a style for the close button */
  .form-popup .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
  }

  /* Change the color of the close button on hover */
  .form-popup .close:hover {
    color: black;
  }

  .openbutton {
    background-color: #ccc;
    color: black;
    padding: 5px 5px;
    border: none;
    cursor: pointer;
    opacity: 0.8;
    position: relative;
    width: 180px;
    z-index:9;
  }

  /* The popup form - hidden by default */
  .form-popup1 {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background-color: #f1f1f1;
    border: 3px solid black;
    z-index: 9999;
    padding: 20px;
    max-width: 300px;
  }

  /* Full-width input fields */
  .form-popup1 input[type="text"] {
    width: 100%;
    padding: 10px;
    margin: 5px 0 20px 0;
    border: none;
    background: #f1f1f1;
  }

  /* Set a style for the submit button */
  .form-popup1 .btn.add-button {
    background-color: #04aa6d;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
  }

  /* Set a style for the close button */
  .form-popup1 .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    line-height: 20px;
    cursor: pointer;
    transition: 0.3s;
  }

  .form-popup1 .close:hover {
    color: black;
  }

  /* Style for the highlighted account type options */
  option.highlight-account-type {
    background-color: #f3f3f3; /* Example background color */
    color: #666; /* Example text color */
    font-weight: bold; /* Example font weight */
    /* Add any other styles you want to customize the look of the highlighted account type options */
  }
  
  /* Additional style for hovering over the highlighted account type options (optional) */
  option.highlight-account-type:hover {
    background-color: #f5f5f5; /* Example hover background color */
    /* Add any other styles you want for the hover state */
  }
  .highlight-account-type {
    text-align: left;
    padding-left: 10px;
  }
 

</style>

<div class="container-fulid containerprof">  
  <div class="card radius-15 p-3">
    <div class="card-body">
        <div class="card-title">
          <h2 class="mb-0 text-uppercase text-right"><i class="fa fa-receipt"></i> &nbsp; New Recurring Bills</h2>
        </div>
    </div>
  </div>

  <div class="card radius-15 p-5">
    <form action="" class="mt-2 mb-4" method="post" enctype="multipart/form-data" id="forms">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-3">
            <label style="color: rgb(190, 88, 88);">Vendor Name *</label>
        </div>
        <div class="col-md-6 d-flex">
            <select name="vendor" id="vendor" class="form-control text-dark bg-light" style="flex: 1;">
                <option value="" class="text-dark bg-light"></option>
                {% for v in vendor %}
                <option value="{{v.id}} {{ v.first_name }} {{ v.last_name }}" class="text-dark bg-light">{{ v.first_name }} {{ v.last_name }}</option>
                {% endfor %}
                
            </select>
            
        </div>
        <div class="col-md-3">
          <a data-toggle="modal" data-target="#newvendor">
            <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); height: 36px; "
                data-toggle="tooltip" title="Create Vendor"></i>
        </a>
      </div>
    </div>
    

      <div class="row mt-2 d-none" id="email_row">
        <div class="col-md-3">
          <label for="email_inp">Vendor Email</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="email_inp" name="email_inp">
        </div>
      </div>

      <div class="row mt-2 d-none" id="gst_trt_row">
        <div class="col-md-3">
          <label for="gst_trt_inp">GST Treatment</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="gst_trt_inp" name="gst_trt_inp">
        </div>
      </div>

      <div class="row mt-2 mb-2 d-none" id="gstin_row">
        <div class="col-md-3">
          <label for="gstin_inp">GST Number</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="gstin_inp" name="gstin_inp">
        </div>
      </div>

      <div class="row mt-2 mb-2 d-none"  id="vsrcofsupply_row">
        <div class="col-md-3">
          <label for="vsrcofsupply">Source of Supply*</label>
        </div>

        <div class="col-md-6">
          <!-- <input type="text" class="form-control text-dark bg-light"  id="vsrcofsupply" name="vsrcofsupply"  > -->
          
          <div class="">
            <select name="vsrcofsupply" id="vsrcofsupply" class="form-control bg-light text-dark">
            <option value="value" selected></option>
          <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
          <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
          <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
          <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
          <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
          <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
          <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
          <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
          <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
          <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
         <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
          <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
          <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
          <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
          <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
          <option value="[OT]-Other Territory">[OT]-Other Territory</option>
              </select>
        </div>  
        </div>
      </div> 
      <div class="row mt-2 d-none" id="bill_atten_tion_row">
        <div class="col-md-3">
          <label for="bill_atten_tion">Attention</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="bill_att_en_tion" name="bill_att_en_tion">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_country_row">
        <div class="col-md-3">
          <label for="bill_country">Country</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="bill_co_untry" name="bill_co_untry">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_address_row">
        <div class="col-md-3">
          <label for="bill_address">Address</label>
        </div>
        <div class="col-md-6">
          <textarea type="text" class="form-control text-dark bg-light" id="bill_ad_dress" name="bill_ad_dress" cols="30" rows="10"></textarea>
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_city_row">
        <div class="col-md-3">
          <label for="bill_city">City</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="b_ill_city" name="b_ill_city">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_state_row">
        <div class="col-md-3">
          <label for="bill_state">State</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="bill_sta_te" name="bill_sta_te">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_zipcode_row">
        <div class="col-md-3">
          <label for="bill_zipcode">Zipcode</label>
        </div>
        <div class="col-md-6">
          <input  class="form-control text-dark bg-light" type="number" id="bill_zipco_de" name="bill_zipco_de">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_phone_row">
        <div class="col-md-3">
          <label for="bill_phone">Phone</label>
        </div>
        <div class="col-md-6">
          <input class="form-control text-dark bg-light" type="tel" id="bill_pho_ne" name="bill_pho_ne">
        </div>
      </div>
      <div class="row mt-2 d-none" id="bill_fax_row">
        <div class="col-md-3">
          <label for="bill_fax">Fax</label>
        </div>
        <div class="col-md-6">
          <input  class="form-control text-dark bg-light" type="tel" id="bill_fa_x" name="bill_fa_x">
        </div>
      </div>
      
      <div class="row mt-2">
        <div class="col-md-3">
          <label for="prof_name" style="color: rgb(190, 88, 88);">Profile Name *</label>
        </div>

        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="prof_name" name="prof_name">
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-3">
          <label for="" style="color: rgb(190, 88, 88);">Repeat Every *</label>
        </div>

        <div class="col-md-6">
          <div class="d-flex">
            <select class="form-control text-dark bg-light" id="repeats"  name="repeats"> </select>
           
            
          </div>   
        </div>
        <div class="col-md-3">
          <a data-toggle="modal" data-target="#newrepeat">
            <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); height: 36px;"
                data-toggle="tooltip" title="Add Repeat"></i>
        </a>
        </div>
      </div>
      <br><br>

      <div class="row mt-2" >
        <div class="col-md-3">
          <div class="col-sm-2"><label for="bills">Recurring Bill#*</label></div>
        </div>
       
          <div class="col-md-6"><input type="text" id="bills" name="bills"
            class="form-control bg-white text-dark" value="REB-00{{b_no}}">
        </div>
    </div>
      <div class="row mt-2" >
          <div class="col-md-3">
            <label for="date1">Starts On</label>
          </div>
          <div class="col-md-6">
            <input type="date" class="form-control text-dark bg-light" id="date1" name="start_date">
          </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-3">
          <label for="date2">Ends On</label>
        </div>
        <div class="col-md-6">
          <input type="date" class="form-control text-dark bg-light" id="date2" name="end_date">
        </div>
        <!-- <div class="col-md-3">
          <input type="checkbox" id="never-expire-checkbox" onchange="toggleDateInput()" />
          <label for="never-expire-checkbox" style="color: #909091;" name="neverExp">Never Expires</label>
        </div> -->
      </div>

      <div class="row mt-2">
        <div class="col-md-3">
          <label for="date2">Payment Terms</label>
        </div>
        <div class="col-md-6">
          <div class="d-flex">
            <select class="form-control text-dark bg-light" id="terms" name="terms">
              
              <option value="30">NET 30</option>
              
              <option value="60">NET 60</option>
             
             
              <option value="recpt">Due on receipt</option>
              {% for p in payments %}
                <option selected value="{{p.Days}}" class="text-dark bg-light">{{p.Terms}}</option>
              {% endfor %}
             
            </select>
           
          </div> 
         
        </div>
        <div class="col-md-3">
          <a data-toggle="modal" data-target="#newpayment"><i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); height: 36px;"></i></a>
          </div>
      </div>  

      <!-- <div class="row mb-5 mt-2">
        <div class="col-md-3">
          <label for="">Reverse Charge</label>
        </div>
        <div class="col-md-6">
          <input type="checkbox" id="rvsCharge" name="rvsCharge">
          <label for="rvsCharge" class="mx-3 mt-2">This transaction is applicable for Reverse Charge</label>
        </div>
      </div> -->
      <div class="row mt-2">
        <div class="col-md-3">
            <label style="color: rgb(190, 88, 88);">Customer Name *</label><br>
        </div>
        <div class="col-md-6 d-flex align-items-center">
            <select name="customer" id="customer" class="form-control text-dark bg-light" style="flex: 1;">
                <option value=""></option>
                {% for c in customer %}
                <option value="{{c.id}} {{c.customerName}}">{{ c.customerName }}</option>
                {% endfor %}
            </select>
           
            <input type="hidden" id="cust_state" value="" readonly >

            <input type="hidden" id="company_state" value="{{company.state}}" readonly>

        </div>

        <div class="col-md-3 mt-2">
          <a data-toggle="modal" data-target="#newcustomer">
            <i class="fas fa-plus p-2 rounded" style="color: white; background-color: rgb(210, 132, 30); height: 36px;"
                data-toggle="tooltip" title="Create Customer"></i>
        </a>
      </div>
    </div>
    

      <div class="row mt-2 d-none" id="cemail_row">
        <div class="col-md-3">
          <label for="cemail_inp">Customer Email</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cemail_inp" name="cemail_inp"  >
        </div>
      </div>

      <div class="row mt-2 d-none" id="c_sou_supply_row">
        <div class="col-md-3">
          <label for="srcofsupply">Source Of Supply</label>
        </div>
        <div class="col-md-6">
          <!-- <input type="text" class="form-control text-dark bg-light"  id="srcofsupply" name="srcofsupply"  > -->
          <div class=" ">
            <select name="srcofsupply" id="srcofsupply" class="form-control bg-light text-dark">
            <option value="value" selected></option>
          <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
          <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
          <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
          <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
          <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
          <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
          <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
          <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
          <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
          <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
         <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
          <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
          <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
          <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
          <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
          <option value="[OT]-Other Territory">[OT]-Other Territory</option>
              </select>
        </div>
        </div>
      </div>

      <div class="row mt-2 d-none" id="cgst_trt_row">
        <div class="col-md-3">
          <label for="gst_trt_inp">GST Treatment</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light" id="cgst_trt_inp" name="cgst_trt_inp"  >
        </div>
      </div>

      <div class="row mt-2 mb-2 d-none" id="cgstin_row">
        <div class="col-md-3">
          <label for="gstin_inp">GST Number</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cgstin_inp" name="cgstin_inp" >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_atten_tion_row">
        <div class="col-md-3">
          <label for="cust_bill_atten_tion">Attention</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cust_bill_att_en_tion" name="cust_bill_att_en_tion"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_country_row">
        <div class="col-md-3">
          <label for="cust_bill_country">Country</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cust_bill_co_untry" name="cust_bill_co_untry"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_address_row">
        <div class="col-md-3">
          <label for="cust_bill_address">Address</label>
        </div>
        <div class="col-md-6">
          <textarea type="text" cols="30" rows="10" id="cust_bill_ad_dress" name="cust_bill_ad_dress" class="form-control text-dark bg-light"></textarea>
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_city_row">
        <div class="col-md-3">
          <label for="cust_bill_city">City</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cust_b_ill_city" name="cust_b_ill_city"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_state_row">
        <div class="col-md-3">
          <label for="cust_bill_state">State</label>
        </div>
        <div class="col-md-6">
          <input type="text" class="form-control text-dark bg-light"  id="cust_bill_sta_te" name="cust_bill_sta_te"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_zipcode_row">
        <div class="col-md-3">
          <label for="cust_bill_zipcode">Zipcode</label>
        </div>
        <div class="col-md-6">
          <input  class="form-control text-dark bg-light"  type="number" id="cust_bill_zipco_de" name="cust_bill_zipco_de"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_phone_row">
        <div class="col-md-3">
          <label for="cust_bill_phone">Phone</label>
        </div>
        <div class="col-md-6">
          <input  class="form-control text-dark bg-light"  type="tel" id="cust_bill_pho_ne" name="cust_bill_pho_ne"  >
        </div>
      </div>
      <div class="row mt-2 d-none" id="cust_bill_fax_row">
        <div class="col-md-3">
          <label for="cust_bill_fax">Fax</label>
        </div>
        <div class="col-md-6">
          <input class="form-control text-dark bg-light"  type="number" id="cust_bill_fa_x" name="cust_bill_fa_x"  >
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-12 table-responsive-md mt-3">
          <table class="table table-bordered table-hover mt-3" id="tab_logic">
            <thead>
              <tr>
                <th class="text-center text-uppercase">Item Details <br>
                  <a href="" data-toggle="modal" data-target="#newitem" class="text-capitalize">+ add item</a>
                </th>
                <th class="text-center text-uppercase">hsn </th>
                <th class="text-center text-uppercase">quantity</th>
                <th class="text-center text-uppercase">rate</th>
                <th class="text-center text-uppercase">tax(%)</th>
                <th class="text-center text-uppercase">discount</th>
                <th class="text-center text-uppercase">amount</th>
              </tr>
            </thead>
            <tbody id="items-table-body">
              <tr id = 'addr0' class = 'addr'>
                <td  style="width: 20%;">
                  <div class="d-flex">
                    <select name='item[]' id="item0" class="form-control item text-dark bg-light" onchange = "showRate(this.id,this.value);">
                      <option value=" " selected disabled>Select Item</option>
                      {% for i in item %}
                        <option value="{{i.id}}">{{i.Name}}</option>
                      {% endfor %}
                    
                    </select>
                  </div>  
                </td>

                <td  style="width: 11%;">
                  <input type="text" value="0" name='HSN[]' id="HSN0" placeholder='HSN' style="width: 82px; " class="form-control HSN text-dark bg-light"/>
                </td>

                
                
                <!-- <td  style="width: 20%;">
                  <div class="d-flex">
                    <select name='account[]' id="account0" class="form-control acnt text-dark bg-light">
                      <option value=" " selected disabled>Select Account</option>
                      <optgroup class=""label="Accounts Payable">
                        <option value='Accounts Payable'>Accounts Payable</option>
                      </optgroup>
  
                      <optgroup class="" label="Accounts Receivable">
                        <option value='Accounts Receivable'>Accounts Receivable</option>
                      </optgroup>

                      <optgroup class="" label="Other Current Asset">
                        <option value='Advance Tax'>Advance Tax</option>
                        <option value='Employee Advance'>Employee Advance</option>
                        <option value='Prepaid Expences'>Prepaid Expences</option>
                        <option value='GST TCS Receivable'>GST TCS Receivable</option>
                        <option value='GST TDS Receivable'>GST TDS Receivable</option>
                        <option value='Input Tax Credits'>Input Tax Credits</option>
                        <option value='Input CGST'>Input CGST</option>
                        <option value='Input IGST'>Input IGST</option>
                        <option value='Input SGST'>Input SGST</option>
                        <option value='Reverse Charge Input Tax but not Due'>Reverse Charge Input Tax but not Due</option>
                        <option value='Sales to Customers(Cash)'>Sales to Customers(Cash)</option>
                        <option value='TDS Receivable'>TDS Receivable</option>
                      </optgroup>

                      <optgroup class="" label="Expence">
                        <option value='Advertising and Marketing'>Advertising and Marketing</option>
                        <option value='Automobile Expense'>Automobile Expense</option>
                        <option value='Bad Debt'>Bad Debt</option>
                        <option value='Bank Fees and Charges'>Bank Fees and Charges</option>
                        <option value='Consultant Expense'>Consultant Expense</option>
                        <option value='Credit Card Expense'>Credit Card Expense</option>
                        <option value='IT and Internet Expenses'>IT and Internet Expenses</option>
                        <option value='Janitorial Expences'>Janitorial Expences</option>
                        <option value='Lodging'>Lodging</option>
                        <option value='Meals and Entertainment'>Meals and Entertainment</option>
                        <option value='Office Supplies'>Office Supplies</option>
                        <option value=0>Other Expenses</option>
                        <option value='Other Expenses'>Postage</option>
                        <option value='Printing and Stationery'>Printing and Stationery</option>
                        <option value='Rent Expense'>Rent Expense</option>
                        <option value='Repair and Maintenance'>Repair and Maintenance</option>
                        <option value='Salaries and Employee Wages'>Salaries and Employee Wages</option>
                        <option value='Telephone Expense'>Telephone Expense</option>
                        <option value='Travel Expense'>Travel Expense</option>
                        <option value='Uncategorized'>Uncategorized</option>
                        <option value='Contract Assets'>Contract Assets</option>
                        <option value='Depreciation and Amortisation'>Depreciation and Amortisation</option>
                        <option value='Merchandise'>Merchandise</option>
                        <option value='Raw Materials and Consumables'>Raw Materials and Consumables</option>
                        <option value='Transpotaion Expense'>Transpotaion Expense</option>
                      </optgroup>

                      <optgroup class="" label="Cost of Goods Sold">
                        <option value='Cost of Goods Sold'>Cost of Goods Sold</option>
                        <option value='Job Costing'>Job Costing</option>
                        <option value='Labor'>Labor</option>
                        <option value='Materials'>Materials</option>
                        <option value='Subcontractor'>Subcontractor</option>
                      </optgroup>

                      <optgroup class="" label="Income">
                        <option value='Discount'>Discount</option>
                        <option value='General Income'>General Income</option>
                        <option value='Interest Income'>Interest Income</option>
                        <option value='Late Fee Income'>Late Fee Income</option>
                        <option value='Other Charges'>Other Charges</option>
                        <option value='Sales'>Sales</option>
                        <option value='Shipping Charge'>Shipping Charge</option>
                      </optgroup>

                      <optgroup class="" label="Equity">
                        <option value='Drawings'>Drawings</option>
                        <option value='Opening Balance Offset'>Opening Balance Offset</option>
                        <option value="Owner's Equity">Owner's Equity</option>
                        <option value='Retained Earnings'>Retained Earnings</option>
                        <option value='Capital Stock'>Capital Stock</option>
                        <option value='Distributions'>Distributions</option>
                        <option value='Dividends Paid'>Dividends Paid</option>
                        <option value='Investments'>Investments</option>
                      </optgroup>

                      <optgroup class="" label="Other Current Liability">
                        <option value='Employee Reimbursements'>Employee Reimbursements</option>
                        <option value='Opening Balance Adjustments'>Opening Balance Adjustments</option>
                        <option value='Tax Payable'>Tax Payable</option>
                        <option value='Unearned Revenue'>Unearned Revenue</option>
                        <option value='GST Payable'>GST Payable</option>
                        <option value='Output CGST'>Output CGST</option>
                        <option value='Output IGST'>Output IGST</option>
                        <option value='Output SGST'>Output SGST</option>
                        <option value='TDS Payable'>TDS Payable</option>
                      </optgroup>

                      <optgroup class="" label="Other Expense">
                        <option value='Exchange Gain or Loss'>Exchange Gain or Loss</option>
                      </optgroup>

                      <optgroup class="" label="Fixed Asset">
                        <option value='Furniture and Equipment'>Furniture and Equipment</option>
                      </optgroup>

                      <optgroup class="" label="Stock">
                        <option value='Inventory Asset'>Inventory Asset</option>
                      </optgroup>

                      <optgroup class="" label="Cash">
                        <option value='Petty Cash'>Petty Cash</option>
                        <option value='Undeposited Funds'>Undeposited Funds</option>
                      </optgroup>

                      <optgroup class="" label="Other Liability">
                        <option value='Tag Adjustments'>Tag Adjustments</option>
                      </optgroup>

                      <optgroup class="" label="Long Term Liability">
                        <option value='Construction Loans'>Construction Loans</option>
                        <option value='Mortgages'>Mortgages</option>
                      </optgroup>

                      {% for ty in account_type %}
                      <optgroup class="" label="{{ty.account_type}}">
                        {% for i in account %}
                          {% if ty.account_type == i.account_type %}
                          <option value="{{ i.id }}">{{ i.account_name }} </option>
                          {% endif %}
                        {% endfor %}
                      </optgroup>
                      {% endfor %}
                    </select>
                  </div>  
                </td> -->
                <td style="width: 10%;">
                  <input type="number" name='qty[]' placeholder='Qty' id="qty0" style="width: 80px;"  class="form-control qty text-dark bg-light" step=0 min=0/>
                </td>
                <td style="width: 10%;">
                  <input type="text" name='rate[]' id="rate0" placeholder='Rate' class="form-control rate text-dark bg-light" style="width: 80px;" />
                </td>
                <td style="width: 15%;">
                  <input type="hidden" id="tax_total0" class="form-control mb-2 d-none" style="width: 100px;" >
                  <input type="text" placeholder="Select TAX" class="form-control selecttax text-dark bg-light" id="selecttax0">
                  <select name="tax1[]" id="intra_tax0" class="form-control tax1 d-none mb-2 text-dark bg-light">
                    <option id="ta1" value=0 text=' '>Choose GST</option>
                    <option value=28 text="{{ cmp1.state }}">28.0% GST(28%)</option>
                    <option value=18 text="{{ cmp1.state }}">18.0% GST(18%)</option>
                    <option value=12 text="{{ cmp1.state }}">12.0% GST(12%)</option>
                    <option value=5 text="{{ cmp1.state }}">05.0% GST(05%)</option>
                    <option value=3 text="{{ cmp1.state }}">03.0% GST(03%)</option>
                    <option value=0 text="{{ cmp1.state }}">0.0% GST(0%)</option>
                  </select>

                  <select name="tax2[]" id="inter_tax0" class="form-control tax2 d-none mb-2 text-dark bg-light">
                    <option id="ta5" value=0 text=" "  >Choose IGST</option>
                    <option value=28 text="{{ cmp1.state }}">28.0% IGST(28%)</option>
                    <option value=18 text="{{ cmp1.state }}">18.0% IGST(18%)</option>
                    <option value=12 text="{{ cmp1.state }}">12.0% IGST(12%)</option>
                    <option value=5 text="{{ cmp1.state }}">05.0% IGST(05%)</option>
                    <option value=3 text="{{ cmp1.state }}">03.0% IGST(03%)</option>
                    <option value=0 text="{{ cmp1.state }}">0.0% IGST(0%)</option>
                  </select>
                </td>
                <td style="width: 11%;">
                  <input type="text" name='discount[]' id="disc0" value="0" placeholder='Discount' class="form-control disc text-dark bg-light" step="0.00" min="0"style="width: 90px;" />
                </td>

                <td style="width: 11%;">
                  <input type="text" name='amount[]' id="amount0" placeholder='Amount' class="form-control amount text-dark bg-light" step="0.00" min="0" style="width: 90px;"  />
                </td>
                <td>
                  <button type="button" id="0" class="btn btn-outline-primary clone_row text-center mb-1 p-1 " data-toggle= "tooltip" data-placement="bottom" tooltip="Clone"
                      style = "width:25px; height: 25px; border-radius: 90% " >
                    <i class="fa-solid fa-clone"></i>
                  </button> 
                    <br>
                  <button disabled type="button" id="0" class="btn remove_row text-center p-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Remove"
                      style = "width:25px; height: 25px; border-radius: 90% " >
                    <i class="fa fa-window-close bg-dark text-dark"></i>
                  </button>
                </td>

              </tr>
            </tbody>
            <tr>
                <td style="border: none;"><a class="btn btn-outline-secondary ml-1 text-capitalize" role="button" id="add"  
                  title="Add Another Line">+</a></td>
            </tr>
          </table>
        </div>
      </div>

      <div class="row" >
        <div class="col-md-5 mt-2 p-3 mx-5">
          <label for="paymentmethod">Payment Method</label>
          <select name="paymentmethod" id="paymentmethod" class="form-control text-dark bg-light">
              <option value="Cash">Cash</option>
              <option value="Cheque">Cheque</option>
              {% for b in bank %}
                  <option value="{{b.name}}">{{b.name}}</option>
              {% endfor %}

          </select>
          </div>
        </div>

      <div class="row clearfix" >
        <div class="col-md-5 mt-2 p-3 mx-5">
          <label for="">Note</label>
          <div class="form-row">
            <textarea class="form-control text-dark bg-light" name="note" rows="15" style="height: 200px;"></textarea>
          </div><br>
          <div>
            <input type="file" class="form-control text-dark bg-light" name="file">
          </div>
          <div>
          </div>
        </div>
        <div class="col-md-5 table-responsive-md mt-3 ml-5 mr-0 p-2" id="tab_logic_total" style="background-color:rgba(5, 5, 5, 0.4); border: 1px solid rgba(128, 128, 128, 0.6);"><br>
          <div class="row container-fluid p-2 m-0">
            <div class="col-sm-5 mt-2">
              <label for="a" class="text-center">Sub Total</label>
            </div>
            <div class="col-sm-3 mt-2"></div>
            <div class="col-sm-4 mt-2">
              <input type="number" step="any" name='subtotal' placeholder=0  step="0.00" min="0"
                class="form-control text-dark bg-light" id="subtotal" readonly style="background-color: #2A3038;border: 1px solid #2c2e33;">
            </div>
          </div>
          
          <div class="row container-fluid p-2 m-0 d-none" id="igst1">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center">IGST</label></div>
            <div class="col-sm-3 mt-2"></div>
            <div class="col-sm-4 mt-2"><input type="number" name='igst' step="0.00" min="0" id="igst" placeholder=0 
                class="form-control text-dark bg-light" readonly style="background-color: #2A3038;border: 1px solid #2c2e33;"/>
            </div>
          </div>
          <div class="row container-fluid p-2 m-0 d-none" id="cgst1">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center">CGST</label></div>
            <div class="col-sm-3 mt-2"></div>
            <div class="col-sm-4 mt-2"><input type="number" name='cgst' step="0.00" min="0" id="cgst" placeholder=0 
                class="form-control text-dark bg-light" readonly style="background-color: #2A3038;border: 1px solid #2c2e33;"/>
            </div>
          </div>
          <div class="row container-fluid p-2 m-0 d-none" id="sgst1">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center">SGST</label></div>
            <div class="col-sm-3 mt-2"></div>
            <div class="col-sm-4 mt-2"><input type="number" name='sgst' step="0.00" min="0" id="sgst" placeholder=0 
                class="form-control text-dark bg-light" readonly style="background-color: #2A3038;border: 1px solid #2c2e33;"/>
            </div>
          </div>
          <div class="row container-fluid p-2 m-0" id="tax_amount">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center">Tax Amount</label></div>
            <div class="col-sm-3 mt-2"></div>
            <div class="col-sm-4 mt-2"><input type="number" id="total_taxamount" name="total_taxamount"step="0.00" min="0" placeholder=0 value="0"
                class="total_taxamount form-control text-dark bg-light" readonly  style="background-color: #2A3038;border: 1px solid #2c2e33;"/>
            </div>
          </div>

          <div class="row container-fluid p-2 m-0">
            <div class="col-sm-5 mt-0">
              <label for="addcharge" class="text-right">Shipping Charges</label>
            </div>
            <div class="col-sm-3 mt-2">
            </div>
            <div class="col-sm-4 mt-2">
              <input type="number" name='addcharge' tep="0.00"   id="addcharge" placeholder=0 
              class="form-control text-dark bg-light"/>
            </div>
          </div>

          <div class="row container-fluid p-2 m-0">
            <div class="col-sm-5 mt-2"><label class="text-right" >Adjustment</label></div>
            <div class="col-sm-3 mt-2">
            </div>
            <div class="col-sm-4 mt-2">
              <input type="number" name='add_round_off' value="0" step="any" id="add_round_off" placeholder=0 class="form-control text-dark bg-light">
            </div>
          </div><hr>
                 
          <div class="row container-fluid  p-2 m-0">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center" id="grandtotallbl">Grand Total</label></div>
            <div class="col-sm-2 mt-2"></div>
            <div class="col-sm-5 mt-2"><input type="number" name='grand_total' id="grandtotal" placeholder="0" step="0.00" min="0"
                class="form-control text-dark bg-light" readonly>
            </div>
          </div><hr>

          <div class="row container-fluid  p-2 m-0">
            <div class="col-sm-5 mt-2"><label for="a" class="text-center" id="Paid">Paid</label></div>
            <div class="col-sm-2 mt-2"></div>
            <div class="col-sm-5 mt-2"><input type="number" name='amtPaid' value="0" id="amtPaid" placeholder="0" step="0.00" min="0"
                class="form-control text-dark bg-light">
            </div>
          </div>
        </div>   
      </div>
      <div class="row mt-5 mb-3">
        
        <div class="col-md-4">
          <div class="d-flex">
            <!-- <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4 mt-2 py-2" aria-label="Close" id="cancelButton">CANCEL</button>
            <input type="submit" class="btn save_btn mt-2 py-2 rounded-pill text-grey w-50 my-4 mx-2" style="width: 200px; text-align: center ;" value="SAVE CHANGES" id="save">
            <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4 mt-2 py-2" aria-label="Close" id="cancelButton">CANCEL</button> -->
            <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
            onclick="saveAsDraftDialog()" value="Save As Draft"> &nbsp;
        <input type="submit" class="btn text-white mt-5" style="background-color: rgb(210, 132, 30) ; "
            onclick="saveAndOpenDialog()" value="SAVE CHANGES"> &nbsp;
        <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
            onclick="cancelDialog()" value="Cancel">
            
          </div>
        </div>
        <div class="col-md-4"></div>
        <div class="col-md-4"></div>
      </div>
    </form>

    <div class="modal fade" id="newvendor">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Vendor</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form  method="post" action=""  enctype="multipart/form-data" class=""  id="modalVendor">
                {% csrf_token %}
                
                
                <div class=" form-group row">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                      <label >Primary Contact</label>
                  </div>
                  <div class="col-sm-12 col-md-1 col-lg-1" style="width: 5.5rem;">
                      <select id="select1"  name="salutation" class="form-control bg-light text-dark  " >
                        
                       
                          <option value="Mr">Mr</option>
                          <option value="Mrs">Mrs</option>
                          <option value="Ms">Ms</option>
                          <option value="Dr">Dr</option>
  
  
     
                          
                         </select> 
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-3" style="width:17rem;">
                      <input  type="text" class="form-control bg-light text-dark  " id="fname" name="first_name" placeholder="first name" required >
  
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-3" style="width:17rem;">
                      <input type="text" class="form-control bg-light text-dark " id="lname" name="last_name" placeholder="last name" required >
  
                  </div>
              </div>
  
                 <div class="form-group row mt-4">
                     <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Company Name</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <input  type="text" class="form-control bg-light text-dark " name="company_name" required>     
                          <div class="invalid-feedback">Please fill out this field.</div>   
   
                      </div>
  
  
                  </div>
                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Display Name</label></div>
                       <div class="col-sm-12 col-md-6 col-lg-6">
                          
                              <select  name="v_display_name" class="form-control bg-light text-dark " onclick="vendor_display()">
                              <option id="select2"></option>
                                  
                              </select> 
            
                                  
                                
                       </div>
                       <script type="text/javascript">
                          function vendor_display()
                          {
                              var x=document.getElementById("select1").value;
                              var y=document.getElementById("fname").value;
                              var z=document.getElementById("lname").value;
  
                              document.getElementById("select2").innerHTML=x+" "+y+" "+z
                             
                              
                          }
                       </script>
   
   
                   </div>
  
                   <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Email</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input  type="email" class="form-control bg-light text-dark" name="vendor_email" required> 
                           <div class="invalid-feedback">Please fill out this field.</div>   
       
                       </div>
   
   
                   </div>
  
                   <!-- <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Vendor phone</label>
                       <div class="col-sm-12 col-md-3 col-lg-3">
                           <input  type="number" class="form-control bg-light text-dark" name="w_phone" placeholder="work phone" required>
                           <div class="invalid-feedback">Please fill out this field.</div>   
        
                       </div>
                       <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input  type="number" class="form-control bg-light text-dark" name="m_phone" placeholder="mobile number" required>
                          <div class="invalid-feedback">Please fill out this field.</div>   
        
                      </div>
                      <div class="toggle1" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                          <a href="">More Details</a>
  
                       </div>
   
   
                   </div> -->
                   <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Vendor phone</label>
                       <div class="col-sm-12 col-md-3 col-lg-3">
                           <input id="workphone"  type="text" class="form-control bg-light text-dark" pattern="[0-9]{7}"   name="w_phone" placeholder="work phone" required>
                           <label for="" id="workphone_label"></label>
                           <div class="invalid-feedback">Please fill out this field.</div>   
        
                       </div>
                       <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input id="mphone"  type="text" pattern="[0-9]{10}" class="form-control bg-light text-dark" onclick="work_phone()"                        name="m_phone" placeholder="mobile number" required>
                          <label for="" id="mphone_label"></label>
                          <div class="invalid-feedback">Please fill out this field.</div>   
        
                      </div>
                      <div class="toggle1" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                          <a href="">More Details</a>
  
                       </div>
   
   
                   </div>
                   
  
                   <fieldset1 id="more_detail" class="more details" style="display: none;">
  
  
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Skype name/Number</label></div>
                         
                           <div class="col-sm-12 col-md-6 col-lg-6">
                             <input  type="text" class="form-control bg-light text-dark" name="skype_number">      
                           </div>
                           
       
       
                       </div>
  
  
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Designation</label></div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                               <input  type="text" class="form-control bg-light text-dark" name="designation">      
                           </div>
       
       
                      </div>
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Department</label></div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                               <input  type="text" class="form-control bg-light text-dark" name="department">      
                           </div>
       
       
                       </div>
  
                   </fieldset1>
  
                  <!-- <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input type="text" class="form-control bg-light text-dark" name="website" required>      
                      </div>
                  </div> -->
                  <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                           <input id="web" type="text" class="form-control bg-light text-dark" onclick="mobile_phone()"    name="website" required>      
                      </div>
                  </div>
  
  
  
                  <br><br><span class="input-group mb-1 mt-3">
                      <div class="toggle2"
                        style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Other Details </a></div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  
                      <div class="toggle3" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      
                        <a href="" style="color: rgb(230, 171, 45);">Address </a>
                        <!-- <button class="btn" onclick="fieldset5_function()" style="border: none;background-color: transparent;">Address</button> -->
                      </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  
                      <div class="toggle4"
                        style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Contact Persons </a></div>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  
                      <!-- <div class="toggle6"
                        style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        Reporting Tags</div> -->
  
                      &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                      <div class="toggle7"
                        style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Remarks</a></div>
  
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </span><br><br><br>
  
                    <fieldset2 class="other details">
  
                      
  
                        <div class="form-group row mt-2">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > GST Treatment*</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <select name="gst" id="GSTT" class="form-control bg-light text-dark" onclick="gstPan_function()">
                                  <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                                  <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                                  <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                      Registered Business-Composition Business that is registered under the Composition schemen in GST
                                  </option>
                                  <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                                  <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                                  <option value="Special Economic Zone">Special Economic Zone</option>
                              </select><br>
                          </div>
       
       
                      </div>
                      <fieldset3 id="gst" style="display: none;">
                          <div class="row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"  > GSTIN/UIN*</label>
                               
                              <div class=" col-sm-12 col-md-3 col-lg-3">
                                  <input type="text" class="form-control bg-light text-dark" name="gst_number" id="gst_input" onmouseout="gst_check()"> 
                                  <label id="gst_label"></label>     
          
                              </div>
           
           
                          </div>
  
                      </fieldset3>
  
                      <fieldset4 id="pan" style="display: none;">
                          <div class=" row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > PAN</label>
                               
                              <div class=" col-sm-12 col-md-3 col-lg-3">
                                  <input type="text" class="form-control bg-light text-dark" id="pan_input" onmouseout="pan_check()" name="pan_number">  
                                  <label id="pan_label"></label>     
      
          
                              </div>
           
           
                          </div>
  
                      </fieldset4>
  
  
  
                      
  
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Source Of Supply*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="source_supply" id="PLACE" class="form-control bg-light text-dark">
                          <option value="value" selected></option>
                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                        <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                        <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                        <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                        <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                        <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                       <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                        <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                        <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                        <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                        <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                            </select>
                      </div>
   
   
                  </div>
                  
  
  
  
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Currency*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="currency" id="PLACE" class="form-control bg-light text-dark">
                              <option value="Indian Rupee" selected>Indian Rupee</option>
                              <option value="Indian Rupee">Indian Rupee</option>
                    
                          </select>
                      </div>
   
   
                  </div>
  
                  <div class="form-group row">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Opening Balance Type</label>
                      <div class="col-sm-12 col-md-3 col-lg-3 d-flex align-items-center">
                          <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" name="op_type" id="debit" value="debit">
                              <label class="form-check-label" for="debit">Debit</label>
                          </div>
                          <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" name="op_type" id="credit" value="credit">
                              <label class="form-check-label" for="credit">Credit</label>
                          </div>
                      </div>
                  </div>
  
  
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Opening Balance Amount</label>                    
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input  type="number" class="form-control bg-light text-dark" name="opening_bal">      
                      </div>
                  </div>
                  
                  
  
  
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Payment Terms</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="payment_terms" id="PLACE" class="form-control bg-light text-dark">
                              <option value="NET 60" >NET 60</option>
                              <option value="NET 45" >NET 45</option>                          
                              <option value="NET 30">NET 30</option>
                              <option value="Due on Receipt" selected>Due on Receipt</option>
                              <option >
                                </option>
                          </select>
  
                      </div>
   
   
                  </div>
  
                  
  
              </fieldset2>
  <!-- ....................................   Fieldset 5  .................................................... -->
  
              <fieldset5 id="address" style="display: none;">
                  <div>
                      <div class="row">
                          <div class="col-sm-12 col-md-6 col-lg-6">
                              <div class="row">
                                  <div class="col-sm-12 col-md-6 col-lg-6">
                                      <label for="">BILLING ADDRESS</label>
                                  </div>
                                  <div class="col"></div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="text" class="form-control bg-light text-dark" name="battention" id="batten">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <select name="bcountry" id="btry" class="form-control bg-light text-dark">
                                          <option value="India" selected>India</option>
                                      </select>      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <textarea class="form-control bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" name="baddress" id="badd1"></textarea>
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="text" class="form-control bg-light text-dark" name="bcity" id="bcty">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input type="text" class="form-control bg-light text-dark" name="bstate" id="bste">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="bzip" id="bzp">      
                                  </div>
                              </div>
                              <!-- <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="bphone" id="bphn">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="bfax" id="bfx">      
                                  </div>
                              </div> -->
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input id="bphone_num"  type="tel" pattern="[0-9]{10}" class="form-control bg-light text-dark" name="bphone" >
                                      <label for="" id="bphone_label"></label>      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" onmouseout="fax_number()"  onclick="bphone_number()"                                       name="bfax" id="bfx">  
                                     
                                      <label for="" id="fax_label"></label> 
                                  </div>
                              </div>
  
                          </div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                              <div class="row">
                                  <div class="col-sm-12 col-md-6 col-lg-6">
                                      <label for="">SHIPPING ADDRESS</label>
                                  </div>
                                  <div class="col-sm-12 col-md-6 col-lg-6">
                                      <input  type="checkbox" id="myCheckT" onclick="myCopyAddressFunction()">&nbsp;
                                      <label for="myCheck">Same as Billing Address:</label>
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="text" class="form-control bg-light text-dark " style="color: white;" name="sattention" id="satten">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <select name="scountry" id="sctry" class="form-control bg-light text-dark">
                                          <option value="India" selected>India</option>
                                      </select>      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <textarea class="form-control bg-light" style="border: none;color: rgb(10, 10, 10);" id="sadd1" cols="26" rows="4" name="saddress"></textarea>
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="text" class="form-control bg-light text-dark" name="scity" id="scty">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input type="text" class="form-control bg-light text-dark" name="sstate" id="sste">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="szip" id="szp">      
                                  </div>
                              </div>
                              <!-- <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="sphone" id="sphn">      
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="number" class="form-control bg-light text-dark" name="sfax" id="sfx">      
                                  </div>
                              </div> -->
  
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Phone </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{10}" style="color: white;" name="sphone" id="sphone_num">  
                                      <label for="" id="sphone_label"></label>    
                                  </div>
                              </div>
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                                  <div class=" col-sm-12 col-md-6 col-lg-6">
                                      <input  type="tel" class="form-control bg-light text-dark" pattern="[0-9]{7}" style="color: white;" name="sfax" onclick="sphone_number()" onmouseout="sfax_number()" id="sfx"> 
                                      <label for="" id="sfax_label"></label>     
                                  </div>
                              </div>
  
                          </div>
                      </div>
                  </div>
              </fieldset5>
  
              <fieldset6 id="contact_person" style="display: none;color: azure ; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;" >
                  <div class="row">
                      <div class="col-sm-12 ">
                          
                              <table id="tbl" class="table text-white" style="background-color: rgba(250, 227, 198, 0.5);">
                                  <tr>
                                    <th>Salutation</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email Address</th>
                                    <th >Work Phone <br><label for="" id="twph_label"></label></th>
                                    <th >Mobile <br><label for="" id="tlabel"></label>    </th>
                                    <th >Skype Name/No</th>
                                    <th >Designation</th>
                                    <th >Department</th>
                                  </tr>
                                  <tr>
                                    <td><select name="salutation[]" class="bg-transparent border-0 text-white"  id="PLACE" >
                                      <option class="text-dark"  >Select</option>
                                        <option class="text-dark" value="Mr" >Mr.</option>
                                        <option class="text-dark" value="Mrs">Mrs.</option>
                                        <option class="text-dark" value="Ms">Ms.</option>
                                        <option class="text-dark" value="Miss">Miss.</option>
                                        <option class="text-dark" value="Dr">Dr.</option>
                                      </select></td>
                                    <td><input type="text" class=" form-control border-1 bg-transparent text-white"    name="first_name[]"  ></td>
                                    <td><input type="text"class="form-control border-1 bg-transparent text-white"  name="last_name[]" /></td>
                                    <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="email[]" /></td>
                                    <!-- <td><input type="text" style="width:8rem;" name="wphone[]" /></td>
                                    <td><input type="text" style="width:8rem;" name="mobile[]" /></td>
                                    <td><input type="text" style="width:8rem;" name="skype[]" /></td> -->
                                    <td><input type="tel" pattern="[0-9]{7}" class="form-control border-1 bg-transparent text-white"  id="twphone" name="wphone[]"/></td>
                                    <td><input type="tel" pattern="[0-9]{10}"  class="form-control border-1 bg-transparent text-white"  id="tmobile" onclick="sample1()"   name="mobile[]" /></td>
                                    <td><input type="number" class="form-control border-1 bg-transparent text-white"  onclick="sample()" name="skype[]" /></td>
                                    <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="designation[]" /></td>
                                    <td><input type="text" class="form-control border-1 bg-transparent text-white"  name="department[]" /></td>
                                  </tr>
                                </table>
                               
                          
                          <div class="button add_another mt-3"
                          style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                          + Add Contact Person</div>
                            
                      </div>
                      
                  </div>
  
              </fieldset6>
  
  
  
   <!-- ...........................................................Remarks    ......................................... -->
  
  
  
              <fieldset7 class="remarks" style="display: none;">
                  <div class="row">
                      <div class="col-sm-12 col-md-8 col-lg-8">
                          <div class="form-group row mt-4">
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <textarea class="bg-light" style="border: none;color: rgb(5, 5, 5);" cols="70" rows="4" name="remark"></textarea>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-12 col-md-2 col-lg-2"></div>
                  </div>
  
              </fieldset7>
  
  
  
              
              <div class="row mt-5">
                  <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                    <input type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" data-dismiss="modal" id="vendorSave" style="font-weight: bold;" value="save">
                  </div>
                   
                  <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                    <a role="button" class="form-control  bg-warning text-dark"  data-dismiss="modal" aria-label="Close" style="font-weight: bold;"><center>Cancel</center></a>
  
                  </div> 
  
  
              </div>
  
             
  
  
                  <br><br><br><br><br><br><br><br><br><br><br><br>
  
                         
  
                </form>
            </div>
              </div>
          </div>
      </div>  
    </div>  

     <!-- repeat modal -->


     <div class="modal fade" id="newrepeat">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">Add Repeat</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalRepeat">
                <div class="row mt-2">
                  <div class="col-md-2 mt-2"></div>
                  <div class="col-md-4 mt-2">
                    
                  </div>

                </div>


                <div class="row mt-2">
                  <div class="col-md-2 mt-2">
                    <center><label for="termname" style="color: rgb(190, 88, 88);">Add Repeat*</label></center>
                  </div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="repeats_input" name="repeats_input" required>      
                  </div>

                 

                </div>
                
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="RepeatSave">Save
                      </button> 
                      

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  

    

    <!-- payment modal -->


    <div class="modal fade" id="newpayment">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">Add Payment Term</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
                <div class="row mt-2">
                  <div class="col-md-2 mt-2"></div>
                  <div class="col-md-4 mt-2">
                    <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
                  </div>

                  <div class="col-md-4 mt-2">
                    <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
                  </div>
                  <div class="col-md-2 mt-2"></div>
                </div>


                <div class="row mt-2">
                  <div class="col-md-2 mt-2"></div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="term_name" name="term_name" required>      
                  </div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="term_days" name="term_days" required>
                  </div>
                  <div class="col-md-2 mt-2"></div>

                </div>
                
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="paySave">Save
                      </button> 
                      

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  

    <!-- customer modal -->


    <div class="modal fade" id="newcustomer">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Customer</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form  method="POST" action=""  enctype="multipart/form-data" class="" novalidate id="modalCustomer">
                {% csrf_token %}
                
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer Type</label>
                  
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input  type="radio"  value="Business" name="type" >
                              <label for="Business"> Business</label>
                             &nbsp;&nbsp;&nbsp;
                             <input  type="radio"  value="Individual" name="type" >
                             <label for="Business">Individual</label>
                  </div><br></div>
                <div class=" form-group row">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                      <label >Primary Contact</label>
                  </div>
                  <div class="col-sm-12 col-md-1 col-lg-1">
                      <select id="sa"  name="txtsalu" class="form-control bg-light text-dark  " >
                        
                       
                          <option value="Mr" selected>Mr</option>
                          <option value="Mrs">Mrs</option>
                          <option value="Ms">Ms</option>
                          <option value="Dr">Dr</option>
    
    
     
                          
                         </select> 
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-3" >
                      <input  type="text" class="form-control bg-light text-dark  " id="fName" name="fName"  placeholder="first name" required >
    
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-2" >
                      <input type="text" class="form-control bg-light text-dark " id="lName"  name="lName" placeholder="last name"  oninput="generateFullName_cust()" required >
    
                  </div>
              </div>
              <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Display Name*</label></div>
                   <div class="col-sm-12 col-md-6 col-lg-6">
                      
                      <input type="text" class="form-control bg-light text-dark "  id="txtFullName" name="txtFullName" >
    
        
                              
                            
                   </div>
              
                 <div class="form-group row mt-4">
                     <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Company Name</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <input type="text" id="ccname" name="cpname" class="form-control bg-light text-dark "required>
       </div></div>
    
                   <div class="form-group row mt-4">
                      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Email</label></div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <input type="email" id="myEmail" name="email"  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" 
                          class="form-control bg-light text-dark"  required> 
                          
                       </div> </div>
    
               
                   <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Customer phone</label>
                       <div class="col-sm-12 col-md-3 col-lg-3">
                            <input type="text" name="wphone" class="form-control bg-light text-dark" style="width: 100%;" placeholder="0000-0000000" pattern="[0-9]{4}-[0-9]{7}">
                           
                          
                       </div>
                       <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input type="text" name="mobile" style="width:100%;" placeholder="Mobile" pattern="[0-9]{10}" class="form-control bg-light text-dark" required>
                          <div class="toggle_cust_"
                          style=" color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                          Add more details </div>
                      </div>
                      
    
    
                   </div>
                   
    
                   <fieldset_cust_19 class="contact" style="display: none;">
    
    
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Skype name/Number</label></div>
                         
                           <div class="col-sm-12 col-md-6 col-lg-6">
                             <input  type="text" class="form-control bg-light text-dark"  id="cn"  name="skname">      
                           </div>
                           
       
       
                       </div>
    
    
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Designation</label></div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                               <input  type="text" class="form-control bg-light text-dark"  id="cn"   name="desg">      
                           </div>
       
       
                      </div>
                      <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Department</label></div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                               <input  type="text" class="form-control bg-light text-dark"  id="cn"   name="dept">      
                           </div>
       
       
                       </div>
                       <div class="form-group row mt-4">
                          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                          <div class="col-sm-12 col-md-6 col-lg-6">
                               <input type="text" class="form-control bg-light text-dark" id="cn" name="wbsite" >      
                          </div>
                      </div>
    
                   </fieldset_cust_19>
                  
    
    
    
                  <br><br><span class="input-group mb-1 mt-3">
                      <div class="toggle_cust_2"
                        style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Other Details </a></div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    
                      <div class="toggle_cust_3" style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      
                        <a href="" style="color: rgb(230, 171, 45);">Address </a>
                        <!-- <button class="btn" onclick="fieldset5_function()" style="border: none;background-color: transparent;">Address</button> -->
                      </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    
                      <div class="toggle_cust_4"
                        style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Contact Persons </a></div>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    
                     
    
                      &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                      <div class="toggle_cust_7"
                        style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                        <a href="" style="color: rgb(230, 171, 45);">Remarks</a></div>
    
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </span><br><br><br>
    
                    <fieldset_cust_2 class="other details" style="display: block;">
                        <div class="form-group row mt-2">
                          <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> GST Treatment*</label>
                           
                          <div class=" col-sm-12 col-md-3 col-lg-3">
                              <select name="v_gsttype" id="GSTT" class="form-control bg-light text-dark" onclick="gstPan_function_cust()">
                                  <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                                  <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                                  <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                      Registered Business-Composition Business that is registered under the Composition schemen in GST
                                  </option>
                                  <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                                  <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                                  <option value="Special Economic Zone">Special Economic Zone</option>
                              </select><br>
                          </div>
       
       
                      </div>
                      <fieldset_cust_3 id="gst" style="display: none;">
                          <div class="row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"  style="color:rgb(214, 75, 75) ;"> GSTIN/UIN*</label>
                               
                              <div class=" col-sm-12 col-md-3 col-lg-3">
                                  <input type="text" class="form-control bg-light text-dark" name="v_gstin" placeholder="29APPCK7465F1Z1" id="gst_input" onmouseout="gst_check_cust()"> 
                                  <label id="gst_label"></label>     
          
                              </div></div>
    
                      </fieldset_cust_3>
    
                      <fieldset_cust_4 id="pan" style="display: none;">
                          <div class=" row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > PAN</label>
                               
                              <div class=" col-sm-12 col-md-3 col-lg-3">
                                  <input type="text" class="form-control bg-light text-dark" id="pan_input" onmouseout="pan_check_cust()" name="pan_number">  
                                  <label id="pan_label"></label>     
      
          
                              </div>
           
           
                          </div>
    
                      </fieldset_cust_4>
    
    
    
                      
    
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> Source Of Supply*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="posply" id="PLACE" class="form-control bg-light text-dark">
                          <option value="value" selected></option>
                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option> <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh	</option> <option value="[AS]-Assam">[AS]-Assam</option>
                        <option value="[BR]-Bihar">[BR]-Bihar</option> <option value="[CH]-Chandhigarh">[CH]-Chandhigarh</option><option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option><option value="[DL]-Delhi">[DL]-Delhi</option><option value="[GA]-Goa">[GA]-Goa</option> <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                        <option value="[HR]-Haryana">[HR]-Haryana</option> <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option><option value="[JH]-Jharkand">[JH]-Jharkand</option>
                        <option value="[KA]-Karnataka">[KA]-Karnataka</option><option value="[KL]-Kerala">[KL]-Kerala</option>
                        <option value="[LA]-Ladakh">[LA]-Ladakh</option><option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option><option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                        <option value="[MN]-Manipur">[MN]-Manipur</option>  <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram">[MZ]-Mizoram</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option> <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                       <option value="[OD]-Odisha">[OD]-Odisha</option><option value="[PY]-Puducherry">[PY]-Puducherry</option>
                        <option value="[PB]-Punjab">[PB]-Punjab.</option><option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                        <option value="[SK]-Sikkim">[SK]-Sikkim</option><option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                        <option value="[TS]-Telenghana">[TS]-Telenghana</option><option value="[TR]-Tripura">[TR]-Tripura</option><option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option><option value="[WB]-West Bengal">[WB]-West Bengal</option>
                        <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                            </select>
                      </div>
    
    
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">Tax Preference*</label>
                      
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <input type="checkbox" id="Taxable" name="tax1" value="Taxable">&nbsp;
                          <label for="vehicle1" class="pt-1">Taxable</label>
                          &nbsp;&nbsp;&nbsp;
                          <input type="checkbox" id="Tax Exempt" name="tax1" value="Tax Exempt">&nbsp;
                          <label for="vehicle2" class="pt-1"> Tax Exempt</label>
                    
                      </div>
    
    
                  </div>
    
    
    
    
    
    
    
    
    
                  
    
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> Currency*</label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="crncy"  id="PLACE" class="form-control bg-light text-dark">
                              <option value="Indian Rupee" selected>Indian Rupee</option>
                              <option value="Indian Rupee">Indian Rupee</option>
                    
                          </select>
                      </div>
    
    
                  </div>
    
    
                  <div class="form-group row mt-4">
                      <label for="opn_bal" class="col-md-3 p-3">Opening Balance</label>
              <div class="col-sm-12 col-md-3 col-lg-3 ">
                <div class="input-group">
                  <div class="input-group-append">
                    <select class="form-gr form-select text-dark bg-light" id="bal" name="bal" style="background-color: #888; width: 100px;">
                      <option value="credit">Credit</option>
                      <option value="debit">Debit</option>
                     
                    </select>
                  </div>
                  <input type="number" class="form-control text-dark bg-light" id="cn"  name="obal">
                </div>
              </div>
                      
                      
    
                  </div>
                  
    
    
                  <div class="form-group row mt-4">
                      <label class=" col-md-3 col-lg-3 col-form-label" > Payment Terms</label>
                       
                      <div class=" col-md-5 col-lg-3">
                      
                          <select class="form-control bg-light text-dark" id="terms" name="terms" >
                              <option id="crt_term" selected></option>
                              <option value="Net 60">Net 60</option>
                              <option value="Net 45">Net 45</option>
                              <option value="Net 30">Net 30</option>
                              <option value="Due On Receipt">Due On Receipt</option>
    
                              {% for p in sb %} 
    
                                  <option value="{{ p.term }}"> {{ p.term}}</option>
                              {% endfor %}
                          </select>
                          
                          
      
                      </div>
                     
                          <div class="col-md-4 ">
                              <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal" style="color: white; background-color: rgb(210, 132, 30);" >+</a>
                          </div>
                      
    
    
                  </div>
                  
    
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" >Price List </label>
                       
                      <div class=" col-sm-12 col-md-3 col-lg-3">
                          <select name="plst" id="PLACE" id="PLACE" class="form-control bg-light text-dark">
                              
          
                              <option type="text">PriceBook0 [ 68% Markup ]</option>
                              <option type="text">PriceBook1 [ 70% Markdown ]</option>
    
                                  {% for cs in hi %}
                          
                                <option type="text" value ='{{ cs.id }}'> {{ cs.name}}</option>
                               
                                {% endfor %}
                               </select>
                         
                      </div>
          
          
                  </div>
               
                       
    
                          <!-- <div class="form-group row mt-4">
                              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Enable Portal? </label>
                                  <div class=" col-sm-12 col-md-3 col-lg-3">
                                      <input type="checkbox"  id="vehicle1" name="vehicle1" value="Bike">
                                      <label for="vehicle1">Allow Portal Access For This Customer</label>
     
                              </div></div> -->
    
    
    
    
    
    
    
                              <div class="form-group row mt-4">
                                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">
                                      Portal Language</label>
                                      <div class=" col-sm-12 col-md-3 col-lg-3">
                                          <select name="plang" id="PLACE" style="width: 100%;" class="form-control bg-light text-dark"  >
                                              <option selected disabled value="" >Choose..</option>
                                              <option value="ENGLISH">ENGLISH</option>
                                            </select>
                                  </div></div>   
                                  <div class="form-group row mt-4">
                                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Facebook </label>
                                          <div class=" col-sm-12 col-md-3 col-lg-3">
                                              <input type="text" id="cn" name="fbk" class="form-control bg-light text-dark" >
                                              
                                      </div></div>
                                  <div class="form-group row mt-4">
                                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Twitter</label>
                                          <div class=" col-sm-12 col-md-3 col-lg-3">
                                              <input type="text" id="cn" name="twtr" class="form-control bg-light text-dark" >
                                            
                                      </div></div>
                                      
    
              </fieldset_cust_2>
    <!-- ....................................   Fieldset 5  .................................................... -->
    
    <fieldset_cust_5 class="address" style="display: none;">
      <div>
          <div class="row">
              <div class="col-sm-12 col-md-6 col-lg-6">
                  <div class="row">
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <label for="">BILLING ADDRESS</label>
                      </div>
                      <div class="col"></div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="text" class="form-control bg-light text-dark" id="batn"  name="atn" >      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <select name="ctry" id="bcty" class="form-control bg-light text-dark">
                              <option value="India" selected>India</option>
                          </select>      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" id="bads1" name="addrs" ></textarea>
                          <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4" id="bads2"
                          name="addrs1"></textarea>
         
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="text" class="form-control bg-light text-dark"  id="bct" name="bct" >      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark"  id="bst" name="bst" >      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="number" class="form-control bg-light text-dark" id="bzip" name="bzip">      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Mobile </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567890" pattern="[0-9]{10}" id="bpon" name="bpon" >      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="number" class="form-control bg-light text-dark" placeholder="1234567" id="bfx" name="bfx">      
                      </div>
                  </div> 
                  
    
              </div>
              <div class="col-sm-12 col-md-6 col-lg-6">
                  <div class="row">
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <label for="">SHIPPING ADDRESS</label>
                      </div>
                      <div class="col-sm-12 col-md-6 col-lg-6">
                          <input  type="checkbox" id="myCheckT" onclick="myCopyAddressFunction_cust()">&nbsp;
                          <label for="myCheck">Same as Billing Address:</label>
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Attention</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="text" class="form-control bg-light text-dark " style="color: white;" id="satn" name="lna">      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Country</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <select name="Place" id="scty" class="form-control bg-light text-dark">
                              <option value="India" selected>India</option>
                          </select>      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Address</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);"  cols="26" rows="4"  id="sads1" name="lna"></textarea>
                          <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);"  cols="26" rows="4" id="sads2" name="lna"></textarea>
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > City</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="text" class="form-control bg-light text-dark" id="sct" name="lna">      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > State</label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="sst" name="lna">      
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Zip Code </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="number" class="form-control bg-light text-dark" id="szip" name="lna">      
                      </div>
                  </div>
               
    
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" >Mobile </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567890" pattern="[0-9]{10}" style="color: white;" id="spn" name="lna">  
                          <label for="" id="sphone_label"></label>    
                      </div>
                  </div>
                  <div class="form-group row mt-4">
                      <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" > Fax </label>                    
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input  type="tel" class="form-control bg-light text-dark" placeholder="1234567" pattern="[0-9]{7}" style="color: white;" id="sfx" name="bfx"> 
                          <label for="" id="sfax_label"></label>     
                      </div>
                  </div>
    
              </div>
          </div>
      </div>
    </fieldset_cust_5>
    
    
              <fieldset_cust_6 class="contact_person" style="display: none;color: azure ; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;" >
                  <div class="row">
                      <div class="col-sm-12 col-md-11 col-lg-11">
                          <div style="overflow-x: scroll;">
                              <table id="tbl_cust" style="border:1px solid;border-color:white;width:75%;">
                                  <tr>
                                    <th>Salutation</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email Address</th>
                                    <th >Work Phone <br><label for="" id="twph_label"></label></th>
                                    <th >Mobile <br><label for="" id="tlabel"></label>    </th>
                                    <th >Skype Name/No</th>
                                    <th >Designation</th>
                                    <th >Department</th>
                                  </tr>
                                  <tr>
                                    <td><select name="sal[]" class="bg-light" style="width:8rem;height: 2.4rem;border: none;color: black;" id="PLACE" style="width:8rem;height: 2.4rem;">
                                        <option value="Mr" selected>Mr.</option>
                                        <option value="Mrs">Mrs.</option>
                                        <option value="Ms">Ms.</option>
                                        <option value="Miss">Miss.</option>
                                        <option value="Dr">Dr.</option>
                                      </select></td>
                                      <td><input type="text" name="ftname[]" ></td>
                                      <td><input type="text" name="ltname[]" ></td>
                                      <td><input type="text" name="mail[]" ></td>
                                      <td><input type="tel" placeholder="1234-1234567" name="bworkpn[]" ></td>
                                      <td><input type="tel" name="bmobile[]" ></td>
                                      <td><input type="number" name="bskype[]" ></td>
                                      <td><input type="text" name="bdesg[]" ></td>
                                      <td><input type="text" name="bdept[]" ></td>
                                    </tr>
                                </table>
                               
                          </div>
                          <div class="button add_another_cust mt-3"
                          style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                          + Add Contact Person</div>
                            
                      </div>
                      
                  </div>
    
              </fieldset_cust_6>
    
    
    
    <!-- ...........................................................Remarks    ......................................... -->
    
    
    
              <fieldset_cust_7 class="remarks" style="display: none;">
                  <div class="row">
                      <div class="col-sm-12 col-md-8 col-lg-8">
                          <div class="form-group row mt-4">
                              <div class=" col-sm-12 col-md-6 col-lg-6">
                                  <textarea class="bg-light" style="border: none;color: rgb(5, 5, 5);" cols="70" rows="4" name="remark"></textarea>
                              </div>
                          </div>
                      </div>
                      <div class="col-sm-12 col-md-2 col-lg-2"></div>
                  </div>
    
              </fieldset_cust_7>
    
    
    
              
              <div class="row mt-4">
                  <div class="col-sm-12 col-md-2 col-lg-2"> 
                      <input type="submit" class="btn btn-outline-warning form-control bg-warning text-dark" data-dismiss="modal" id="customerSave" style="font-weight: bold;" value="save">
                  </div>
                   
                  <div class=" col-sm-12 col-md-2 col-lg-2">
                    <a role="button" class="form-control  bg-warning text-dark"  data-dismiss="modal" aria-label="Close" style="font-weight: bold;"><center>Cancel</center></a>
    
                  </div> 
    
    
              </div>
    
             
    
    
                  <br><br><br><br><br><br><br><br><br><br><br><br>
    
                         
    
              </form>
            </div>
              </div>
          </div>
      </div>  
    </div> 
  </div> 

    <!-- item modal -->

    <div class="modal fade" id="newitem">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
            <h3 class="m-3 text-uppercase">New Item</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" id="modalItem">
                {% csrf_token %}
                <fieldset class="form-group">
                  <div class="row">
                    <label class="col-form-label col-sm-2 pt-3">Type <i class="fa fa-question-circle"></i></label>
                    <div class="col-sm-10 form-inline">
                      <div class="form-check ">
                        <input required class="form-check-input " type="radio" name="type" id="gridRadios1" value="Goods" style="margin-left:5px;">
                        <label class="form-check-label text-white" for="gridRadios1">Goods</label>
                      </div>
                      <div class="form-check ml-5">
                        <input required class="form-check-input " type="radio" name="type" id="gridRadios2" value="Services" style="margin-left:50px;">
                        <label class="form-check-label text-white" for="gridRadios2">Services</label>
                      </div>
                            
                    </div>
                  </div>
                </fieldset>
                <div class="form-group row">
                  <label  class="col-sm-2 col-form-label ">Name *</label>
                  <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                    <input required type="text" class="form-control text-black" name="name" id="nameInput">
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-sm-2 col-form-label">Unit <i class="fa fa-question-circle"></i></label>
                  <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                      <div class="d-flex align-items-center">
                          <select name="unit" class="form-control text-black" id="unit" style="width: 100%;">
                              {% for u in unit %}
                              <option value="{{u.id}}">{{u.unit}}</option>
                              {% endfor %}
                          </select>
                          <button style="width: 2.5rem; background-color: chocolate; color: black; border-radius: 3px; margin-left: 10px;" class="open-button" onclick="openForm()">+</button>
                      </div>
                  </div>
              </div>
              
      
                <div class="form-group row">
                  <label  class="col-sm-2 col-form-label">HSN Code</label> 
                  <div class="col-sm-10 col-md-7 col-9"  style="margin-left: -2.2rem;" >
                    <input required type="number" class="form-control text-black" name="hsn" id="myInputField" oninput="validateInput()">
                    <div id="validationResult"></div>
                  </div>
                </div>
                <script>
                  function validateSixDigits(field) {
                    // Define the regular expression pattern for exactly six digits
                    var pattern = /^\d{6}$/;
                  
                    // Check if the field matches the pattern
                    return pattern.test(field);
                  }
                  
                  function validateInput() {
                    var inputField = document.getElementById("myInputField");
                    var inputValue = inputField.value;
                  
                    var validationResultDiv = document.getElementById("validationResult");
                  
                    if (validateSixDigits(inputValue)) {
                      validationResultDiv.textContent = "Valid: The field contains exactly six digits.";
                    } else {
                      validationResultDiv.textContent = "Invalid: The field does not contain exactly six digits.";
                    }
                  }
                
                </script>
                <div class="form-inline text-white" >
                  <label class="text-danger mb-4 mr-4" for="">Tax Preference  :</label>
                  <p class="text-white  ">
                  <input type="radio"  name="radio" value="taxable" onclick="showAllSelect()" style="margin-left:95px;">  Taxable</p>
                  <p><input type="radio" name="radio" value="no-taxable" onclick="hideAllSelect()" style="margin-left:62px;"> None-Taxable </p><br><br>
                </div>
      
                <div class="row">
                  <div class="col-md-3">
                
                    <div id="select1_div" style="display: none;">
                      <label for="select1">Intra-State TAX</label>
                      <select name="intra" class="form-control text-black" id="select1">
                        <option value="GST0[0%]">GST0[0%]</option>
                        <option value="GST3[3%]">GST3[3%]</option>
                        <option value="GST5[5%]">GST5[5%]</option>
                        <option value="GST12[12%]">GST12[12%]</option>
                        <option value="GST18[18%]">GST18[18%]</option>
                        <option value="GST28[28%]">GST28[28%]</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div id="select2_div" style="display: none;">
                      <label for="select2">Inter-State TAX</label>
                      <select name="inter" class="form-control text-black" id="select2">
                        <option value="IGST0[0%]">IGST0[0%]</option>
                        <option value="IGST5[5%]">IGST3[3%]</option>
                        <option value="IGST5[5%]">IGST5[5%]</option>
                        <option value="IGST12[12%]">IGST12[12%]</option>
                        <option value="IGST18[18%]">IGST18[18%]]</option>
                        <option value="IGST28[28%]">IGST28[28%]</option>
                      </select>
                    </div>
                  </div>
                </div>
          
      
      
              <script>
              function showAllSelect() {
              var select1_div = document.getElementById("select1_div");
              var select2_div = document.getElementById("select2_div");
              select1_div.style.display = "block";
              select2_div.style.display = "block";
              }
      
              function hideAllSelect() {
              var select1_div = document.getElementById("select1_div");
              var select2_div = document.getElementById("select2_div");
              select1_div.style.display = "none";
              select2_div.style.display = "none";
              }
              </script>
              <div class="row">
                <div class="col-md-6">
                  <input  type="checkbox" name="selling" checked> <label >selling  information</label><br><br>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Selling price *</label>
                    <div class="col-sm-12 col-md-7 col-9 ml-5">
                      <div class="input-group mb-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text text-white">INR</div>
                        </div>
                        <input required type="text" name="sel_price" class="form-control text-black">
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-2 col-form-label">Account *</label>
                    <div class="col-sm-10 col-md-7 col-9 ml-5">
                      <select name="sel_acc" class="form-control text-dark">
                        
                             
                        
                        {% for account_type in account_type %}
                          <option value="" disabled class="btn btn-dark  highlight-account-type"><b>{{ account_type }}</b></option>
                          {% for account in account %}
                          {% if account.Account_type == account_type %}
                          <option value="{{account.id}}">{{ account.Account_name }}</option>
                          {% endif %}
                          {% endfor %}
                          {% endfor %}
      
                      </select>                              
                    </div>
                  </div>
                  <div class="form-group row">
                    <label  class="col-sm-2 col-form-label">Description </label>
                    <div class="col-sm-10 col-md-7 col-9 ml-5">
                      <input required  type="text" name="sel_desc" class="form-control text-black" >
                    </div>
                  </div>
                                        
                </div>
                <div class="col-md-6">
                  <input type="checkbox" name="purchase" checked> <label for="">Purchase information</label><br><br>
                  <div class="form-group row">
                    <label  class="col-sm-2 col-form-label">Cost Price *</label>
                    <div class="col-sm-10 col-md-7 col-9">
                      <div class="input-group mb-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text text-white">INR</div>
                        </div>
                        <input required type="text" class="form-control text-black" name="cost_price" >
                      </div>
                    </div>
                  </div>
                  <div class="form-group row in">
                    <label class="col-sm-2 col-form-label">Account *</label>
                    <div class="col-sm-10 col-md-7 col-5">
                        <div class="d-flex align-items-center">
                            <select name="cost_acc" class="form-control text-black" id="myaccount" >
                                {% for account_type in account_types %}
                                <option value="" disabled class="btn btn-dark text-light highlight-account-type"><b>{{ account_type }}</b></option>
                                {% for account in accounts %}
                                {% if account.Account_type == account_type %}
                                <option value="{{account.id}}">{{ account.Account_name }}</option>
                                {% endif %}
                                {% endfor %}
                                {% endfor %}
                            </select>
                            <button id="showFormButton" style="width: 40px; background-color: chocolate; color: black; border-radius: 3px; margin-left: 10px;" class="openbutton" onclick="showForm()">+</button>
                        </div>
                    </div>
                </div>
                
                
      
      
                  <div class="form-group row">
                    <label  class="col-sm-2 col-form-label">Description </label>
                    <div class="col-sm-10 col-md-7 col-9">
                      <input  type="text" name="cost_desc" class="form-control text-black"  >
                    </div>
                  </div>
                </div>
                <div class="form-group row mt-1">
                  <label  class="col-sm-2 col-form-label">Minimum Stock to maintain </label>
                  <div class="col-sm-7 col-md-3 col-9">
                    <input  type="text" name="minimum_stock" class="form-control text-black" style="margin-left: -2.4rem;" >
                  </div>
                </div>
                <fieldset class="form-group">
                  <div class="row">
                    <label class="col-form-label col-sm-2 pt-3">Activation tag<i class="fa fa-question-circle"></i></label>
                    <div class="col-sm-10 form-inline">
                      <div class="form-check ">
                        <input required class="form-check-input" type="radio" name="status" id="gridRadios1" value="Active"  style="margin-left:5px;" >
                        <label class="form-check-label text-white" for="gridRadios1">Activate</label>
                      </div>
                      <div class="form-check ml-5">
                        <input required class="form-check-input" type="radio" name="status" id="gridRadios2" value="Inactive" style="margin-left:50px;">
                        <label class="form-check-label text-white" for="gridRadios2">Non-Activate</label>
                      </div>
                        
                    </div>
                  </div>
                </fieldset>
                  <br><br>
                  <div class="row" >
                    <div class="col-md-10">
                      {% comment %} <label><input type="checkbox" value="trackstate" name="trackstate" onclick="toggleForm()" style="display: none;">
                     Track Inventory for this item</label> {% endcomment %}
                      {% comment %} <input type="hidden" name="trackState" id="trackState" value="" unchecked> {% endcomment %}
                      <label>
                        <input type="checkbox" name="trackstate" value="trackstate" class=" "  onclick="toggleFormFields()">
                        Track Inventory for this item
                      </label>
                      <div id="formFields" style="display: none;"> 
                        <div class="form-group row" >
                          <label class="col-sm-2 col-form-label">Inventory Account *</label>
                          <div class="col-sm-10 col-md-7 col-9" style="margin-left: -1rem;">
                            <select class="form-select form-select-sm mt-3 text-black" name="invacc">
                              <option>Choose..</option>
                              <option value="inventory assets">Inventory Asset</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group row ">
                          <label class="col-sm-2 col-form-label">Opening Stock</label>
                          <div class=" col-md-5">
                            <input  type="number" class="form-control text-black"  name="openstock" value="0">
                          </div>
                          <div class="col-md-5  ">
                            <div class="row align-items-center">
                              <label class="col-sm-6 col-form-label">Opening Stock Rate per Unit</label>
                              <div class="col-sm-6">
                                <input type="number" class="form-control text-black" name="inventoryaccntperunit"  value="0">
                              </div>
      
                            </div>
                          </div>
                          <fieldset class="form-group">
                            <div class="row">
                              <label class="col-form-label col-sm-2 pt-2">Activation tag<i class="fa fa-question-circle"></i></label>
                              <div class="col-sm-10 form-inline">
                                <div class="form-check ">
                                  <input  class="form-check-input" type="radio" name="satus" id="gridRadios1" value="Active"  style="margin-left:5px;" >
                                  <label class="form-check-label" for="gridRadios1">Activate</label>
                                </div>
                                <div class="form-check ml-5">
                                  <input  class="form-check-input" type="radio" name="satus" id="gridRadios2" value="Inactive"  style="margin-left:50px;">
                                  <label class="form-check-label" for="gridRadios2">Non-Activate</label>
                                </div>
                                            
                              </div>
                            </div>
                          </fieldset>
      
                        </div>
                      </div>
                    </div>
                  </div>
                  <script>
                    function toggleFormFields() {
                      var formFields = document.getElementById("formFields");
                      var checkbox = document.querySelector("input[name=trackstate]");
                
                      if (checkbox.checked) {
                        formFields.style.display = "block";
                      } else {
                        formFields.style.display = "none";
                      }
                    }
                  </script>
                  <br><br> <br>
              <div class="form-inline " style="margin-bottom: 200px;">
                <button type="submit"  class="mr-3 btn" style="background-color: chocolate;" data-dismiss="modal" onclick="create_item()" value="Save">Save</button>
                <button type="button" class="mr-3 btn"  data-dismiss="modal" value="Cancel" style="margin-left:10px;background-color: chocolate;">Cancel</button>
              </div>
            </form>
            </div>
          </div>
          </div>
      </div>  
    </div>  
    <div class="form-popup" id="myForm">
      <form onsubmit="event.preventDefault(); addUnit();" class="form-container" id="unitForm">
          {% csrf_token %}
          <span class="close" onclick="closeForm()">&times;</span><br>
          <h1 class="text-dark">Add Unit</h1>
    
          <label class="text-dark" for="unit"><b>Unit</b></label>
          <input type="text" placeholder="Enter unit" id="unitName" name="unit_name" required>
          <p class="text-dark">eg:KL,PCS,BOX,LTR</p>
    
          <button type="submit" class="btn add-button">Add</button>
      </form>
    </div>
  
    <div class="form-popup1" id="myForm1" >
      <form style="margin-top: 5rem;" onsubmit="event.preventDefault(); addAccount();" class="form-container" id="accountForm">
        {% csrf_token %}
        <span class="close" onclick="closeForm1()">&times;</span><br>
        <h1 class="text-dark" >Add Account</h1><br>
        
        <label class="text-dark"><b>Account type</b></label>
        <select class="form-select" aria-label="Default select example" name="acc_type">
          <option selected></option>
          <option value="EXPENCES">EXPENCES</option>
          <option value="Cost Of Goods Sold">Cost Of Goods Sold</option>
          <option value="Fixed Asset">Fixed Asset</option>
        </select>
        <label class="text-dark"><b>Account Name</b></label>
        
        <input type="text" placeholder="Enter account Name" id="unit" name="acc_name" required>
        <label class="text-dark"><b>Description</b></label>
        <input type="text" placeholder="Description"name="acc_desc">
        <button type="submit" class="btn add-button" >Add</button>
      
      </form>
    </div>

    <!-- unit modal -->

    <div class="modal fade" id="newunit">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">Add Unit</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalUnit">
                <div class="row mt-2">
                  <div class="col-md-3 mt-2"></div>
                  <div class="col-md-1 mt-2">
                    <label for="unit" style="color: rgb(190, 88, 88);">Unit</label>
                  </div>

                  <div class="col-md-4 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="unit" name="unit" required>
                  </div>
                  <div class="col-md-4 mt-2"></div>
                </div>
                
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="unitSave">Save
                      </button> 
                      

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>  


    <!-- account modal -->

    <!-- <div class="modal fade" id="newaccount">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Account</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalAccount">
        
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="">Account Type</label><br>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control text-dark bg-light" id="acct_type" name="acct_type">
                      <option value="" disabled selected>Select Account Types</option>
                      <option value="Accounts Payable ">Accounts Payable </option>
                      <option value="Accounts Receivable ">Accounts Receivable </option>
                      <option value="Other Current Asset">Other Current Asset</option>
                      <option value="Cash">Cash</option>
                      <option value="Bank">Bank</option>
                      <option value="Fixed Asset"> Fixed Asset</option>
                      <option value="Stock">Stock</option>
                      <option value="Other Current Liability">Other Current Liability</option>
                      <option value="Credit Card">Credit Card</option>
                      <option value="Long Term Liability">Long Term Liability</option>
                      <option value="Other Liability"> Other Liability</option>
                      <option value="Equity">Equity</option>
                      <option value="Income">Income</option>
                      <option value="Other Expense">Other Expense</option>
                      <option value="Expense">Expense</option>
                      <option value="Cost of Goods Sold"> Cost of Goods Sold</option>
                    </select>  
                  </div>
                </div>
                
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cfname">Account name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="acct_name" name="acct_name" required>
                  </div>
                </div>            

                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal" id="accountSave">Submit
                      </button> 

                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>  
    </div>   -->

    <!-- end of modal -->



    
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>

// document.getElementById("cancelButton").addEventListener("click", function() {
//   document.getElementById("myForm").reset(); 
//   location.reload(); 
// });
function toggleDateInput() {
    var checkbox = document.getElementById("never-expire-checkbox");
    var billDateInput = document.getElementById("date1");
    var dateInput = document.getElementById("date2");

    if (checkbox.checked) {
        dateInput.disabled = true; // Disable date input
        $('#date2').val($('#date1').val()); // Set date2 value to date1 value
        $("#terms").val("recpt");
    } else {
        dateInput.disabled = true; // Disable date input
    }
}

$(document).ready(function() {
    $('#terms').change(function() {
        var va = $(this).val();
        var checkbox = $('#never-expire-checkbox');

        if (va == 'recpt') {
            checkbox.prop('checked', true); // Check the checkbox
            $('#date2').val($('#date1').val()); // Set date2 value to date1 value
            $('#date2').prop('disabled', true); // Disable date input
        } else {
            checkbox.prop('checked', false); // Uncheck the checkbox
            $('#date2').prop('disabled', true); // Disable date input
        }
    });

    toggleDateInput(); // Call toggleDateInput after the page loads to prevent dateInput from being enabled on page load
});


  
$(document).ready(function() {
    $('#vendor').change(function() {
        var name = $("#vendor").val();
        var na = name.split(' ')[0];
        // console.log(name);
        $.ajax({

            url: "{% url 'get_vendordet' %}", 

            data: { 
                    // fname : na[0],
                    // lname : na[1],
                    id :na,
                    csrfmiddlewaretoken: '{{ csrf_token }}' 
                },

            type : 'POST',

            success: function(data) { debugger
                
                $("#email_row").removeClass('d-none');
                $("#email_row").addClass('d-flex');
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $("#gst_trt_row").removeClass('d-none');
                $("#gst_trt_row").addClass('d-flex');
               
                $("#vsrcofsupply_row").removeClass('d-none');
                $("#vsrcofsupply_row").addClass('d-flex');
                
                $("#bill_atten_tion_row").removeClass('d-none');
                $("#bill_atten_tion_row").addClass('d-flex');
                $("#bill_country_row").removeClass('d-none');
                $("#bill_country_row").addClass('d-flex');
                $("#bill_address_row").removeClass('d-none');
                $("#bill_address_row").addClass('d-flex');
                $("#bill_city_row").removeClass('d-none');
                $("#bill_city_row").addClass('d-flex');
                $("#bill_state_row").removeClass('d-none');
                $("#bill_state_row").addClass('d-flex');
                $("#bill_zipcode_row").removeClass('d-none');
                $("#bill_zipcode_row").addClass('d-flex');
                $("#bill_phone_row").removeClass('d-none');
                $("#bill_phone_row").addClass('d-flex');
                $("#bill_fax_row").removeClass('d-none');
                $("#bill_fax_row").addClass('d-flex');
                 
                $('#bill_att_en_tion').val(data.att_ent_ion);
                $('#bill_co_untry').val(data.cou_nt_ry);
                $('#bill_ad_dress').val(data.a_ddres_s);
                $('#b_ill_city').val(data.c_it_y);
                $('#bill_sta_te').val(data.s_ta_te);
                $('#bill_zipco_de').val(data.z_i_p);
                $('#bill_pho_ne').val(data.ph_o_ne);
                $('#bill_fa_x').val(data.f_ax_bill_s);

                $('#email_inp').val(data.vendor_email);
                $('#gstin_inp').val(data.gst_number);
                $('#gst_trt_inp').val(data.gst_treatment);  
                $("#vsrcofsupply").val(data.source_supply); 
              if( data.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex'); 
                $('#gstin_inp').val(data.gst_number);

              }
              else if( data.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ data.gst_number);
              }
              else if( data.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(data.gst_number);
              }
              
              if(data.gst_number != null && data.gst_number != ""){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
              }
              else{
                
                $("#gstin_row").removeClass('d-flex');
                $("#gstin_row").addClass('d-none');

              }
                

               
            }
        });
    
    });
});

$(document).ready(function() {
    $('#customer').change(function() {

        var name = $("#customer").val();
        var na = name.split(' ')[0];
        $.ajax({

            url: "{% url 'get_customerdet' %}", 

            data: { 
                    // name : na[1]+ " " + na[2] + " "+ na[3],
                    id : na,
                    csrfmiddlewaretoken: '{{ csrf_token }}' 
                },

            type : 'POST',

            success: function(data) {

              $("#cemail_row").removeClass('d-none');
              $("#cemail_row").addClass('d-flex');
              
              $("#cgst_trt_row").removeClass('d-none');
              $("#cgst_trt_row").addClass('d-flex');

              $("#c_sou_supply_row").removeClass('d-none');
              $("#c_sou_supply_row").addClass('d-flex');

              $("#cust_bill_atten_tion_row").removeClass('d-none');
              $("#cust_bill_atten_tion_row").addClass('d-flex');
              $("#cust_bill_country_row").removeClass('d-none');
              $("#cust_bill_country_row").addClass('d-flex');
              $("#cust_bill_address_row").removeClass('d-none');
              $("#cust_bill_address_row").addClass('d-flex');
              $("#cust_bill_city_row").removeClass('d-none');
              $("#cust_bill_city_row").addClass('d-flex');
              $("#cust_bill_state_row").removeClass('d-none');
              $("#cust_bill_state_row").addClass('d-flex');
              $("#cust_bill_zipcode_row").removeClass('d-none');
              $("#cust_bill_zipcode_row").addClass('d-flex');
              $("#cust_bill_phone_row").removeClass('d-none');
              $("#cust_bill_phone_row").addClass('d-flex');
              $("#cust_bill_fax_row").removeClass('d-none');
              $("#cust_bill_fax_row").addClass('d-flex');
              
              $('#cust_bill_att_en_tion').val(data.cust_Attenti_on);
              $('#cust_bill_co_untry').val(data.cust_countr_y);
              $('#cust_bill_ad_dress').val(data.cust_Addres_s1);
              $('#cust_b_ill_city').val(data.cust_cit_y);
              $('#cust_bill_sta_te').val(data.cust_stat_e);
              $('#cust_bill_zipco_de').val(data.cust_zipcod_e);
              $('#cust_bill_pho_ne').val(data.cust_phon_e1);
              $('#cust_bill_fa_x').val(data.cust_fax_s);

              $('#cemail_inp').val(data.customer_email);
              $('#srcofsupply').val(data.cust_place_supply);
              $('#cgst_trt_inp').val(data.gst_treatment);
              $('#cgstin_inp').val(data.gstin); 
              if( data.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(data.gstin);

              }
              else if( data.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(data.gstin);
              }
              else if( data.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(data.gstin);
              }
              
              else{
                $("#cgstin_row").addClass('d-none');
              }

                // gst or igst in tax

              $("#cust_state").val(data.state);
              srcofsupply()
              isGST()
            }
           
        });
    });
});

  $(document).ready(function(){


    $('#add').click(function(){
      var table = document.getElementById("items-table-body");
      var roinc = table.rows.length;

      $('#items-table-body').append(
        
        `<tr id='addr${roinc}' class = 'addr '>
          <td style="width: 20%;">
            <div class="d-flex">
              <select name='item[]' id="item${roinc}" class="form-control item text-dark bg-light listAdditem" onchange = "showRate(this.id,this.value);">
                <option value=" " selected disabled >Select Item</option>
                {% for i in item %}
                      <option value="{{i.id}}">{{i.Name}}</option>
                {% endfor %}
              </select>
            </div>  
          </td>

          <td style="width: 11%;">
            <input type="text" name='HSN[]' id="HSN${roinc}" placeholder='HSN' class="form-control HSN text-dark bg-light"   style="width: 82px; " />
          </td>

         
          <td style="width: 10%;">
            <input type="number" name='qty[]'  placeholder='Qty' id="qty${roinc}"  class="form-control qty text-dark bg-light" step=0 min=0/>
          </td>
          <td style="width: 10%;">
            <input type="text" name='rate[]' id="rate${roinc}" placeholder='Rate' class="form-control rate text-dark bg-light" />
          </td>
          <td style="width: 15%;">
            <input type="hidden" id="tax_total0" class="form-control mb-2 d-none" >
            <input type="text" placeholder="Select TAX" class="form-control selecttax text-dark bg-light" id="selecttax${roinc}" style = "width:100px;" >
            <select name="tax1[]" id="intra_tax${roinc}" class="form-control tax1 d-none mb-2 text-dark bg-light" >
                <option id="ta1" value=0 text=" ">Choose GST</option>
                <option value=28 text="{{ cmp1.state }}">28.0% GST(28%)</option>
                <option value=18 text="{{ cmp1.state }}">18.0% GST(18%)</option>
                <option value=12 text="{{ cmp1.state }}">12.0% GST(12%)</option>
                <option value=5 text="{{ cmp1.state }}">05.0% GST(05%)</option>
                <option value=3 text="{{ cmp1.state }}">03.0% GST(03%)</option>
                <option value=0 text="{{ cmp1.state }}">0.0% GST(0%)</option>
            </select>

            <select name="tax2[]" id="inter_tax${roinc}" class="form-control tax2 d-none mb-2 text-dark bg-light">
              <option id="ta5" value=0 text=" " >Choose IGST</option>
              <option value=28 text="{{ cmp1.state }}">28.0% IGST(28%)</option>
              <option value=18 text="{{ cmp1.state }}">18.0% IGST(18%)</option>
              <option value=12 text="{{ cmp1.state }}">12.0% IGST(12%)</option>
              <option value=5 text="{{ cmp1.state }}">05.0% IGST(05%)</option>
              <option value=3 text="{{ cmp1.state }}">03.0% IGST(03%)</option>
              <option value=0 text="{{ cmp1.state }}">0.0% IGST(0%)</option>
            </select>
          </td>
            
          <td style="width: 11%;">
            <input type="text" name='discount[]' id="disc${roinc}" placeholder='Discount' value='0' class="form-control disc text-dark bg-light" step="0.00" min="0"/>
          </td>
          <td style="width: 11%;">
            <input type="text" name='amount[]' id="amount${roinc}" placeholder='Amount' class="form-control amount text-dark bg-light" step="0.00" min="0"  />
          </td>
            
          <td>
            <button type="button" id="${roinc}" class="btn btn-outline-primary clone_row text-center mb-1 p-1 " data-toggle= "tooltip" data-placement="bottom" tooltip="Clone"
                style = "width:25px; height: 25px; border-radius: 90% " >
              <i class="fa-solid fa-clone"></i>
            </button> <br>
            <button type="button" id="${roinc}" class="btn btn-outline-danger remove_row text-center p-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Remove"
                style = "width:25px; height: 25px; border-radius: 90% " >
              <i class="fa fa-window-close"></i>
            </button>
          </td>
        </tr>`

     
        );
      reloadItem();
    });
  });

  $(document).on('click','.clone_row',function(){ debugger
    reloadItem();
    var table = document.getElementById("items-table-body");
    var roinc = table.rows.length;

    var row = $(this).closest('#items-table-body tr'); 
    var newRow = row.clone();  

    var inputs = row.find('input');
    var item = row.find('.item');
    var accnt = row.find('.acnt');
    var qnty = row.find('.qty');
    var rt = row.find('.rate');
    var amnt  = row.find('.amount');
    var disc = row.find(".disc");
    var intra = row.find(".tax1");
    var inter = row.find(".tax2");
    var clone = row.find(".clone_row");
    var rm = row.find(".remove_row");
    var hsn = row.find(".HSN");

    newRow.each(function(index) {
        var idPrefix = 'addr';
        var newId = idPrefix + roinc ;
        newRow.attr('id' , newId);
        
    });
    clone.each(function(index) {
        var value1 = $(this).val();
        var newId = roinc ;
        newRow.find('.clone_row').eq(index).attr('id' , newId);
        
    });
    rm.each(function(index) {
        var value1 = $(this).val();
        var newId = roinc ;
        newRow.find('.remove_row').eq(index).attr('id' , newId);
        
    });
    item.each(function(index) {
        var value1 = $(this).val();
        var idPrefix = 'item';
        var newId = idPrefix + roinc ;
        newRow.find('.item').eq(index).val(value1).attr('id' , newId);
        
    });
    qnty.each(function(index) {
        var value2 = $(this).val();
        var idPrefix = 'qty';
        var newId = idPrefix + roinc ;
        newRow.find('.qty').eq(index).val(value2).attr('id' , newId);
        
    });
    rt.each(function(index) {
        var value3 = $(this).val();
        var idPrefix = 'rate';
        var newId = idPrefix + roinc ;
        newRow.find('.rate').eq(index).val(value3).attr('id' , newId);
        
    });
    amnt.each(function(index) {
        var value4 = $(this).val();
        var idPrefix = 'amount';
        var newId = idPrefix + roinc ;
        newRow.find('.amount').eq(index).val(value4).attr('id' , newId);
        
    });

    disc.each(function(index) {
        var value5 = $(this).val();
        var idPrefix = 'disc';
        var newId = idPrefix + roinc ;
        newRow.find('.disc').eq(index).val(value5).attr('id' , newId);
        
    });
    accnt.each(function(index) {
      var value6 = $(this).val();
      var idPrefix = 'account';
      var newId = idPrefix + roinc ;
      newRow.find('.acnt').eq(index).val(value6).attr('id' , newId);
        
    });

    intra.each(function(index){
      var value7 = $(this).val();
      var idPrefix = 'intra_tax';
      var newId = idPrefix + roinc ;
      newRow.find('.tax1').eq(index).val(value7).attr('id' , newId);
    });
    
    inter.each(function(index){
      var value8 = $(this).val();
      var idPrefix = 'inter_tax';
      var newId = idPrefix + roinc ;
      newRow.find('.tax2').eq(index).val(value8).attr('id' , newId);
    });

    hsn.each(function(index){
      var value9 = $(this).val();
      var idPrefix = 'HSN';
      var newId = idPrefix + roinc ;
      newRow.find('.HSN').eq(index).val(value9).attr('id' , newId);
    });

    var buttonCell = $('<td>').append(`
            <button type="button" id="${roinc}" class="btn btn-outline-primary clone_row text-center mb-1 p-1 " data-toggle= "tooltip" data-placement="bottom" tooltip="Clone"
                style = "width:25px; height: 25px; border-radius: 90% " >
              <i class="fa-solid fa-clone"></i>
            </button> <br>
            <button type="button" id="${roinc}" class="btn btn-outline-danger remove_row text-center p-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Remove"
                style = "width:25px; height: 25px; border-radius: 90% " >
              <i class="fa fa-window-close"></i>
            </button>
          `);
    newRow.find('td:last-child').replaceWith(buttonCell);

    row.after(newRow);

    //recalculate after new row added

    var row_c = $("#items-table-body tr").length;
    var amount_t = 0;
    var tax = 0;
    var tax_tot = 0;
    var ship = parseFloat( $("#addcharge").val());
    for(var i=0; i<row_c;i++){
      amount_t += parseFloat($("#amount"+i).val());

      $("#subtotal").val(amount_t);
      
      var tax1 = $("#intra_tax" +i).val();
      var tax2 = $("#inter_tax" +i).val();
      if (tax1 == 0){
        if(tax2 == 0){
          tax = 0;
          tax_tot += tax;
        }
        else{
          tax = (($("#qty"+i).val())*($("#rate"+i).val()))*(tax2/100) ;
          
          tax_tot += tax;
          $("#igst").val(tax_tot);
          $("#total_taxamount").val(tax_tot);
        }
      }
      else{

        tax = (($("#qty"+i).val())*($("#rate"+i).val()))*(tax1/100) ;
        tax_tot += tax;
        $("#sgst").val(tax_tot/2);
        $("#cgst").val(tax_tot/2);
        $("#total_taxamount").val(tax_tot);
      }
      if(ship){
        $("#grandtotal").val(amount_t+tax_tot+ship)
      }
      else{
        $("#grandtotal").val(amount_t+tax_tot)
      }
    }
  });
  
  $(document).on('click','.remove_row',function(){
    
    var row_id = $(this).attr("id");
    $('#addr'+row_id+'').remove();

    $('tr[id^="addr"]').each(function(index) {
        var new_row_id = 'addr' + (index);
        $(this).attr('id', new_row_id);

        $(this).find('select[id^="item"]').each(function(tdIndex) {
          var new_td_id = 'item' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('input[id^="HSN"]').each(function(tdIndex) {
          var new_td_id = 'HSN' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        
        $(this).find('input[id^="qty"]').each(function(tdIndex) {
          var new_td_id = 'qty' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('input[id^="rate"]').each(function(tdIndex) {
          var new_td_id = 'rate' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('input[id^="disc"]').each(function(tdIndex) {
          var new_td_id = 'disc' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('input[id^="amount"]').each(function(tdIndex) {
          var new_td_id = 'amount' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('select[id^="intra_tax"]').each(function(tdIndex) {
          var new_td_id = 'intra_tax' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('select[id^="inter_tax"]').each(function(tdIndex) {
          var new_td_id = 'inter_tax' + (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('.clone_row').each(function(tdIndex) {
          var new_td_id = (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        $(this).find('.remove_row').each(function(tdIndex) {
          var new_td_id = (index * 1 + tdIndex);
          $(this).attr('id', new_td_id);
        });
        // $(this).find('button').each(function(tdIndex) {
        //   var new_td_id = (index * 1 + tdIndex);
        //   $(this).attr('id', new_td_id);
        // });
        // $(this).find('button[class="remove_row"]').each(function(tdIndex) {
        //   var new_td_id1 = ((index * 1) + tdIndex);
        //   $(this).attr('id', new_td_id1);
        // });
        var row_c = $("#items-table-body tr").length;
        var amount_t = 0;
        var tax = 0;
        var tax_tot = 0;
        var ship = parseFloat( $("#addcharge").val());
        for(var i=0; i<row_c;i++){
          amount_t += parseFloat($("#amount"+i).val());

          $("#subtotal").val(amount_t);

          var tax1 = $("#intra_tax" +i).val();
          var tax2 = $("#inter_tax" +i).val();

          if (tax1 == 0){
            if(tax2 == 0){
              tax = 0;
              tax_tot += tax;
            }
            else{
              tax = (($("#qty"+i).val())*($("#rate"+i).val()))*(tax2/100);
              
              tax_tot += tax;
              // console.log(tax_tot);
              $("#igst").val(tax_tot);
              $("#total_taxamount").val(tax_tot);
            }
          }
          else{

            tax = (($("#qty"+i).val())*($("#rate"+i).val()))*(tax2/100) ;
            tax_tot += tax;
            $("#sgst").val(tax_tot/2);
            $("#cgst").val(tax_tot/2);
            $("#total_taxamount").val(tax_tot);
          }
          if(ship){
            $("#grandtotal").val(amount_t+tax_tot+ship)
          }
          else{
            $("#grandtotal").val(amount_t+tax_tot)
          }
        }
    });

  });

  $(document).ready(function() {
    $("#fname, #lname").change(function() {
      $("#vdisplayname").text($("#title").val() +" " + $("#fname").val() + " " + $("#lname").val());
    });
  });
  $(document).ready(function() {
    $("#cfname, #clname").change(function() {
      $("#cdisplayname").text($("#ctitle").val() +" " + $("#cfname").val() + " " + $("#clname").val());
    });
  });


  $(document).ready(function() {
    $("#v_gsttype").change(function() {
      var x=$('#v_gsttype').val();
      if(x=="unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#v_gstin").change(function() {

        var x=$("#v_gstin").val();
        var gst_label=document.getElementById("gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";
            gst_label.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#v_pan").change(function() {
        var x= $("#v_pan").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });

  function addressSame(){
    var chkbtn1 = document.getElementById('vokay');
    var chkbtn2 = document.getElementById('csokay');

    if (chkbtn1.checked == true) {
      document.getElementById('vsstreet').value = document.getElementById('vstreet').value;
      document.getElementById('vscity').value = document.getElementById('vcity').value;
      document.getElementById('vspincode').value = document.getElementById('vpincode').value;
      document.getElementById('vscountry').value = document.getElementById('vcountry').value;
      document.getElementById('vsstate').value = document.getElementById('vstate').value;
      document.getElementById('vsphone').value = document.getElementById('vphone').value;
      document.getElementById('vsfax').value = document.getElementById('vfax').value;
    } 
    else {
      document.getElementById('vsstreet').value = '';
      document.getElementById('vscity').value = '';
      document.getElementById('vsstate').value = '';
      document.getElementById('vspincode').value = '';
      document.getElementById('vscountry').value = '';
      document.getElementById('vsphone').value = '';
      document.getElementById('vsfax').value = '';
    }
    if (chkbtn2.checked == true) {
      document.getElementById('csstreet1').value = document.getElementById('cstreet1').value;
      document.getElementById('csstreet2').value = document.getElementById('cstreet2').value;
      document.getElementById('cscity').value = document.getElementById('ccity').value;
      document.getElementById('cspincode').value = document.getElementById('cpincode').value;
      document.getElementById('cscountry').value = document.getElementById('ccountry').value;
      document.getElementById('csstate').value = document.getElementById('cstate').value;
      document.getElementById('csphone').value = document.getElementById('cphone').value;
      document.getElementById('csfax').value = document.getElementById('cfax').value;
    } 
    else {
      document.getElementById('csstreet1').value = '';
      document.getElementById('csstreet2').value = '';
      document.getElementById('cscity').value = '';
      document.getElementById('csstate').value = '';
      document.getElementById('cspincode').value = '';
      document.getElementById('cscountry').value = '';
      document.getElementById('csphone').value = '';
      document.getElementById('csfax').value = '';
    }
  }


  //---------modal vendor-----

$(document).on("click","#vendorSave",function(){

  var formData = $("#modalVendor").serialize(); // Serialize the form data
  formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token

  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_vendor' %}",
    data: formData,
      success: function(response) {
        document.getElementById("modalVendor").reset();
        reloadVendor();
      },
    error: function(xhr, status, error) {
      console.error(error);
      // Handle error here
    }
  });        
});

function reloadVendor() {

  $.ajax({
    url: "{% url 'vendor_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) { debugger
      var dropdown = $('#vendor');
      dropdown.empty();
      dropdown.append($('<option></option>').text('Select Vendor'));
      $.each(data, function(key, value) {
        dropdown.append($('<option></option>').attr('value', key).text(value[1] + ' ' + value[2]).val(value[3]+' '+ value[1] + ' ' + value[2]));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}



//---------modal customer-----

$(document).on("click","#customerSave",function(){

  var formData = $("#modalCustomer").serialize(); // Serialize the form data

  formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token

  $.ajax({
    type : 'POST',
    url:"{% url 'recurbills_customer' %}",
    data: formData,
    success: function(response) {
      document.getElementById("modalCustomer").reset();
      reloadCustomer();
    },
    error: function(xhr, status, error) {
      console.error(error); 
    } 
  });        
});

function reloadCustomer() {

  $.ajax({
    url: "{% url 'pur_rec_customer_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {debugger
      var dropdown = $('#customer');
      dropdown.empty();
      dropdown.append($('<option></option>').text('Select Customer'));
      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value.customerName).val(value.id + ' ' +value.customerName));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


//-------- add repeat modal-----------

$(document).on("click","#RepeatSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'add_repeat' %}",


    data:{
      repeats : $("#repeats_input").val(),
       
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalRepeat").reset();
        reloadRepeat();
      },
  });        
});

$(document).ready(function(){
  reloadRepeat()
});

function reloadRepeat() {

$.ajax({
  url: "{% url 'repeat_dropdown' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) {
    var dropdown = $('#repeats');
    dropdown.empty();
    dropdown.append(`
               <option selected value="Week">Week</option>
               
               <option value="Month">Month</option>
               
               <option value="Year">Year</option>`); 
    $.each(data, function(key, value) { 
        dropdown.append('<option value="'+value[0]+'">'+value[0]+'</option>'); 
    });
  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});
}




//--------payment terms modal-----------

$(document).on("click","#paySave",function(){ 
  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_pay' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalPayment").reset();
        reloadPayment();
      },
  });        
});

function reloadPayment() {

  $.ajax({
    url: "{% url 'pay_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#terms');
      dropdown.empty();
      dropdown.append(`<option value="30">NET 30</option></option>
                          
                          
                          <option value="60">NET 60</option>
                          
                         
                          <option value="recpt">Due on receipt</option>`);
      var drpv = $('#v_terms');
      drpv.empty();
      drpv.append(`<option value="30">NET 30</option>
                        
                        
                        <option value="60">NET 60</option>
                       
                        
                        <option value="recpt">Due on receipt</option>`);
      $.each(data, function(key, value) { 
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
          drpv.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


// unit modal


$(document).on("click","#unitSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_unit' %}",

    data:{
        unit : $("#unit").val(),
                
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalUnit").reset();
        reloadUnit();
      },
  });        
});


function reloadUnit() {

  $.ajax({
    url: "{% url 'unit_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#item_units');
      dropdown.empty();

      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}


// item modal

$(document).ready(function() {

  $("#item-tax1").click(function() {
    $(".inter-intra").removeClass('d-none');
    $(".inter-intra").addClass('d-flex');
  });

  $("#item-tax2").click(function() {

    $(".inter-intra").removeClass('d-flex');
    $(".inter-intra").addClass("d-none");
  });
});


function create_item() {
  var formData = $("#modalItem").serialize(); // Serialize the form data
   formData += '&csrfmiddlewaretoken=' + '{{ csrf_token }}'; // Append the CSRF token

    $.ajax({

      type: "POST",
      url: "{% url 'recurbills_item' %}",

      data: formData,  

      success: function (response) {
        document.getElementById("modalItem").reset();
         reloadItem(); 
      },
      error: function(xhr, status, error) {
        console.error(error);
        // Handle error here
      }

    });


  }

function reloadItem() {
  $.ajax({
    url: "{% url 'item_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      

      $('.item').each(function(index, options) { 
         debugger
          var $select = $(this); 
          let items = $.map(options, e => $(e).val()) 

          $.each(data, function(key, value) {
            
            if(items.indexOf(key)==-1){
              $select.append($('<option></option>').attr('value', key).text(value[0]).val(key));
            } 
          });

      }); 

    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

// account modal

$(document).on("click","#accountSave",function(){

  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_account' %}",
    
    data:{
        actype : $("#acct_type").val(),
        acname : $("#acct_name").val(),
     
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalAccount").reset();
        reloadAccount();
      },
  });        
});


function reloadAccount() {
  $.ajax({
    url: "{% url 'account_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('.acnt');
      dropdown.empty();
      dropdown.append(` <optgroup class=""label="Accounts Payable">
                        <option value='Accounts Payable'>Accounts Payable</option>
                      </optgroup>
  
                      <optgroup class="" label="Accounts Receivable">
                        <option value='Accounts Receivable'>Accounts Receivable</option>
                      </optgroup>

                      <optgroup class="" label="Other Current Asset">
                        <option value='Advance Tax'>Advance Tax</option>
                        <option value='Employee Advance'>Employee Advance</option>
                        <option value='Prepaid Expences'>Prepaid Expences</option>
                        <option value='GST TCS Receivable'>GST TCS Receivable</option>
                        <option value='GST TDS Receivable'>GST TDS Receivable</option>
                        <option value='Input Tax Credits'>Input Tax Credits</option>
                        <option value='Input CGST'>Input CGST</option>
                        <option value='Input IGST'>Input IGST</option>
                        <option value='Input SGST'>Input SGST</option>
                        <option value='Reverse Charge Input Tax but not Due'>Reverse Charge Input Tax but not Due</option>
                        <option value='Sales to Customers(Cash)'>Sales to Customers(Cash)</option>
                        <option value='TDS Receivable'>TDS Receivable</option>
                      </optgroup>

                      <optgroup class="" label="Expence">
                        <option value='Advertising and Marketing'>Advertising and Marketing</option>
                        <option value='Automobile Expense'>Automobile Expense</option>
                        <option value='Bad Debt'>Bad Debt</option>
                        <option value='Bank Fees and Charges'>Bank Fees and Charges</option>
                        <option value='Consultant Expense'>Consultant Expense</option>
                        <option value='Credit Card Expense'>Credit Card Expense</option>
                        <option value='IT and Internet Expenses'>IT and Internet Expenses</option>
                        <option value='Janitorial Expences'>Janitorial Expences</option>
                        <option value='Lodging'>Lodging</option>
                        <option value='Meals and Entertainment'>Meals and Entertainment</option>
                        <option value='Office Supplies'>Office Supplies</option>
                        <option value=0>Other Expenses</option>
                        <option value='Other Expenses'>Postage</option>
                        <option value='Printing and Stationery'>Printing and Stationery</option>
                        <option value='Rent Expense'>Rent Expense</option>
                        <option value='Repair and Maintenance'>Repair and Maintenance</option>
                        <option value='Salaries and Employee Wages'>Salaries and Employee Wages</option>
                        <option value='Telephone Expense'>Telephone Expense</option>
                        <option value='Travel Expense'>Travel Expense</option>
                        <option value='Uncategorized'>Uncategorized</option>
                        <option value='Contract Assets'>Contract Assets</option>
                        <option value='Depreciation and Amortisation'>Depreciation and Amortisation</option>
                        <option value='Merchandise'>Merchandise</option>
                        <option value='Raw Materials and Consumables'>Raw Materials and Consumables</option>
                        <option value='Transpotaion Expense'>Transpotaion Expense</option>
                      </optgroup>

                      <optgroup class="" label="Cost of Goods Sold">
                        <option value='Cost of Goods Sold'>Cost of Goods Sold</option>
                        <option value='Job Costing'>Job Costing</option>
                        <option value='Labor'>Labor</option>
                        <option value='Materials'>Materials</option>
                        <option value='Subcontractor'>Subcontractor</option>
                      </optgroup>

                      <optgroup class="" label="Income">
                        <option value='Discount'>Discount</option>
                        <option value='General Income'>General Income</option>
                        <option value='Interest Income'>Interest Income</option>
                        <option value='Late Fee Income'>Late Fee Income</option>
                        <option value='Other Charges'>Other Charges</option>
                        <option value='Sales'>Sales</option>
                        <option value='Shipping Charge'>Shipping Charge</option>
                      </optgroup>

                      <optgroup class="" label="Equity">
                        <option value='Drawings'>Drawings</option>
                        <option value='Opening Balance Offset'>Opening Balance Offset</option>
                        <option value="Owner's Equity">Owner's Equity</option>
                        <option value='Retained Earnings'>Retained Earnings</option>
                        <option value='Capital Stock'>Capital Stock</option>
                        <option value='Distributions'>Distributions</option>
                        <option value='Dividends Paid'>Dividends Paid</option>
                        <option value='Investments'>Investments</option>
                      </optgroup>

                      <optgroup class="" label="Other Current Liability">
                        <option value='Employee Reimbursements'>Employee Reimbursements</option>
                        <option value='Opening Balance Adjustments'>Opening Balance Adjustments</option>
                        <option value='Tax Payable'>Tax Payable</option>
                        <option value='Unearned Revenue'>Unearned Revenue</option>
                        <option value='GST Payable'>GST Payable</option>
                        <option value='Output CGST'>Output CGST</option>
                        <option value='Output IGST'>Output IGST</option>
                        <option value='Output SGST'>Output SGST</option>
                        <option value='TDS Payable'>TDS Payable</option>
                      </optgroup>

                      <optgroup class="" label="Other Expense">
                        <option value='Exchange Gain or Loss'>Exchange Gain or Loss</option>
                      </optgroup>

                      <optgroup class="" label="Fixed Asset">
                        <option value='Furniture and Equipment'>Furniture and Equipment</option>
                      </optgroup>

                      <optgroup class="" label="Stock">
                        <option value='Inventory Asset'>Inventory Asset</option>
                      </optgroup>

                      <optgroup class="" label="Cash">
                        <option value='Petty Cash'>Petty Cash</option>
                        <option value='Undeposited Funds'>Undeposited Funds</option>
                      </optgroup>

                      <optgroup class="" label="Other Liability">
                        <option value='Tag Adjustments'>Tag Adjustments</option>
                      </optgroup>

                      <optgroup class="" label="Long Term Liability">
                        <option value='Construction Loans'>Construction Loans</option>
                        <option value='Mortgages'>Mortgages</option>
                      </optgroup>
                      <optgroup class="" label="Others">`);

      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
      });
      dropdown.append("</optgroup>");
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

 


  function showRate(id,name) {  debugger
    var n = id.slice(4);
    $.ajax({
      url: "{% url 'get_rate' %}",
      type : 'POST',
      data:{
          id : name,
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
    
      success: function(response) {
        $("#rate" +n).val(response.rate);
        $("#HSN" +n).val(response.hsn);
        srcofsupply();
        itemchange();
      },
    });

  }

  function srcofsupply(){ 
      $(".selecttax").removeClass('d-flex');
      $(".selecttax").addClass('d-none');

      if(isGST())
      {
        $(".tax2").removeClass('d-flex');
        $(".tax2").addClass('d-none');
        $(".tax1").removeClass('d-none');
        $(".tax1").addClass('d-flex'); 

        $("#cgst1").removeClass('d-none');
        $("#cgst1").addClass('d-flex');
        $("#sgst1").removeClass('d-none');
        $("#sgst1").addClass('d-flex');

        $("#igst1").removeClass('d-flex');
        $("#igst1").addClass('d-none');

      }
      else{ 

        $(".tax2").removeClass('d-none');
        $(".tax2").addClass('d-flex');
        $(".tax1").removeClass('d-flex');
        $(".tax1").addClass('d-none'); 

        $("#igst1").removeClass('d-none');
        $("#igst1").addClass('d-flex');

        $("#cgst1").removeClass('d-flex');
        $("#cgst1").addClass('d-none');
        $("#sgst1").removeClass('d-flex');
        $("#sgst1").addClass('d-none');
      }
     
  }
 function itemchange(){
  
  var row_count = $("#items-table-body tr").length;
    var tax_tot = 0

    var amount_total = 0;
    var ship = parseFloat($("#addcharge").val());

    for(var i=0; i<row_count;i++){
      var rate = $("#rate"+i).val();
      var qnty = $("#qty" +i).val();
      var amount = rate*qnty;
      var disc = $("#disc" + i).val();

      var tax1 = $("#intra_tax" +i).val();
      var tax2 = $("#inter_tax" +i).val();

      if (tax1 == 0){
        if(tax2 == 0){
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
             
          }

          else{
            $("#amount" +i).val(amount);
           }
          tax = 0;
          tax_tot += tax;
        }
        else{
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax2/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax2/100));
           }
          
          tax_tot += tax;
          $("#igst").val(tax_tot);
          $("#total_taxamount").val(tax_tot);
        }
      }
      else{
        if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax1/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax1/100));
           }
        tax = (amount*(tax1/100));
        tax_tot += tax;
        $("#sgst").val(tax_tot/2);
        $("#cgst").val(tax_tot/2);
        $("#total_taxamount").val(tax_tot);
      }

      if(ship){
        // console.log('yea');
        if (disc){
          amount_disc =  amount - disc;
          $("#amount" + i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
          
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }
      }
      else{

        if (disc){
          amount_disc =  amount - disc;
          $("#amount" +i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
        
          $("#grandtotal").val(amount_total+tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+tax_tot);
        }
      }
      
    }  
 }
  $(document).on('change', '#srcofsupply',function(){ debugger

      $(".selecttax").removeClass('d-none');
      $(".selecttax").addClass('d-flex');
      var st = $("#srcofsupply").val().split(" ").slice(1).join(" ").trim();
      // console.log(st)
      if( st == $("#company_state").val())
      {
        // tax - 1 GST
         $(".tax2").removeClass('d-flex');
         $(".tax2").addClass('d-none');
         $(".tax1").removeClass('d-flex');
         $(".tax1").addClass('d-none');

        $("#cgst1").removeClass('d-none');
        $("#cgst1").addClass('d-flex');
        $("#sgst1").removeClass('d-none');
        $("#sgst1").addClass('d-flex');

        $("#igst1").removeClass('d-flex');
        $("#igst1").addClass('d-none');


      }
      else{
        $(".tax1").removeClass('d-flex');
        $(".tax1").addClass('d-none');
        $(".tax2").removeClass('d-flex');
        $(".tax2").addClass('d-none');

        $("#igst1").removeClass('d-none');
        $("#igst1").addClass('d-flex');

        $("#cgst1").removeClass('d-flex');
        $("#cgst1").addClass('d-none');
        $("#sgst1").removeClass('d-flex');
        $("#sgst1").addClass('d-none');
      }
    });
 
  $(document).on("click",".selecttax",function(){
debugger
    // $(".selecttax").removeClass('d-flex');
    // $(".selecttax").addClass('d-none');
    var st = $("#srcofsupply").val();
    var comp_state =["[KL] Kerala","[KL]-Kerala","kerala","Kerala","Kerala [KL]","Kerala - [KL]"]; 
    if(comp_state.indexOf(st) > -1){
      // $(".tax2").addClass('d-none');
      // $(".tax1").removeClass('d-none');
      // $(".tax1").addClass('d-flex');

    }
    else{
      // $(".tax1").addClass('d-none');
      // $(".tax2").removeClass('d-none');
      // $(".tax2").addClass('d-flex');
    }

  });




    
  $(document).on('change','.qty',function(){debugger

    var row_count = $("#items-table-body tr").length;
    var tax_tot = 0

    var amount_total = 0;
    var ship = parseFloat($("#addcharge").val());

    for(var i=0; i<row_count;i++){
      var rate = $("#rate"+i).val();
      var qnty = $("#qty" +i).val();
      var amount = rate*qnty;
      var disc = $("#disc" + i).val();

      var tax1 = $("#intra_tax" +i).val();
      var tax2 = $("#inter_tax" +i).val();

      if (tax1 == 0){
        if(tax2 == 0){
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
             
          }

          else{
            $("#amount" +i).val(amount);
           }
          tax = 0;
          tax_tot += tax;
        }
        else{
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax2/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax2/100));
           }
          
          tax_tot += tax;
          $("#igst").val(tax_tot);
          $("#total_taxamount").val(tax_tot);
        }
      }
      else{
        if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax1/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax1/100));
           }
        tax = (amount*(tax1/100));
        tax_tot += tax;
        $("#sgst").val(tax_tot/2);
        $("#cgst").val(tax_tot/2);
        $("#total_taxamount").val(tax_tot);
      }

      if(ship){
        // console.log('yea');
        if (disc){
          amount_disc =  amount - disc;
          $("#amount" + i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
          
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }
      }
      else{

        if (disc){
          amount_disc =  amount - disc;
          $("#amount" +i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
        
          $("#grandtotal").val(amount_total+tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+tax_tot);
        }
      }
      
    }  
  });


$(document).on('change','.disc',function(){ debugger

  var row_count1 = $("#items-table-body tr").length;
  var amount_tot = 0;
  var amount_disc,tax_tot1= 0;
  var i,rate,qnty,amount;
  var ship = parseFloat($("#addcharge").val());

  for(i = 0;i<row_count1 ; i++){

      rate = $("#rate"+ i).val();
      qnty = $("#qty" + i).val();
      amount = rate*qnty;
      
      amount_disc =amount - $("#disc" + i).val();
      $("#amount" + i).val(amount_disc);

      amount_tot += amount_disc;

      $("#subtotal").val(amount_tot);

      var tax1 = $("#intra_tax" +i).val();
      var tax2 = $("#inter_tax" +i).val();

      if (tax1 == 0){
        if(tax2 == 0){
          tax = 0;
          tax_tot1 += tax;
        }
        else{
          tax = amount_disc*(tax2/100);
          tax_tot1 += tax;
          $("#igst").val(tax_tot1);
          $("#total_taxamount").val(tax_tot1);
        }
      }
      else{
          tax = amount_disc*(tax1/100);
          tax_tot1 += tax;
          $("#sgst").val(tax_tot1/2);
          $("#cgst").val(tax_tot1/2);
          $("#total_taxamount").val(tax_tot1);
      }
      // console.log(tax)
      // console.log(tax_tot1)

      if(ship){
        $("#grandtotal").val(amount_tot+tax_tot1+ship);
      }

      else{
         $("#grandtotal").val(amount_tot+tax_tot1);
      }
  }

});


  $(document).on("change",".tax1",function(){ debugger

    var row_count2 = $("#items-table-body tr").length;
    var amount_tot1 = 0;
    var ship = parseFloat($("#addcharge").val());
    var tot_tax,tax_tot3 = 0;
    var i;

    for(i = 0;i<row_count2 ; i++){

      var rate = $("#rate"+i).val();
      var qnty = $("#qty" +i).val();
      var amount = rate*qnty;
      var disc = $("#disc" + i).val();
      var tax = $("#intra_tax"+i).val();

      if(disc){
        tot_tax = (amount-disc) * (tax/100);
      }
      else{
        tot_tax = amount * (tax/100);
      }
      
      tax_tot3 += tot_tax;

      $("#sgst").val(tax_tot3/2);
      $("#cgst").val(tax_tot3/2);
      $("#total_taxamount").val(tax_tot3);

      if(disc){
        if(ship){
          amount_disc = amount - disc;
          amount_tot1 += amount_disc
          $("#subtotal").val(amount_tot1);
          $("#grandtotal").val(amount_tot1+tax_tot3+ship);
        }
        else{
          amount_disc = amount - disc;
          amount_tot1 += amount_disc
          $("#subtotal").val(amount_tot1);
          $("#grandtotal").val(amount_tot1+tax_tot3);
        }
        
      }
      else{
        if(ship){
          amount_tot1 += amount; 
          $("#subtotal").val(amount_tot1);
          $("#grandtotal").val(amount_tot1+tax_tot3+ship);
        }
        else{
          amount_tot1 += amount; 
          $("#subtotal").val(amount_tot1);
          $("#grandtotal").val(amount_tot1+tax_tot3);
        }
      }
    }

  });

  $(document).on("change",".tax2",function(){
debugger
    var row_count2 = $("#items-table-body tr").length;
    var amount_to = 0;
    var tax_tot4= 0;
    var ship = parseFloat($("#addcharge").val());
    var i;

    for(i = 0;i<row_count2 ; i++){
      console.log(i);
      var rate = $("#rate"+i).val();
      var qnty = $("#qty" +i).val();
      var amount = rate*qnty;
      var disc = $("#disc" + i).val();
      var tax = $("#inter_tax"+i).val();
      var tot

      if(disc){
        tot = (amount-disc) * (tax/100);
      }
      else{
        tot = amount * (tax/100);
      }

      tax_tot4 += tot

      $("#sgst").val(tax_tot4/2);
      $("#cgst").val(tax_tot4/2);
      $("#total_taxamount").val(tax_tot4);

      $("#igst").val(tax_tot4);

      if(disc){
        amount_disc = amount - disc;
        amount_to += amount_disc;

        $("#subtotal").val(amount_to);
        $("#grandtotal").val(amount_to+tax_tot4);
      
      }
      else{
        amount_to += amount;
        $("#subtotal").val(amount_to);
        $("#grandtotal").val(amount_to+tax_tot4)
        
      }
   }
  });


    $(document).on("change","#addcharge",function(){ debugger

      //var sta = $("#srcofsupply").val().split('-')[1]
      // if(sta == $("#company_state").val()){
      //   var total =parseFloat( $("#subtotal").val())+ parseFloat( $("#sgst").val())+ parseFloat($("#cgst").val())+ parseFloat($("#addcharge").val());
      //   $("#grandtotal").val(total);
      // }
      // else if(sta != $("#company_state").val()){
      //   var total = parseFloat($("#subtotal").val())+  parseFloat($("#igst").val())+ parseFloat($("#addcharge").val());
      //   $("#grandtotal").val(total);
      // }
      // else{
      //   var total = parseFloat($("#subtotal").val())+  parseFloat($("#addcharge").val());
      //   $("#grandtotal").val(total);
      // }
      var total = parseFloat($("#subtotal").val())+  parseFloat($("#addcharge").val());
     
      if(isGST()){
        total = parseFloat( $("#subtotal").val())+ parseFloat( $("#sgst").val())+ parseFloat($("#cgst").val())+ parseFloat($("#addcharge").val());
        $("#grandtotal").val(total);

      }
      else{
        total = parseFloat($("#subtotal").val())+  parseFloat($("#igst").val())+ parseFloat($("#addcharge").val());
      }
      $("#grandtotal").val(total);
    });

    $(document).on("change", "#add_round_off", function(){
      var round = parseFloat($("#grandtotal").val()) + parseFloat($("#add_round_off").val()) 
      $("#grandtotal").val(round);
    });


  // $(document).on("click",'#save',function(){

  //   var input1 = document.getElementById("disc");
  //   if (input1.value === "") {
  //     input1.value = 0;
  //   }
  //   var input2 = document.getElementById("date1");
  //   if (input2.value === "") {
  //     input2.value = "{% now 'Y-m-d' %}";
  //   }

  // });
</script>

<script>
  // set todays date on estimate date field
  var today = new Date().toISOString().substr(0, 10);
    document.getElementById("date1").value = today;

    // Get the bill date and due date elements
    var billDateInput = document.getElementById("date1");
    var endDateInput = document.getElementById("date2");

    // Add an event listener to the payment terms select element
    var recpaymentTermsSelect = document.getElementById("terms");
    recpaymentTermsSelect.addEventListener("change", function () {
        var selectedOption = recpaymentTermsSelect.options[recpaymentTermsSelect.selectedIndex];
        var recpaymentTermsValue = selectedOption.value;

        var billDate = new Date(billDateInput.value);
        var endDate = new Date(billDate.getTime() + (recpaymentTermsValue * 24 * 60 * 60 * 1000));
        endDateInput.value = endDate.toISOString().split("T")[0];
    });
</script>

<script>

  function cancelDialog() {

      var frm = document.getElementById("forms");
      let customMsg = "Do you want to cancel?";

      if (confirm(customMsg)) {
          alert("Recurring Bill cancelled!")
      }
  }

  function saveAsDraftDialog() { 
    document.getElementById("date2").disabled = false; 
    let grand_total = $('#grandtotal').val();
    let paid = $('#amtPaid').val(); 
    if(parseFloat(paid) > parseFloat(grand_total)){
       alert("Paid amount should not be greater than grand total.")
    }
    else{
      var frm = document.getElementById("forms");
      frm.action = ("{% url 'draft_recurring_bills' %}")
    }
  }

  function saveAndOpenDialog() { 
    document.getElementById("date2").disabled = false; 
    let grand_total = $('#grandtotal').val();
    let paid = $('#amtPaid').val(); 
    if(parseFloat(paid) > parseFloat(grand_total)){
       alert("Paid amount should not be greater than grand total.")
    }
    else{
      var frm = document.getElementById("forms");
      frm.action = ("{% url 'create_recurring_bills' %}")
    }
      
  }
</script>
<script>
  function isGST()
  {
     var gst_state =["[KL] Kerala","[KL]-Kerala","kerala","Kerala","Kerala [KL]","Kerala-[KL]"];  
     let customer_st  =$("#srcofsupply").val();
     if(gst_state.indexOf(customer_st)>-1)
      {   
        $(".tax2").removeClass('d-flex');
        $(".tax2").addClass('d-none');
        $(".tax1").removeClass('d-none');
        $(".tax1").addClass('d-flex'); 

        $("#cgst1").removeClass('d-none');
        $("#cgst1").addClass('d-flex');
        $("#sgst1").removeClass('d-none');
        $("#sgst1").addClass('d-flex');

        $("#igst1").removeClass('d-flex');
        $("#igst1").addClass('d-none');
        return true;
      }
      else{
        $(".tax2").removeClass('d-none');
        $(".tax2").addClass('d-flex');
        $(".tax1").removeClass('d-flex');
        $(".tax1").addClass('d-none'); 

        $("#igst1").removeClass('d-none');
        $("#igst1").addClass('d-flex');

        $("#cgst1").removeClass('d-flex');
        $("#cgst1").addClass('d-none');
        $("#sgst1").removeClass('d-flex');
        $("#sgst1").addClass('d-none');
        return false;
      }
  }
</script>
<script>
   $(document).ready(function() {
    $("#c_gstin").change(function() {

        var x=$("#c_gstin").val();
        var c_gst_label=document.getElementById("c_gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
          c_gst_label.style.display="block";
          c_gst_label.style.color="red";
          c_gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
          c_gst_label.style.color="green";
          c_gst_label.innerHTML = "Valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#c_pan").change(function() {
        var x= $("#c_pan").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.display="block";
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "Valid PAN Number.";

        }
      });
    });

    $(document).ready(function() {
    $("#c_gsttype").change(function() {
      var x=$('#c_gsttype').val();
      console.log(x)
      if(x=="Unregistered Business-not Registered under GST") 
      {
        $(".gstrow").addClass('d-none');
        

      }
      else if(x == 'Overseas- Persons with who you do import or exports of supplies outside india'){
        $(".gstrow").addClass('d-none');
        console.log('poor')
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      
      }
    
    });
  });
</script>

<script>
  function validateForm() {
      var paymentTerms = document.getElementById("date2").value;
      if (paymentTerms === "") {
          document.getElementById("date2").classList.add("is-invalid");
          document.getElementById("date2").classList.remove("is-valid");
          return false;
      } else {
          document.getElementById("date2").classList.remove("is-invalid");
          document.getElementById("date2").classList.add("is-valid");
          return true;
      }
  }

  // Validate the form on submit
  document.getElementById("forms").addEventListener("submit", function (event) {
      if (!validateForm()) {
          event.preventDefault();
      }
  });
</script>
<!-- NEW VENDOR MODAL -->
<script>
  function gstPan_function(){
      var x=document.getElementById('GSTT').value
      if(x=="Unregistered Business-not Registered under GST")
      {
          document.getElementById("pan").style.display="block";
          document.getElementById("gst").style.display="none";

          
      }
      else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
      {
          document.getElementById("gst").style.display="block";
          document.getElementById("pan").style.display="block";


      }
  
  }
  function gst_check(){
      var x=document.getElementById("gst_input").value;
      var gst_label=document.getElementById("gst_label")
      // var expr=/^[0-9]{15}$/;
      var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

      // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
      // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
      if (!expr.test(x)) {
          gst_label.style.color="red";
          gst_label.innerHTML = "Invalid GST Number.";
      }
      else{
          gst_label.style.color="green";

          gst_label.innerHTML = "valid GST Number.";

      }
  }
  function pan_check(){
      var x=document.getElementById("pan_input").value;
      var gst_label=document.getElementById("pan_label")
      var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
      if (!expr.test(x)) {
          pan_label.style.color="red";
          pan_label.innerHTML = "Invalid PAN Number.";
      }
      else{
          pan_label.style.color="green";

          pan_label.innerHTML = "valid PAN Number.";

      }
  }



  $(document).ready(function () {
      $(".toggle1").click(function (e) {
        e.preventDefault();
        $("fieldset1").toggle();
      })
    })
    $(document).ready(function () {
      $(".toggle2").click(function (e) {
        e.preventDefault();
       
        $("fieldset2").toggle(); 
        $("fieldset5").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();


    
      })
    })

    $(document).ready(function () {
      $(".toggle3").click(function (e) {
        e.preventDefault();
        $("fieldset5").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();

      })
    })
    $(document).ready(function () {
      $(".toggle4").click(function (e) {
        e.preventDefault();
        $("fieldset6").toggle();
        $("fieldset2").hide();
        $("fieldset5").hide();
        $("fieldset7").hide();
              
      })
    })
    $(document).ready(function () {
      $(".toggle7").click(function (e) {
        e.preventDefault();
        $("fieldset7").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset5").hide();
       

       
      })
    })





 

  //   $('document').ready(function () {
  //     $('.add_another').click(function () {
  //       $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" style="width:8rem;height: 2.4rem;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="email[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="wphone[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="mobile[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="skype[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="department[]" style="width:8rem;" class="txtbox" value="" /></td></tr>');
  //     });
  //   })

  $('document').ready(function () {
      $('.add_another').click(function () {
        $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" class="bg-light" style="width:8rem;height:2.4rem;border: none;color: black;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="email" name="email[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{7}" id="twphone" name="wphone[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{10}" id="tmobile" onclick="sample1()" name="mobile[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="number" onclick="sample()" name="skype[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="department[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td></tr>');
      });
    })

    function fieldset5_function()
    {
      document.getElementById("address").style.display="block";
    }

  

  function myCopyAddressFunction() {
      var checkBox = document.getElementById("myCheckT");
      var textatn = document.getElementById("batten");
      var txtcry = document.getElementById("bctry");
      var txtadrs11 = document.getElementById("badd1");
      var txtcty = document.getElementById("bcty");
      var txtstat = document.getElementById("bste");
      var txtzip = document.getElementById("bzp");
      var txtphone = document.getElementById("bphone_num");
      var txtfx = document.getElementById("bfx");

      var textatn1 = document.getElementById("satten");
      var txtcry1 = document.getElementById("sctry");
      var txtadrs21 = document.getElementById("sadd1");
      var txtcty1 = document.getElementById("scty");
      var txtstat1 = document.getElementById("sste");
      var txtzip1 = document.getElementById("szp");
      var txtphone1 = document.getElementById("sphone_num");
      var txtfx1 = document.getElementById("sfx");
      if (checkBox.checked == true) {
        textatn1.value = textatn.value;
        txtadrs21.value = txtadrs11.value;
        txtcty1.value = txtcty.value;
        txtstat1.value = txtstat.value;
        txtzip1.value = txtzip.value; 
        txtphone1.value = txtphone.value;
        txtfx1.value = txtfx.value;
        



        

      } else {
        txtadrs21.value = "";
        txtcty1.value = "";
        txtstat1.value = "";
        txtzip1.value = "";
        txtphone1.value = "";
        txtfx1.value = "";
        txtcry1.value = "";
        textatn1.value = "";


      }
    }


    function open_table()
    {
      document.getElementById("hid").style.display="block";
      
    }



    function work_phone()
    {
      var x=document.getElementById("workphone").value;
      var y=document.getElementById("workphone_label")
      var expr=/^[0-9]{7}$/;
      if (!expr.test(x)) {
          y.style.color="red";
          y.innerHTML = "Invalid Phone Number.";
      }
      else{
          y.style.color="green";

          y.innerHTML = "valid Phone Number.";

      }


    }

    function mobile_phone()
    {
      
      var a=document.getElementById("mphone").value;
      var b=document.getElementById("mphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a)) {
          b.style.color="red";
          b.innerHTML = "Invalid Phone Number.";
      }
      else{
          b.style.color="green";

          b.innerHTML = "valid Phone Number.";

      }
    }

    function bphone_number()
    {
      var a1=document.getElementById("bphone_num").value;
      var b1=document.getElementById("bphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function sphone_number()
    {
      var a1=document.getElementById("sphone_num").value;
      var b1=document.getElementById("sphone_label");
      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function fax_number()
    {
      var a1=document.getElementById("bfx").value;
      var b1=document.getElementById("fax_label");
      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

    function sfax_number()
    {
      var a1=document.getElementById("sfx").value;
      var b1=document.getElementById("sfax_label");
      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid Phone Number.";
      }
      else{
          b1.style.color="green";

          b1.innerHTML = "valid Phone Number.";

      }
    }

  
    function sample()
    {

      var tbldata = document.getElementById("tbl");
      var total_rows = tbldata.rows.length;
      x=document.getElementById("tbl");
      var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;

      var b1=document.getElementById("tlabel");

      b1.innerHTML = "";

      var expr=/^[0-9]{10}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid";
      }
      else{
          b1.style.color="green";
          b1.innerHTML = "valid";

      }

     

    }

    function sample1()
    {

      var tbldata = document.getElementById("tbl");
      var total_rows = tbldata.rows.length;
      x=document.getElementById("tbl");
      var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;

      var b1=document.getElementById("twph_label");

      b1.innerHTML = "";

      var expr=/^[0-9]{7}$/;
      if (!expr.test(a1)) {
          b1.style.color="red";
          b1.innerHTML = "Invalid";
      }
      else{
          b1.style.color="green";
          b1.innerHTML = "valid";

      }

     

    }


    

   
</script>

<!-- END NEW VENDOR MODAL -->
<!--- Customer Modal -->
 

<script>
  function generateFullName_cust()
{
document.getElementById('txtFullName').value = 
document.getElementById('sa').value + ' '+
document.getElementById('fName').value + ' ' + 
document.getElementById('lName').value;

}
 function gstPan_function_cust(){
     var x=document.getElementById('GSTT').value
     if(x=="Unregistered Business-not Registered under GST")
     {
         document.getElementById("pan").style.display="block";
         document.getElementById("gst").style.display="none";

         
     }
     else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
     {
         document.getElementById("gst").style.display="block";
         document.getElementById("pan").style.display="block";


     }
 
 }
 function gst_check_cust(){
     var x=document.getElementById("gst_input").value;
     var gst_label=document.getElementById("gst_label")
     // var expr=/^[0-9]{15}$/;
     var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

     // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
     // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
     if (!expr.test(x)) {
         gst_label.style.color="red";
         gst_label.innerHTML = "Invalid GST Number.";
     }
     else{
         gst_label.style.color="green";

         gst_label.innerHTML = "valid GST Number.";

     }
 }
 function pan_check_cust(){
     var x=document.getElementById("pan_input").value;
     var gst_label=document.getElementById("pan_label")
     var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
     if (!expr.test(x)) {
         pan_label.style.color="red";
         pan_label.innerHTML = "Invalid PAN Number.";
     }
     else{
         pan_label.style.color="green";

         pan_label.innerHTML = "valid PAN Number.";

     }
 }

 $(document).ready(function () {
     $(".toggle_cust_").click(function (e) {
       e.preventDefault();
       $("fieldset_cust_19").toggle();
     })
   })
   $(document).ready(function () {
     $(".toggle_cust_2").click(function (e) {
       e.preventDefault();
      
       $("fieldset_cust_2").toggle(); 
       $("fieldset_cust_5").hide();
       $("fieldset_cust_6").hide();
       $("fieldset_cust_7").hide();


   
     })
   })

   $(document).ready(function () {
     $(".toggle_cust_3").click(function (e) {
       e.preventDefault();
       $("fieldset_cust_5").toggle();
       $("fieldset_cust_2").hide();
       $("fieldset_cust_6").hide();
       $("fieldset_cust_7").hide();

     })
   })
   $(document).ready(function () {
     $(".toggle_cust_4").click(function (e) {
       e.preventDefault();
       $("fieldset_cust_6").toggle();
       $("fieldset_cust_2").hide();
       $("fieldset_cust_5").hide();
       $("fieldset_cust_7").hide();
             
     })
   })
   $(document).ready(function () {
     $(".toggle_cust_7").click(function (e) {
       e.preventDefault();
       $("fieldset_cust_7").toggle();
       $("fieldset_cust_2").hide();
       $("fieldset_cust_6").hide();
       $("fieldset_cust_5").hide();
      

      
     })
   })


 $('document').ready(function () {
     $('.add_another_cust').click(function () {  debugger
       $("#tbl_cust").append('<tr><td><select name="sal[]" id="PLACE" class="bg-light" style="width:8rem;height:2.4rem;border: none;color: black;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="ftname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="ltname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="email" name="mail[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{7} name="bworkpn[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{10}"  name="bmobile[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="number"  name="bskype[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdesg[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdept[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td></tr>');
     });
   })

    
   function myCopyAddressFunction_cust() {
     var checkBox = document.getElementById("myCheckT");
     var textatn = document.getElementById("batn");
     var txtcry = document.getElementById("bcty");
     var txtadrs11 = document.getElementById("bads1");
     var txtadrs12 = document.getElementById("bads2");
     var txtcty = document.getElementById("bct");
     var txtstat = document.getElementById("bst");
     var txtzip = document.getElementById("bzip");
     var txtphone = document.getElementById("bpon");
     var txtfx = document.getElementById("bfx");

     var textatn1 = document.getElementById("satn");
     var txtcry1 = document.getElementById("scty");
     var txtadrs21 = document.getElementById("sads1");
     var txtadrs22 = document.getElementById("sads2");
     var txtcty1 = document.getElementById("sct");
     var txtstat1 = document.getElementById("sst");
     var txtzip1 = document.getElementById("szip");
     var txtphone1 = document.getElementById("spn");
     var txtfx1 = document.getElementById("sfx");
     if (checkBox.checked == true) {
     textatn1.value = textatn.value;
     txtcry1.value = txtcry.value;
     txtadrs21.value = txtadrs11.value;
     txtadrs22.value = txtadrs12.value;
     txtcty1.value = txtcty.value;
     txtstat1.value = txtstat.value;
     txtzip1.value = txtzip.value;
     txtphone1.value = txtphone.value;
     txtfx1.value = txtfx.value;

     } else {
     textatn1.value = "";
     txtcry1.value = "";
     txtadrs21.value = "";
     txtadrs22.value = "";
     txtcty1.value = "";
     txtstat1.value = "";
     txtzip1.value = "";
     txtphone1.value = "";
     txtfx1.value = "";

     }
     }
 




   
//--------payment terms modal-----------

$(document).on("click","#paySave",function(){
$.ajax({
 
 type : 'POST',
 url:"{% url 'payment_termA' %}",

 data:{
   term : $("#term").val(),
      day : $("#day").val(),
     
     csrfmiddlewaretoken: '{{ csrf_token }}'
     
   },
 
   success: function(response) {
     document.getElementById("modalPayment").reset();
     
   },
});        
});


  
</script>


<!-- END of customer modal -->
<!-- Add item-->
<script>
  function resetForm() {
    document.getElementById("Form").reset();
  }
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function addUnit() {
    // Get the form and form data
    let unitForm = document.getElementById("unitForm");
    let formData = new FormData(unitForm);

    // Send the form data through AJAX
    $.ajax({
        url: "{% url 'add_unit' %}",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function (response) {
            const unitName = response.unit_name;
            const unitId = response.unit_id; // Assume the server returns the unit ID

            // Handle the success response
            console.log(response);

            // Get the dropdown element
            const dropdown = document.getElementById("unit");

            // Create and add the new unit option
            const newUnitOption = document.createElement("option");
            newUnitOption.value = unitId;
            newUnitOption.text = unitName;

            // Add the new unit option to the dropdown
            dropdown.add(newUnitOption);

            // Select the newly added unit option to display it as the current selection
            newUnitOption.selected = true;

            // Close the form and perform any other actions
            closeForm();
        },
        error: function (error) {
            // Handle the error response
            console.log(error);
        }
    });
}

function openForm() {
    let formContainer = document.getElementById("myForm");
    formContainer.style.display = "block";
}

function closeForm() {
    let formContainer = document.getElementById("myForm");
    formContainer.style.display = "none";
}
</script>
<script>
  function addAccount() {
    // Get the form and form data
    let accountForm = document.getElementById("accountForm");
    let formData = new FormData(accountForm);
  
    // Send the form data through AJAX
    $.ajax({
      url: "{% url 'add_account' %}",
      type: "POST",
      data: formData,
      processData: false,
      contentType: false,
      success: function (response) {
        const accountType = response.Account_type;
        const accountName = response.Account_name;
        const accountId = response.account_id; // Assume the server returns the account ID
  
        // Handle the success response
        console.log(response);
  
        // Get the dropdown element
        const dropdown = document.getElementById("myaccount");
  
        // Create and add the new account option
        const newAccountOption = document.createElement("option");
        newAccountOption.value = accountId;
        newAccountOption.text = accountName;
  
        // Find the correct position to insert the new account option
        let foundAccountType = false;
        for (let i = 0; i < dropdown.options.length; i++) {
          const option = dropdown.options[i];
          if (option.disabled && option.innerText === accountType)   {
            foundAccountType = true;
            // Move to the next option to find the correct position within the account type
            continue;
          }
          if (foundAccountType) {
            if (!option.disabled) {
              // Insert the new account option before the first non-disabled option within the account type
              dropdown.add(newAccountOption, i);
              break;
            }
          }
        }
  
        // If the account type option doesn't exist, create and add it along with the new account option
        if (!foundAccountType) {
          const accountTypeOption = document.createElement("option");
          accountTypeOption.text = accountType;
          accountTypeOption.disabled = true;
          accountTypeOption.className = "btn btn-dark text-light highlight-account-type";
          dropdown.add(accountTypeOption);
          dropdown.add(newAccountOption);
        }
  
        // Select the newly added account option to display it as the current selection
        newAccountOption.selected = true;
  
        // Close the form and perform any other actions
        closeForm1();
      },
      error: function (error) {
        // Handle the error response
        console.log(error);
      }
    });
  }
  const dropdown = document.getElementById("myaccount");
  dropdown.addEventListener("change", function () {
  // Get the selected option from the dropdown
  const selectedOption = dropdown.selectedOptions[0];
  // Get the account ID from the selected option's value attribute
  const selectedAccountId = selectedOption.value;

  // Now you can use selectedAccountId for further processing or display
  console.log("Selected Account ID:", selectedAccountId);
});
  
function showForm() {
  let formContainer = document.getElementById("myForm1");
  formContainer.style.display = "block";
}

function closeForm1() {
  let formContainer = document.getElementById("myForm1");
  formContainer.style.display = "none";
}

</script>
<!--END Add item-->
{% endblock %}